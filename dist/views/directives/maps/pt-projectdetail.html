<div data-ng-show=showDetailFlag class=proj-card-wrap data-ng-click=cardClick() data-ng-mouseenter="mouseAction('enter')" data-ng-mouseleave=mouseAction() data-ng-class="{'hide-pro-card': map.state.activateToggleCollage && map.state.collapseState}">

    <div data-ng-if=data.projectId class=proj-name-wrap id=projectDetail_{{data.projectId}}>
        <a class=proj-name tooltip="{{data.builder.name}} {{data.name}}" tooltip-placement=bottom data-ng-click=projectLinkTracking() data-ng-href=/{{data.URL}} target=_blank>{{data.builder.name}} {{data.name}}</a> &nbsp;
        <a data-ng-href=/{{data.URL}} target=_blank data-ng-click=projectLinkTracking() tooltip="Go to this project" tooltip-placement=right> <i class="pt pt-icon-external-link"></i> </a>
        <a class=close data-ng-click=close()>&#120;</a>
        <div class=clearfix></div>
    </div>
    <div class=loc-name-wrap>
        <span class=loc-name tooltip-placement=bottom tooltip="{{ data.locality.label }}, {{ data.locality.suburb.city.label }}">{{ data.locality.label }}, {{ data.locality.suburb.city.label }}</span>
        
        
        <div class=clearfix></div>
    </div>

    <ul tabset="" class=projectDetailsTabs>
        <li tab="" heading=overview id=gallery active=activeTabHash.gallery data-ng-click="tabSwitch('gallery')">
            <div class=proj-img-gall>
                <div pt-imagecarousel="" lead-data="getLeadData(undefined, undefined, 'hidden-enquiry-gallery')" settings=gallerySettings images=imageData imagesfullview=imageDataFullView has3dimages=has3dimages landmarkcount=landmarkImageTypeCount></div>
            </div>
            <div class=project-details>
                <div class=heads>Project Details</div>
                <div class=key-val-wrap>
                    <div class=key-col>Launch Date: </div>
                    <div class=val-col>{{ data.launchDate }} </div>
                </div>
                <div class=key-val-wrap>
                    <div class=key-col>Project Status: </div>
                    <div class=val-col>{{data.projectStatus}}</div>
                </div>
                <div class=key-val-wrap>
                    <div class=key-col>Possession Date: </div>
                    <div class=val-col>{{ data.possessionDate }} </div>
                </div>
                <div class=key-val-wrap>
                    <div class=key-col>Total Units: </div>
                    <div class=val-col>{{ data.supply }} </div>
                </div>
                <div class=key-val-wrap>
                    <div class=key-col>Total Area: </div>
                    <div class=val-col>{{ data.projectSize }}</div>
                </div>
                <div class=key-val-wrap>
                    <div class=key-col>Property Type: </div>
                    <div class=val-col>{{ data.bhkInfo }}</div>
                </div>
                <div class=key-val-wrap data-ng-show="data.amenities && data.amenities.length">
                    <div class=key-col>Amenities: </div>
                    <div class="val-col amenities-wrap" data-ng-if="data.amenities && data.amenities.length">
                        <ul>
                            <li data-ng-repeat="item in data.amenities">
                                <i data-ng-if="item.amenityMaster.abbreviation != 'Oth'" class="fs0 pt pt-icon-{{item.amenityMaster.abbreviation}}" tooltip="{{ item.amenityDisplayName }}" tooltip-placement=top></i>
                                <span data-ng-if="item.amenityMaster.abbreviation == 'Oth'" tooltip="{{ item.amenityDisplayName | limitTo : 200}}" tooltip-placement=right>Others</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </li>
        <li tab="" heading="Price & Plans" id=price active=activeTabHash.price data-ng-click="tabSwitch('price')">
            <label class=check-show-price data-ng-style="{'font-weight': data.showPricePerAreaCheckbox ? 'bold' : 'normal'}">
                <input type=checkbox name="" data-ng-disabled=!data.showPricePerAreaCheckbox data-ng-click=togglePriceArea($event)> Always show price / area
            </label>

            <table class="table table-striped table-condensed table-hover tbl-price" data-ng-class="{ifresale : !data.isResale}">
                <thead>
                    <tr>
                        <th>TYPE
                        <th>SIZE
                        <th>BUILDER PRICE
                        <th data-ng-if=data.isResale>RESALE PRICE
                        <th>FLOOR PLANS
                    
                
                <tbody>
                    <tr data-ng-repeat="prop in data.properties">
                        <td class=type-ellipse ng-class="{ifresaletype: !data.isResale}" tooltip={{prop.unitName}}>{{prop.unitName}}
                        <td data-ng-if="prop.size && prop.size != 'NA'">{{prop.size}} {{prop.measure}}
                        <td data-ng-if="!prop.size || prop.size == 'NA'" data-ng-click="openLeadForm('size', prop, 'hidden-sizerequest-top')"><a class=on_rqst href=javascript:void(0)>On Request</a>
                        <td data-ng-if=prop.budget>{{ prop.budget | priceFormat }}<br> 
                            <span class=sizes data-ng-if=prop.size>
                                <i class="pt pt-icon-inr"></i>{{ prop.pricePerUnitArea }} /{{ prop.measure }}
                            </span>
                        
                        <td data-ng-if=!prop.budget data-ng-click="openLeadForm('newPrice', prop, 'hidden-pricerequest-top')"><a class=on_rqst href=javascript:void(0)>On Request</a>
                        <td data-ng-if="data.isResale && prop.resalePrice">{{ prop.resalePrice | priceFormat }}<br> 
                            <span class=sizes data-ng-if=prop.resalePricePerUnitArea>
                                <i class="pt pt-icon-inr"></i>{{ prop.resalePricePerUnitArea }} /{{ prop.measure }}
                            </span>
                        
                        <td data-ng-if="data.isResale && !prop.resalePrice" data-ng-click="openLeadForm('resalePrice', prop, 'hidden-pricerequest-top')"><a class=on_rqst href=javascript:void(0)>On Request</a>
                        <td class=plans>
                            <a data-ng-if="prop.images.length > 0" class=view-plan href=javascript:void(0); data-ng-click=openGallery(prop)>View Plan</a>
                            <span data-ng-if=!prop.images.length data-ng-click="openLeadForm('floorPlan', prop, 'hidden-floorrequest-top')"><a class=on_rqst href=javascript:void(0)>On Request</a></span>
                            <div class=similar-wrap>
                                <a href=javascript:void(0); target=_blank>Show Similar Properties</a>
                            </div>
                        
                    
                
            </table>
        </li>
        
        <li tab="" disabled heading=Nearby id=neighbourhood active=activeTabHash.neighbourhood data-ng-click="tabSwitch('neighbourhood')">
            <div pt-custom-directions="" data=data></div>
            <div pt-nearby-amenities="" shared-obj=data.item></div>
        </li>

        
        <li tab="" disabled heading="Time Sense" id=timeSense active=activeTabHash.timesense data-ng-click="tabSwitch('timeSense')">
            <div class=container-fluid>
                <div class=paddingTB10>With Time Sense now you can get an overview of time it will take to get to any point around this project.</div>
                <div class=row>
                    
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <button data-ng-click=drawTravelHeatmap() class="btn btn-primary small-btn" data-ng-class="{'disabled':cityUnsupported || travelTime.status =='started'}">Draw time sense map</button>
                        <div class=paddingT10>
                            {{timeSenseMsg}}
                        </div>
                        <div class="paddingT10 font-weight" data-ng-if="travelTime.status ==='started'">
                            Legend
                        </div>
                        <div>
                            <div data-ng-repeat="progressItem in heatMapProgress">
                                <div class="pull-right range">{{progressItem.range}} Mins</div>
                                <div class="pull-left color progresss">
                                    <div class=progress-barr style=width:{{progressItem.progress}}%;background-color:{{progressItem.color}}></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </li>
    </ul>
    <div class=map-action-data>
        <div data-ng-if="data.item && data.item.tab == 'overview'" class=lineheight30>
             <div class="pull-left paddingL20">Project Status :</div>
             <div class="pull-left paddingL20">{{data.projectStatus}}</div>
        </div>
        <div data-ng-if="data.item && data.item.tab == 'price'" class=lineheight30>
             <div class="pull-left paddingL5">

                  <span data-ng-if=data.isResale>
                    Available from Builder as well as in Resale
                  </span>
                  <span data-ng-if=!data.isResale>
                    Available from Builder only
                  </span>
             </div>
        </div>
        <div data-ng-if="data.item.type == 'neighbourhood' && !data.item.tab" class=lineheight30>
            <div class="pull-left paddingL5">
                Commute and Neighbourhood Elements 
            </div>
        </div>
        <div data-ng-if="data.item && data.item.tab == 'customDirections'" class=lineheight30>
             <div class="pull-left paddingL5"><i class="pt pt-icon-Car"></i></div>
             <div class="pull-left pro-name paddingL20">{{data.item.name}}</div>
             <div class=pull-right>
                 <div class="destination-time pull-left font-weight">{{data.item.duration | secToHM }}</div>
                 <div class="destination-distance pull-left paddingL20">{{data.item.distance}}</div>
             </div>
        </div>
        <div data-ng-if="data.item && data.item.tab=='neighbourhood'" class=lineheight30>
            <div class="pull-left paddingL5"><i class="pt pt-icon-{{data.item.icon}}"></i></div>
            <div class="pull-left pro-name">{{data.item.name+'('+data.item.amenityCount+')'}}</div>
        </div>
        <div data-ng-if="data.item && data.item.tab=='timeSense'">
            <div class="pull-left paddingL5" data-ng-bind-html=timeSenseCardMsg></div>
        </div>
    </div>
     
    <div class=card-footer>
        <div class=pull-left>
            <div class=scores-wrap>
                <div class=pull-left>
                    <span data-ng-if="data.avgPriceRisePercentage < 0" class="rise-fall grey" tooltip="in past in past {{ data.avgPriceRiseMonths }} months" tooltip-placement=right>
                        {{ -data.avgPriceRisePercentage}} % <i class="pt pt-icon-arrow-down"></i>
                    </span>
                    <span data-ng-if="data.avgPriceRisePercentage > 0" class="rise-fall green" tooltip="in past {{ data.avgPriceRiseMonths }} months" tooltip-placement=right>
                        {{ data.avgPriceRisePercentage}} % <i class="pt pt-icon-arrow-up"></i>
                    </span>
                </div>
                <div class=pull-left>
                    <div data-ng-if="data && data.projectId" pt-scorecard-overlay="" project=data scoretype=safety></div>
                </div>
                <div class=pull-left>
                    <div data-ng-if="data && data.projectId" pt-scorecard-overlay="" project=data scoretype=life></div>
                </div>
                <div class=clearfix></div>
            </div>

            <div class=deal-bar data-ng-if="data.offers && data.offers.length">
                <i class="pt pt-icon-bell-o"></i> <strong>DEAL</strong> 
                <div class=deal-info>
                    <p data-ng-repeat="offer in data.offers" data-ng-if="offer.offerDesc && offer.offerDesc !== 'none'">{{ offer.offerDesc }}</p>
                </div>
            </div>
        </div>
        <div class=pull-right>
            <span class="wrap fav projFav_{{data.projectId}}" pt-favorite="" project-id=data.projectId caller=callerLocation></span>
            <a class="btn btn-small btn-action" data-ng-click="openLeadForm(undefined, undefined, 'hidden-enquiry-top')">Enquire Now</a>
        </div>
        <div class=clearfix></div>
    </div>

</div>