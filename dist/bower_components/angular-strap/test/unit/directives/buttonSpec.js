describe("button",function(){function t(t){t=t?a[t]:a["default"],angular.extend(e,t.scope);var l=$(t.element).appendTo(o);return l=n(l)(e),e.$digest(),("radio"===t||"radio-single-model"===t)&&i.flush(),l}var e,o,n,i,l;beforeEach(module("$strap.directives")),beforeEach(function(){this.addMatchers({toEquals:function(t){return angular.equals(this.actual,t)}})}),beforeEach(inject(function(t,a,d,c,s){e=a,n=d,i=c,l=s,o=$('<div id="sandbox"></div>').appendTo($("body")),$(document).off("click.button.data-api","[data-toggle^=button]").on("click.button.data-api","[data-toggle^=button]",function(t){var e=$(t.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})})),afterEach(function(){o.remove(),e.$destroy()});var a={"default":{scope:{buttonValue:void 0},element:'<div class="btn" ng-model="buttonValue" data-toggle="button" bs-button>'},promise:{scope:{},element:'<div class="btn" ng-model="buttonValue" data-toggle="button" bs-button>'},checkbox:{scope:{checkbox:{left:!1,middle:!0,right:!1}},element:'<div class="btn-group" bs-buttons-checkbox><button type="button" class="btn" ng-model="checkbox.left">Left</button><button type="button" class="btn" ng-model="checkbox.middle">Middle</button><button type="button" class="btn" ng-model="checkbox.right">Right</button></div>'},radio:{scope:{radio:{left:!1,middle:!0,right:!1}},element:'<div class="btn-group" bs-buttons-radio><button type="button" class="btn" ng-model="radio.left">Left</button><button type="button" class="btn" ng-model="radio.middle">Middle</button><button type="button" class="btn" ng-model="radio.right">Right</button></div>'},"radio-single-model":{scope:{radio:"middle"},element:'<div class="btn-group" ng-model="radio" bs-buttons-radio><button type="button" class="btn" value="left">Left</button><button type="button" class="btn" value="middle">Middle</button><button type="button" class="btn" value="right">Right</button></div>'}};it('should add "data-toggle" attr for you',function(){var e=t();expect(e.attr("data-toggle")).toBe("button")}),describe("model change to view",function(){it("should add class",function(){var o=t();e.$apply(function(){e.buttonValue=!0}),expect(o.hasClass("active")).toBe(!0)}),it("should remove class",function(){var o=t();e.$apply(function(){e.buttonValue=!1}),expect(o.hasClass("active")).toBe(!1)}),it("should handle $q model",function(){var o=l.defer();e.buttonValue=o.promise,o.resolve(!0);var n=t("promise");expect(n.hasClass("active")).toBe(!0)})}),describe("view change to model",function(){it("should set model true on click",function(){var o=t();expect(e.buttonValue).toBeUndefined(),o.trigger("click"),expect(e.buttonValue).toBe(!0)}),it("should set model false on double-click",function(){var o=t();expect(e.buttonValue).toBeUndefined(),o.trigger("click"),o.trigger("click"),expect(e.buttonValue).toBe(!1)})}),describe("buttons checkbox",function(){it("should handle view to model changes",function(){var o=t("checkbox");o.find('[ng-model="checkbox.left"]').trigger("click"),expect(e.checkbox).toEquals({left:!0,middle:!0,right:!1}),o.find('[ng-model="checkbox.left"]').trigger("click"),expect(e.checkbox).toEquals({left:!1,middle:!0,right:!1})}),it("should handle model to view changes",function(){var o=t("checkbox");e.$apply(function(){e.checkbox={left:!0,middle:!1,right:!0}}),expect(o.find('[ng-model="checkbox.left"]').hasClass("active")).toBe(!0),expect(o.find('[ng-model="checkbox.middle"]').hasClass("active")).toBe(!1),expect(o.find('[ng-model="checkbox.right"]').hasClass("active")).toBe(!0)})}),describe("buttons radio",function(){it("should handle view to model changes",function(){var o=t("radio");o.find('[ng-model="radio.left"]').trigger("click"),expect(e.radio).toEquals({left:!0,middle:!1,right:!1}),o.find('[ng-model="radio.left"]').trigger("click"),expect(e.radio).toEquals({left:!0,middle:!1,right:!1})}),it("should handle model to view changes",function(){var o=t("radio");e.$apply(function(){e.radio={left:!1,middle:!1,right:!0}}),expect(o.find('[ng-model="radio.left"]').hasClass("active")).toBe(!1),expect(o.find('[ng-model="radio.middle"]').hasClass("active")).toBe(!1),expect(o.find('[ng-model="radio.right"]').hasClass("active")).toBe(!0)})}),describe("buttons radio single model",function(){it("should handle view to model changes",function(){var o=t("radio-single-model");o.find('[value="left"]').trigger("click"),expect(e.radio).toEquals("left"),o.find('[value="left"]').trigger("click"),expect(e.radio).toEquals("left")}),it("should handle model to view changes",function(){var o=t("radio-single-model");e.$apply(function(){e.radio="right"}),expect(o.find('[value="left"]').hasClass("active")).toBe(!1),expect(o.find('[value="middle"]').hasClass("active")).toBe(!1),expect(o.find('[value="right"]').hasClass("active")).toBe(!0)})})});