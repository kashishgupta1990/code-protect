describe("tooltip",function(){function t(t){t=t?l[t]:l["default"],angular.extend(e,t.scope||l["default"].scope);var n=$(t.element).appendTo(o);return n=i(n)(e),e.$digest(),n}var e,o,i,n,a;angular.module("$strap.directives.test",["$strap.directives"]).directive("bsWrappedTooltip",function(){return{replace:!0,template:'<div><a class="btn" bs-tooltip="content"></a></div>',link:function(t,e,o){t.content="some tooltip content"}}}),beforeEach(module("$strap.directives","$strap.directives.test")),beforeEach(inject(function(t,l,p,c){e=t,i=l,n=p,a=c,o=$('<div id="sandbox"></div>').appendTo($("body"))})),afterEach(function(){o.remove(),e.$destroy()});var l={"default":{scope:{content:"Hello World<br>Multiline Content<br>"},element:'<a class="btn" bs-tooltip="content" data-unique="true" data-placement="left"></a>'},click:{element:'<a class="btn" bs-tooltip="content" data-trigger="click" data-placement="left"></a>'},wrapped:{scope:{},element:"<div bs-wrapped-tooltip/></a>"}};it("should initialize the tooltip",function(){var e=t();expect(e.data("tooltip")).toBeDefined(),expect(typeof e.data("tooltip").options.title).toBe("function")}),it("should correctly call $.fn.tooltip",function(){var e=$.fn.tooltip,o=angular.extend(spyOn($.fn,"tooltip"),e).andCallThrough();t();expect(o).toHaveBeenCalled()}),it("should define a correct title",function(){var o=t();o.tooltip("show"),expect(o.data("tooltip").tip().find(".tooltip-inner").html()).toBe(e.content)}),it("should show correctly handle title update/replace",function(){var o=t();e.content+="Update",e.$digest(),o.tooltip("show"),expect(o.data("tooltip").tip().find(".tooltip-inner").html()).toBe(e.content),o.tooltip("hide"),e.content="Replace",e.$digest(),o.tooltip("show"),expect(o.data("tooltip").tip().find(".tooltip-inner").html()).toBe(e.content)}),it("should define the tooltip reference on the tip",function(){var e=t();e.tooltip("show"),expect(e.data("tooltip").tip().data("tooltip")).toBeDefined()}),it("should show/hide the tooltip on hover",function(){var e=t();e.trigger("mouseenter"),expect(e.data("tooltip").tip().hasClass("in")).toBe(!0),e.trigger("mouseleave"),expect(e.data("tooltip").tip().hasClass("in")).toBe(!1)}),it("should support data-unique attribute",function(){var e=t(),o=t("click");o.trigger("click"),expect(o.data("tooltip").tip().hasClass("in")).toBe(!0),e.trigger("mouseenter"),expect(o.data("tooltip").tip().hasClass("in")).toBe(!1)}),it("should update the tooltip text even if it is set inside the link function of a parent directive",function(){var o=t("wrapped").find("a[bs-tooltip]");expect(o.data("tooltip").options.title()).toBe(e.content),o.trigger("mouseenter"),expect(o.next().text()).toBe(e.content)})});