describe("datepicker",function(){function e(e){e=e?i[e]:i["default"],angular.extend(t,e.scope||i["default"].scope),$(e.element).appendTo(a);var o=$(e.element).appendTo(a);return o=d(o)(t),t.$digest(),o}var t,a,d,o;beforeEach(module("$strap.directives")),beforeEach(inject(function(e,i,r,n){t=i.$new(),d=r,o=n,a=$('<div id="sandbox"></div>').appendTo($("body"))})),afterEach(function(){a.remove(),t.$destroy(),$(".datepicker").remove()});var i={"default":{element:'<input type="text" ng-model="foo.date" bs-datepicker>',scope:{foo:{date:new Date("2012-09-01T00:00:00.000Z")}}},string:{element:'<input type="text" ng-model="foo.date" data-date-format="yyyy/mm/dd" data-date-type="string" bs-datepicker>',scope:{foo:{date:"2012/09/01"}}},addon:{element:'<input type="text" ng-model="foo.date" bs-datepicker><span class="add-on" data-toggle="datepicker"><i class="icon-calendar"></i></span>'},language:{element:'<input type="text" ng-model="foo.date" data-language="fr" bs-datepicker>'},variableLanguage:{element:'<input type="text" ng-model="foo.date" data-language="{{language}}" bs-datepicker>',scope:{language:"en",foo:{date:new Date("2012-09-22T00:00:00.000Z")}}},stringISO:{element:'<input type="text" ng-model="foo.date" data-date-format="yyyy/mm/dd" data-date-type="iso" bs-datepicker>',scope:{foo:{date:"2012-11-11T10:00:00.000Z"}}},date:{element:'<input type="text" ng-model="foo.date" data-date-format="yyyy/mm/dd" data-date-type="date" bs-datepicker>',scope:{foo:{date:new Date("2012-11-11T10:00:00.000Z")}}}};describe("desktop",function(){var a=/(iPad|iPho(ne|d))/g.test(navigator.userAgent);a||(it('should add "data-toggle" attr for you',function(){e()}),it("should correctly call $.fn.datepicker",function(){var t=$.fn.datepicker,a=angular.extend(spyOn($.fn,"datepicker"),t).andCallThrough();e();expect(a).toHaveBeenCalled()}),it('should handle "data-language" attr',function(){!function(e){e.fn.datepicker.dates.fr={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],daysMin:["D","L","Ma","Me","J","V","S","D"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jui","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",weekStart:1,format:"dd/mm/yyyy"}}(jQuery);var t=e("language");expect(t.data("datepicker").language).toBe("fr")}),it('should handle "data-language" attribute changes',function(){!function(e){e.fn.datepicker.dates.fr={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],daysMin:["D","L","Ma","Me","J","V","S","D"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jui","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",weekStart:1,format:"dd/mm/yyyy"}}(jQuery);var a=e("variableLanguage");t.foo.date=new Date("2012-09-22T00:00:00.000Z"),expect(a.val()).toBe("09/22/2012"),t.language="fr",t.$digest(),expect(a.data("datepicker").language).toBe("fr"),expect(a.val()).toBe("22/09/2012"),t.language="",t.$digest(),expect(a.val()).toBe("09/22/2012"),expect(t.foo.date).toEqual(new Date("2012-09-22T00:00:00.000Z"))}),it("should show/hide the datepicker",function(){var t=e();t.datepicker("show"),expect(t.data("datepicker").picker.is(":visible")).toBe(!0),t.datepicker("hide"),expect(t.data("datepicker").picker.is(":visible")).toBe(!1)}),it("should show the datepicker on focus",function(){var t=e();t.trigger("focus"),expect(t.data("datepicker").picker.is(":visible")).toBe(!0)}),it('should show the datepicker on [data-toggle="datepicker"] click',function(){var t=e("addon");t.next('[data-toggle="datepicker"]').trigger("click"),expect(t.data("datepicker").picker.is(":visible")).toBe(!0)}),describe("data-binding",function(){it("should support date as a string",function(){var t=e("string");expect(+t.data("datepicker").date).toBe(+new Date("2012-09-01T00:00:00.000Z")),expect(t.prop("value")).toBe("2012/09/01")}),it("should support date as a date",function(){var t=e("date");expect(+t.data("datepicker").date).toBe(+new Date("2012-11-11T10:00:00.000Z")),expect(t.prop("value")).toBe("2012/11/11")}),it("should support date as an ISO string",function(){var t=e("stringISO");expect(+t.data("datepicker").date).toBe(+new Date("2012-11-11T10:00:00.000Z")),expect(t.prop("value")).toBe("2012/11/11")})}),describe("data-binding",function(){it("should correctly apply model defaults to the view",function(){var a=e();expect(a.data("datepicker").date).toBe(t.foo.date),expect(a.val()).toBe("09/01/2012")}),it("should correctly apply model changes to the view",function(){var a=e();t.foo.date=new Date("2000-01-01T00:00:00.000Z"),t.$digest(),expect(a.data("datepicker").date).toBe(t.foo.date),expect(a.val()).toBe("01/01/2000")}),it("should correctly apply view changes to the model",function(){var a=e();a.trigger("focus"),a.data("datepicker").picker.find("td").trigger("click"),expect(""!==a.val()).toBe(!0),expect(angular.equals(t.foo.date,a.data("datepicker").date)).toBe(!0)})}))})});