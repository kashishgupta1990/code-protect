describe("timepicker",function(){function e(e){return e=e?n[e]:n["default"],e=$(e).appendTo(i),a(e)(t)}var t,i,a,o,d;beforeEach(module("$strap.directives")),beforeEach(inject(function(e,n,c,r,p){t=n,a=c,o=r,d=p,i=$('<div id="sandbox"></div>').appendTo($("body")),t.model={}})),afterEach(function(){i.remove(),t.$destroy(),$(".bootstrap-timepicker").remove()});var n={"default":'<input type="text" name="time" ng-model="model.time" data-default-time="false" data-show-meridian="false" bs-timepicker>',addon:'<input type="text" name="time" ng-model="model.time" data-default-time="false" data-show-meridian="false" bs-timepicker><span class="add-on" data-toggle="timepicker"><i class="icon-time"></i></span>',date:'<input type="text" name="time" ng-model="model.time" data-default-time="false" data-show-meridian="false" data-time-type="date" bs-timepicker>',appendNoFocus:'<div class="input-append"><input type="text" name="time" ng-model="model.time" data-default-time="false" data-show-meridian="false" data-time-type="date" bs-timepicker></div>',appendWithFocus:'<div class="input-append"><input type="text" name="time" ng-model="model.time" data-default-time="false" data-show-meridian="false" data-time-type="date" open-on-focus="true" bs-timepicker></div>'};it('should add "data-toggle" attr for you',function(){var t=e();expect(t.attr("data-toggle")).toBe("timepicker")}),it("should correctly call $.fn.timepicker",function(){var t=$.fn.timepicker,i=angular.extend(spyOn($.fn,"timepicker"),t).andCallThrough();e();expect(i).toHaveBeenCalled()}),it("should show the timepicker on click",function(){var t=e();t.trigger("click"),expect(t.data("timepicker").$widget.hasClass("open")).toBe(!0)}),it("should show the timepicker on focus",function(){var t=e();t.trigger("focus"),expect(t.data("timepicker").$widget.hasClass("open")).toBe(!0)}),it('should show the timepicker on [data-toggle="timepicker"] click',function(){var t=e("addon");t.next('[data-toggle="timepicker"]').trigger("click"),expect(t.data("timepicker").$widget.hasClass("open")).toBe(!0)}),it("should correctly update both input value and bound model for string type",function(){var i=e();i.trigger("focus"),i.data("timepicker").$widget.find('a[data-action="incrementHour"]').trigger("click"),o.flush(),expect(i.val()).toBe("01:00"),expect(t.model.time).toBe("01:00")}),it("should correctly update both input value and bound model for date type",function(){var i=e("date");i.trigger("focus"),i.data("timepicker").$widget.find('a[data-action="incrementHour"]').trigger("click"),o.flush(),expect(i.val()).toBe("01:00"),expect(t.model.time).toMatch(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{1,2} \d{4} 01:00:\d{2} GMT[-+]\d{4} \(.*\)/)}),it("should not accept bad input",function(){var t=e();t.trigger("click"),t.val("bad"),t.trigger("blur"),expect(t.val()).toBe("00:00")}),it("should not show widget on focus when inside input-append if openOnFocus is set to false",function(){var t=e("appendNoFocus"),i=$(t.children("input")[0]);i.trigger("focus"),expect(i.data("timepicker").$widget.hasClass("open")).toBe(!1)}),it("should show widget on focus when inside input-append if openOnFocus is set",function(){var t=e("appendWithFocus"),i=$(t.children("input")[0]);i.trigger("focus"),expect(i.data("timepicker").$widget.hasClass("open")).toBe(!0)})});