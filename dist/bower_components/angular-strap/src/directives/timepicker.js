angular.module("$strap.directives").directive("bsTimepicker",function(e,t){var i="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?(?:\\s?(?:am|AM|pm|PM))?)";return{restrict:"A",require:"?ngModel",link:function(a,n,r,s){var u=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t},l=angular.extend({openOnFocus:!1},t.timepicker),o=r.defaultTime||l.defaultTime||!1;l.defaultTime=!1;var v=r.timeType||l.timeType||"string";if(angular.forEach(["template","minuteStep","showSeconds","secondStep","showMeridian","showInputs","disableFocus","modalBackdrop","openOnFocus"],function(e){angular.isDefined(r[e])&&("true"===r[e]||"false"===r[e]?l[e]="true"===r[e]:/^\-?([0-9]+|Infinity)$/.test(r[e])?l[e]=parseInt(r[e],10):l[e]=r[e])}),s){n.on("changeTime.timepicker",function(t){e(function(){if("string"===v)s.$setViewValue(n.val());else if("date"===v){var e=new Date;e.setHours(t.time.hours),e.setMinutes(t.time.minutes),s.$setViewValue(e)}})});var w=new RegExp("^"+i+"$",["i"]);s.$formatters.unshift(function(e){if(e)return"date"===v?(s.$setViewValue(new Date(e)),n.val(new Date(e)),new Date(e)):(s.$setViewValue(e),n.val(e),e);if(o){if("current"===o){if("date"===v)return s.$setViewValue(new Date),n.val(new Date),new Date;var t=new Date;u(t.getHours())+":"+u(t.getMinutes());return s.$setViewValue(t),n.val(t),t}return s.$setViewValue(o),n.val(o),o}return s.$setViewValue(n.val()),n.val()}),s.$render=function(){if(s.$viewValue){if("date"===v){var e;if(w.test(s.$viewValue)){e=new Date;var t=s.$viewValue.split(":"),i=isNaN(parseInt(t[0],10))?"0":parseInt(t[0],10),a=isNaN(parseInt(t[1],10))?"0":parseInt(t[1],10);return e.setHours(i),e.setMinutes(a),n.val(s.$viewValue),s.$setViewValue(e),e}e=new Date(s.$viewValue);var r="Invalid Date"!==e?u(e.getHours())+":"+u(e.getMinutes()):"";return n.val(r),s.$setViewValue(e),e}return n.val(s.$viewValue),s.$setViewValue(s.$viewValue),s.$viewValue}return n.val(""),""},s.$parsers.unshift(function(e){return!e||"string"===v&&w.test(e)?(s.$setValidity("time",!0),e):"date"===v&&"object"==typeof e&&"Invalid Date"!==e.toString()?(s.$setValidity("time",!0),e):void s.$setValidity("time",!1)})}n.attr("data-toggle","timepicker"),n.parent().addClass("bootstrap-timepicker"),n.timepicker(l||{});var c=n.data("timepicker"),d=n.siblings('[data-toggle="timepicker"]');d.length&&d.on("click",$.proxy(c.showWidget,c)),l.openOnFocus&&n.on("focus",$.proxy(c.showWidget,c))}}});