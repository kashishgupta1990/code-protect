angular.module("$strap.directives").directive("bsTypeahead",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,s){var a=t(n.bsTypeahead),u=(a.assign,a(e));e.$watch(n.bsTypeahead,function(t,e){t!==e&&(u=t)}),i.attr("data-provide","typeahead"),i.typeahead({source:function(t){return angular.isFunction(u)?u.apply(null,arguments):u},minLength:n.minLength||1,items:n.items,updater:function(t){return s&&e.$apply(function(){s.$setViewValue(t)}),e.$emit("typeahead-updated",t,n.id),t}});var r=i.data("typeahead");r.lookup=function(t){var e;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(e=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,e?this.process(e):this)},n.matchAll&&(r.matcher=function(t){return!0}),"0"===n.minLength&&setTimeout(function(){i.on("focus",function(){0===i.val().length&&setTimeout(i.typeahead.bind(i,"lookup"),200)})})}}});