angular.module("$strap.directives").directive("bsPopover",function(n,o,t,e,i,r){var a="popover",c=$.fn.emulateTransitionEnd?"bs.":"",s=c?"."+c+a:"";return $("body").on("keyup",function(n){27===n.keyCode&&$(".popover.in").popover("hide")}),{restrict:"A",scope:!0,link:function(u,h,p,d){var f=n(p.bsPopover),g=(f.assign,f(u)),v={};angular.isObject(g)&&(v=g),i.when(v.content||r.get(g)||t.get(g,{cache:!0})).then(function(n){angular.isObject(n)&&(n=n.data),angular.forEach(["placement","trigger"],function(n){p[n]&&(v[n]=p[n])}),p.unique&&h.on("show"+s,function(n){$(".popover.in").not(h).popover("hide")}),p.hide&&u.$watch(p.hide,function(n,o){n?t.hide():n!==o&&e(function(){t.show()})}),p.show&&u.$watch(p.show,function(n,o){n?e(function(){t.show()}):n!==o&&t.hide()}),h.popover(angular.extend({},v,{content:n,html:!0}));var t=h.data(c+a);t.hasContent=function(){return this.getTitle()||n},t.getPosition=function(){var n=$.fn.popover.Constructor.prototype.getPosition.apply(this,arguments);return o(this.$tip)(u),u.$digest(),this.$tip.data(c+a,this),n},u.$popover=function(n){t(n)},angular.forEach(["show","hide"],function(n){u[n]=function(){t[n]()}}),u.dismiss=u.hide,angular.forEach(["show","shown","hide","hidden"],function(n){h.on(n+s,function(o){u.$emit("popover-"+n,o)})})})}}});