/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v0.3.10
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */

!function(){"use strict";function e(e){var n=[];return angular.forEach(e.requires,function(e){-1===l.indexOf(e)&&n.push(e)}),n}function n(e){try{return angular.module(e)}catch(n){if(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)return!1}}function r(e){try{return angular.module(e)}catch(n){throw(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)&&(n.message='The module "'+e+'" that you are trying to load does not exist. '+n.message),n}}function a(e,n,r,a){if(n){var o,i,u,l;for(o=0,i=n.length;i>o;o++)if(u=n[o],angular.isArray(u)){if(null!==e){if(!e.hasOwnProperty(u[0]))throw new Error("unsupported provider "+u[0]);l=e[u[0]]}var s=t(u,r);if("invoke"!==u[1])s&&angular.isDefined(l)&&l[u[1]].apply(l,u[2]);else{var f=function(e){var n=c.indexOf(r+"-"+e);(-1===n||a)&&(-1===n&&c.push(r+"-"+e),angular.isDefined(l)&&l[u[1]].apply(l,u[2]))};if(angular.isFunction(u[2][0]))f(u[2][0]);else if(angular.isArray(u[2][0]))for(var d=0,g=u[2][0].length;g>d;d++)angular.isFunction(u[2][0][d])&&f(u[2][0][d])}}}}function o(e,n,r){if(n){var t,u,s,c=[];for(t=n.length-1;t>=0;t--)if(u=n[t],"string"!=typeof u&&(u=i(u)),u&&-1===f.indexOf(u)){var d=-1===l.indexOf(u);s=angular.module(u),d&&(l.push(u),o(e,s.requires,r),c=c.concat(s._runBlocks)),a(e,s._invokeQueue,u,r.reconfig),a(e,s._configBlocks,u,r.reconfig),g(d?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",u),n.pop(),f.push(u)}var p=e.getInstanceInjector();angular.forEach(c,function(e){p.invoke(e)})}}function t(e,n){var r=e[2][0],a=e[1],o=!1;angular.isUndefined(s[n])&&(s[n]={}),angular.isUndefined(s[n][a])&&(s[n][a]=[]);var t=function(e){o=!0,s[n][a].push(e),g("ocLazyLoad.componentLoaded",[n,a,e])};if(angular.isString(r)&&-1===s[n][a].indexOf(r))t(r);else{if(!angular.isObject(r))return!1;angular.forEach(r,function(e){angular.isString(e)&&-1===s[n][a].indexOf(e)&&t(e)})}return o}function i(e){if(null===e)return null;var n=null;return"string"==typeof e?n=e:"object"==typeof e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&(n=e.name),n}function u(e){function n(e){return e&&t.push(e)}var r,o,t=[e],i=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;angular.forEach(i,function(r){i[r]=!0,n(document.getElementById(r)),r=r.replace(":","\\:"),e[0].querySelectorAll&&(angular.forEach(e[0].querySelectorAll("."+r),n),angular.forEach(e[0].querySelectorAll("."+r+"\\:"),n),angular.forEach(e[0].querySelectorAll("["+r+"]"),n))}),angular.forEach(t,function(n){if(!r){var a=" "+e.className+" ",t=u.exec(a);t?(r=n,o=(t[2]||"").replace(/\s+/g,",")):angular.forEach(n.attributes,function(e){!r&&i[e.name]&&(r=n,o=e.value)})}}),r&&!function s(e){if(-1===l.indexOf(e)){l.push(e);var n=angular.module(e);a(null,n._invokeQueue,e),a(null,n._configBlocks,e),angular.forEach(n.requires,s)}}(o)}var l=["ng"],s={},c=[],f=[],d=angular.module("oc.lazyLoad",["ng"]),g=angular.noop;d.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(a,t,s,c,d,p){var h,m,v,y={},L={$controllerProvider:a,$compileProvider:s,$filterProvider:c,$provide:t,$injector:d,$animateProvider:p},E=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],O=!1,$=!1;u(angular.element(window.document)),this.$get=["$timeout","$log","$q","$templateCache","$http","$rootElement","$rootScope","$cacheFactory","$interval",function(a,t,u,s,c,d,p,j,w){var x,b=j("ocLazyLoad"),P=!1,z=!1;O||(t={},t.error=angular.noop,t.warn=angular.noop,t.info=angular.noop),L.getInstanceInjector=function(){return x?x:x=d.data("$injector")},g=function(e,n){$&&p.$broadcast(e,n),O&&t.info(e,n)};var D=function(e,n,r){var a,o,t=u.defer(),i=function(e){var n=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+n:e+"&_dc="+n:e+"?_dc="+n};switch(angular.isUndefined(b.get(n))&&b.put(n,t.promise),e){case"css":a=document.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=r.cache===!1?i(n):n;break;case"js":a=document.createElement("script"),a.src=r.cache===!1?i(n):n;break;default:t.reject(new Error('Requested type "'+e+'" is not known. Could not inject "'+n+'"'))}if(a.onload=a.onreadystatechange=function(e){a.readyState&&!/^c|loade/.test(a.readyState)||o||(a.onload=a.onreadystatechange=null,o=1,g("ocLazyLoad.fileLoaded",n),t.resolve())},a.onerror=function(e){t.reject(new Error("Unable to load "+n))},a.async=1,E.insertBefore(a,E.lastChild),"css"==e){if(!P){var l=navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(navigator.platform)){var s=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=parseFloat([parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3]||0,10)].join("."));z=6>c}else if(l.indexOf("android")>-1){var f=parseFloat(l.slice(l.indexOf("android")+8));z=4.4>f}else if(l.indexOf("safari")>-1&&-1==l.indexOf("chrome")){var d=parseFloat(l.match(/version\/([\.\d]+)/i)[1]);z=6>d}}if(z)var p=1e3,h=w(function(){try{a.sheet.cssRules,w.cancel(h),a.onload()}catch(e){--p<=0&&a.onerror()}},20)}return t.promise};angular.isUndefined(h)&&(h=function(e,n,r){var a=[];angular.forEach(e,function(e){a.push(D("js",e,r))}),u.all(a).then(function(){n()},function(e){n(e)})},h.ocLazyLoadLoader=!0),angular.isUndefined(m)&&(m=function(e,n,r){var a=[];angular.forEach(e,function(e){a.push(D("css",e,r))}),u.all(a).then(function(){n()},function(e){n(e)})},m.ocLazyLoadLoader=!0),angular.isUndefined(v)&&(v=function(e,n,r){angular.isString(e)&&(e=[e]);var a=[];return angular.forEach(e,function(e){var n=u.defer();a.push(n.promise),c.get(e,r).success(function(r){angular.forEach(angular.element(r),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&s.put(e.id,e.innerHTML)}),angular.isUndefined(b.get(e))&&b.put(e,!0),n.resolve()}).error(function(r){var a='Error load template "'+e+'": '+r;t.error(a),n.reject(new Error(a))})}),u.all(a).then(function(){n()},function(e){n(e)})},v.ocLazyLoadLoader=!0);var M=function(e,n){var r=[],a=[],o=[],i=[],l=null;if(angular.extend(n||{},e),angular.forEach(n.files,function(e){l=b.get(e),angular.isUndefined(l)||n.cache===!1?/\.css[^\.]*$/.test(e)&&-1===r.indexOf(e)?r.push(e):/\.(htm|html)[^\.]*$/.test(e)&&-1===a.indexOf(e)?a.push(e):-1===o.indexOf(e)&&o.push(e):l&&i.push(l)}),r.length>0){var s=u.defer();m(r,function(e){angular.isDefined(e)&&m.hasOwnProperty("ocLazyLoadLoader")?(t.error(e),s.reject(e)):s.resolve()},n),i.push(s.promise)}if(a.length>0){var c=u.defer();v(a,function(e){angular.isDefined(e)&&v.hasOwnProperty("ocLazyLoadLoader")?(t.error(e),c.reject(e)):c.resolve()},n),i.push(c.promise)}if(o.length>0){var f=u.defer();h(o,function(e){angular.isDefined(e)&&h.hasOwnProperty("ocLazyLoadLoader")?(t.error(e),f.reject(e)):f.resolve()},n),i.push(f.promise)}return u.all(i)};return{getModuleConfig:function(e){return y[e]?y[e]:null},setModuleConfig:function(e){return y[e.name]=e,e},getModules:function(){return l},loadTemplateFile:function(e,n){return M({files:e},n)},load:function(s,c){var d,g,p=this,h=null,m=[],v=[],y=u.defer();if(angular.isUndefined(c)&&(c={}),angular.isArray(s))return angular.forEach(s,function(e){e&&v.push(p.load(e,c))}),u.all(v).then(function(){y.resolve(s)},function(e){y.reject(e)}),y.promise;if(d=i(s),"string"==typeof s?(h=p.getModuleConfig(s),h||(h={files:[s]},d=null)):"object"==typeof s&&(h=p.setModuleConfig(s)),null===h?(g='Module "'+d+'" is not configured, cannot load.',t.error(g),y.reject(new Error(g))):angular.isDefined(h.template)&&(angular.isUndefined(h.files)&&(h.files=[]),angular.isString(h.template)?h.files.push(h.template):angular.isArray(h.template)&&h.files.concat(h.template)),m.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},angular.isDefined(d)&&n(d)&&-1!==l.indexOf(d)&&(m.push(d),angular.isUndefined(h.files)))return y.resolve(),y.promise;var E=function O(a){var o,l,s,f,d=[];if(o=i(a),null===o)return u.when();try{l=r(o)}catch(g){var h=u.defer();return t.error(g.message),h.reject(g),h.promise}return s=e(l),angular.forEach(s,function(e){if("string"==typeof e){var r=p.getModuleConfig(e);if(null===r)return void m.push(e);e=r}return n(e.name)?void("string"!=typeof a&&(f=e.files.filter(function(n){return p.getModuleConfig(e.name).files.indexOf(n)<0}),0!==f.length&&t.warn('Module "',o,'" attempted to redefine configuration for dependency. "',e.name,'"\n Additional Files Loaded:',f),d.push(M(e.files,c).then(function(){return O(e)})))):("object"==typeof e&&(e.hasOwnProperty("name")&&e.name&&(p.setModuleConfig(e),m.push(e.name)),e.hasOwnProperty("css")&&0!==e.css.length&&angular.forEach(e.css,function(e){D("css",e,c)})),void(e.hasOwnProperty("files")&&0!==e.files.length&&e.files&&d.push(M(e,c).then(function(){return O(e)}))))}),u.all(d)};return M(h,c).then(function(){null===d?y.resolve(s):(m.push(d),E(d).then(function(){try{f=[],o(L,m,c)}catch(e){return t.error(e.message),void y.reject(e)}a(function(){y.resolve(s)})},function(e){a(function(){y.reject(e)})}))},function(e){y.reject(e)}),y.promise}}}],this.config=function(e){if((angular.isDefined(e.jsLoader)||angular.isDefined(e.asyncLoader))&&(h=e.jsLoader||e.asyncLoader,!angular.isFunction(h)))throw"The js loader needs to be a function";if(angular.isDefined(e.cssLoader)&&(m=e.cssLoader,!angular.isFunction(m)))throw"The css loader needs to be a function";if(angular.isDefined(e.templatesLoader)&&(v=e.templatesLoader,!angular.isFunction(v)))throw"The template loader needs to be a function";if(angular.isDefined(e.loadedModules)){var n=function(e){l.indexOf(e)<0&&(l.push(e),angular.forEach(angular.module(e).requires,n))};angular.forEach(e.loadedModules,n)}angular.isDefined(e.modules)&&(angular.isArray(e.modules)?angular.forEach(e.modules,function(e){y[e.name]=e}):y[e.modules.name]=e.modules),angular.isDefined(e.debug)&&(O=e.debug),angular.isDefined(e.events)&&($=e.events)}}]),d.directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse",function(e,n,r,a){return{restrict:"A",terminal:!0,priority:1e3,compile:function(o,t){var i=o[0].innerHTML;return o.html(""),function(o,t,u){var l=a(u.ocLazyLoad);o.$watch(function(){return l(o)||u.ocLazyLoad},function(a){angular.isDefined(a)&&e.load(a).then(function(e){r.enter(n(i)(o),null,t)})},!0)}}}}]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,n){var r;if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),o=a.length>>>0;if(0===o)return-1;var t=+n||0;if(Math.abs(t)===1/0&&(t=0),t>=o)return-1;for(r=Math.max(t>=0?t:o-Math.abs(t),0);o>r;){if(r in a&&a[r]===e)return r;r++}return-1})}();