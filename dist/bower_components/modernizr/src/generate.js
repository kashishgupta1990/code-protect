define(["lodash"],function(e){return function(n){n||(n={}),n.options=n.options||[],n["feature-detects"]=n["feature-detects"]||[];var t=e.includes(n.options,"setClasses"),s='require(["ModernizrProto", "Modernizr", "testRunner"';return t&&(s+=', "setClasses", "classes"'),e.includes(n.options,"html5printshiv")&&(n.options=e.without(n.options,"html5shiv")),e.forEach(e.without(n.options,"setClasses"),function(e){s+=', "'+e+'"'}),e.forEach(n["feature-detects"],function(e){e=0===e.indexOf("test/")?e:"test/"+e,s+=', "'+e+'"'}),s+="], function( ModernizrProto, Modernizr, testRunner",t&&(s+=", setClasses, classes"),s+=") {\n  // Run each test\n  testRunner();\n\n",t&&(s+='  // Remove the "no-js" class if it exists\n  setClasses(classes);\n\n'),s+="  delete ModernizrProto.addTest;\n",s+="  delete ModernizrProto.addAsyncTest;\n\n",s+="  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n",s+="  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n});"}});