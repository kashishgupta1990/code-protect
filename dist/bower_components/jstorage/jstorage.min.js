!function(){function e(){var e="{}";if("userDataBehavior"==j){f.load("jStorage");try{e=f.getAttribute("jStorage")}catch(t){}try{m=f.getAttribute("jStorage_update")}catch(r){}d.jStorage=e}o(),s(),u()}function t(){var t;clearTimeout(h),h=setTimeout(function(){if("localStorage"==j||"globalStorage"==j)t=d.jStorage_update;else if("userDataBehavior"==j){f.load("jStorage");try{t=f.getAttribute("jStorage_update")}catch(a){}}if(t&&t!=m){m=t;var o,n=_.parse(_.stringify(l.__jstorage_meta.CRC32));e(),o=_.parse(_.stringify(l.__jstorage_meta.CRC32));var i,s=[],u=[];for(i in n)n.hasOwnProperty(i)&&(o[i]?n[i]!=o[i]&&"2."==String(n[i]).substr(0,2)&&s.push(i):u.push(i));for(i in o)o.hasOwnProperty(i)&&(n[i]||s.push(i));r(s,"updated"),r(u,"deleted")}},25)}function r(e,t){e=[].concat(e||[]);var r,a,o,n;if("flushed"==t){e=[];for(r in w)w.hasOwnProperty(r)&&e.push(r);t="deleted"}for(r=0,o=e.length;o>r;r++){if(w[e[r]])for(a=0,n=w[e[r]].length;n>a;a++)w[e[r]][a](e[r],t);if(w["*"])for(a=0,n=w["*"].length;n>a;a++)w["*"][a](e[r],t)}}function a(){var e=(+new Date).toString();if("localStorage"==j||"globalStorage"==j)try{d.jStorage_update=e}catch(r){j=!1}else"userDataBehavior"==j&&(f.setAttribute("jStorage_update",e),f.save("jStorage"));t()}function o(){if(d.jStorage)try{l=_.parse(String(d.jStorage))}catch(e){d.jStorage="{}"}else d.jStorage="{}";S=d.jStorage?String(d.jStorage).length:0,l.__jstorage_meta||(l.__jstorage_meta={}),l.__jstorage_meta.CRC32||(l.__jstorage_meta.CRC32={})}function n(){if(l.__jstorage_meta.PubSub){for(var e=+new Date-2e3,t=0,r=l.__jstorage_meta.PubSub.length;r>t;t++)if(l.__jstorage_meta.PubSub[t][0]<=e){l.__jstorage_meta.PubSub.splice(t,l.__jstorage_meta.PubSub.length-t);break}l.__jstorage_meta.PubSub.length||delete l.__jstorage_meta.PubSub}try{d.jStorage=_.stringify(l),f&&(f.setAttribute("jStorage",d.jStorage),f.save("jStorage")),S=d.jStorage?String(d.jStorage).length:0}catch(a){}}function i(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function s(){var e,t,o,i,u=1/0,g=!1,_=[];if(clearTimeout(c),l.__jstorage_meta&&"object"==typeof l.__jstorage_meta.TTL){e=+new Date,o=l.__jstorage_meta.TTL,i=l.__jstorage_meta.CRC32;for(t in o)o.hasOwnProperty(t)&&(o[t]<=e?(delete o[t],delete i[t],delete l[t],g=!0,_.push(t)):o[t]<u&&(u=o[t]));1/0!=u&&(c=setTimeout(s,Math.min(u-e,2147483647))),g&&(n(),a(),r(_,"deleted"))}}function u(){var e;if(l.__jstorage_meta.PubSub){var t,r=b,a=[];for(e=l.__jstorage_meta.PubSub.length-1;e>=0;e--)t=l.__jstorage_meta.PubSub[e],t[0]>b&&(r=t[0],a.unshift(t));for(e=a.length-1;e>=0;e--){t=a[e][1];var o=a[e][2];if(p[t])for(var n=0,i=p[t].length;i>n;n++)try{p[t][n](t,_.parse(_.stringify(o)))}catch(s){}}b=r}}var g=window.jQuery||window.$||(window.$={}),_={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||g.parseJSON||g.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||g.toJSON};if("function"!=typeof _.parse||"function"!=typeof _.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var c,l={__jstorage_meta:{CRC32:{}}},d={jStorage:"{}"},f=null,S=0,j=!1,w={},h=!1,m=0,p={},b=+new Date,y={isXML:function(e){return(e=(e?e.ownerDocument||e:0).documentElement)?"HTML"!==e.nodeName:!1},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(r){}}return!1},decode:function(e){var t="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return t?(e=t.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),this.isXML(e)?e:!1):!1}};g.jStorage={version:"0.4.12",set:function(e,t,a){if(i(e),a=a||{},"undefined"==typeof t)return this.deleteKey(e),t;if(y.isXML(t))t={_is_xml:!0,xml:y.encode(t)};else{if("function"==typeof t)return;t&&"object"==typeof t&&(t=_.parse(_.stringify(t)))}l[e]=t;for(var o,n=l.__jstorage_meta.CRC32,s=_.stringify(t),u=s.length,g=2538058380^u,c=0;u>=4;)o=255&s.charCodeAt(c)|(255&s.charCodeAt(++c))<<8|(255&s.charCodeAt(++c))<<16|(255&s.charCodeAt(++c))<<24,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),o^=o>>>24,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^o,u-=4,++c;switch(u){case 3:g^=(255&s.charCodeAt(c+2))<<16;case 2:g^=(255&s.charCodeAt(c+1))<<8;case 1:g^=255&s.charCodeAt(c),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)}return g^=g>>>13,g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16),n[e]="2."+((g^g>>>15)>>>0),this.setTTL(e,a.TTL||0),r(e,"updated"),t},get:function(e,t){return i(e),e in l?l[e]&&"object"==typeof l[e]&&l[e]._is_xml?y.decode(l[e].xml):l[e]:"undefined"==typeof t?null:t},deleteKey:function(e){return i(e),e in l?(delete l[e],"object"==typeof l.__jstorage_meta.TTL&&e in l.__jstorage_meta.TTL&&delete l.__jstorage_meta.TTL[e],delete l.__jstorage_meta.CRC32[e],n(),a(),r(e,"deleted"),!0):!1},setTTL:function(e,t){var r=+new Date;return i(e),t=Number(t)||0,e in l?(l.__jstorage_meta.TTL||(l.__jstorage_meta.TTL={}),t>0?l.__jstorage_meta.TTL[e]=r+t:delete l.__jstorage_meta.TTL[e],n(),s(),a(),!0):!1},getTTL:function(e){var t=+new Date;return i(e),e in l&&l.__jstorage_meta.TTL&&l.__jstorage_meta.TTL[e]?(e=l.__jstorage_meta.TTL[e]-t)||0:0},flush:function(){return l={__jstorage_meta:{CRC32:{}}},n(),a(),r(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=l,new e},index:function(){var e,t=[];for(e in l)l.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return S},currentBackend:function(){return j},storageAvailable:function(){return!!j},listenKeyChange:function(e,t){i(e),w[e]||(w[e]=[]),w[e].push(t)},stopListening:function(e,t){if(i(e),w[e])if(t)for(var r=w[e].length-1;r>=0;r--)w[e][r]==t&&w[e].splice(r,1);else delete w[e]},subscribe:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");p[e]||(p[e]=[]),p[e].push(t)},publish:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");l.__jstorage_meta||(l.__jstorage_meta={}),l.__jstorage_meta.PubSub||(l.__jstorage_meta.PubSub=[]),l.__jstorage_meta.PubSub.unshift([+new Date,e,t]),n(),a()},reInit:function(){e()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(r){}if(e)try{window.localStorage&&(d=window.localStorage,j="localStorage",m=d.jStorage_update)}catch(a){}else if("globalStorage"in window)try{window.globalStorage&&(d="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],j="globalStorage",m=d.jStorage_update)}catch(n){}else{if(f=document.createElement("link"),!f.addBehavior)return void(f=null);f.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(f);try{f.load("jStorage")}catch(i){f.setAttribute("jStorage","{}"),f.save("jStorage"),f.load("jStorage")}e="{}";try{e=f.getAttribute("jStorage")}catch(g){}try{m=f.getAttribute("jStorage_update")}catch(_){}d.jStorage=e,j="userDataBehavior"}o(),s(),"localStorage"==j||"globalStorage"==j?"addEventListener"in window?window.addEventListener("storage",t,!1):document.attachEvent("onstorage",t):"userDataBehavior"==j&&setInterval(t,1e3),u(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&t()},!1)}()}();