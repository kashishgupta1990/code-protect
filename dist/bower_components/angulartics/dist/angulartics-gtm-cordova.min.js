/**
 * (c) 2015 Jared Dickson https://luisfarzati.github.io/angulartics
 * License: MIT
 */

!function(n){"use strict";n.module("angulartics.google.tagmanager.cordova",["angulartics"]).provider("googleTagManagerCordova",function(){var e=["$q","$log","ready","debug","trackingId","period",function(n,e,i,a,r,o){function t(){a&&e.info(arguments)}function g(n){a&&e.error(n)}var d=n.defer(),u=!1;document.addEventListener("deviceReady",function(){u=!0,d.resolve()},!1),document.addEventListener("pause",function(){var n=window.plugins&&window.plugins.TagManager;n&&n.dispatch(t,g)},!1),document.addEventListener("resign",function(){var n=window.plugins&&window.plugins.TagManager;n&&n.dispatch(t,g)},!1),setTimeout(function(){u||d.resolve()},3e3),this.init=function(){return d.promise.then(function(){var n=window.plugins&&window.plugins.TagManager;n?n.init(function(){i(n,t,g)},g,r,o||30):a&&e.error("Google Tag Manager for Cordova is not available")})}}];return{$get:["$injector",function(i){return i.instantiate(e,{ready:this._ready||n.noop,debug:this.debug,trackingId:this.trackingId,period:this.period})}],ready:function(n){this._ready=n}}}).config(["$analyticsProvider","googleTagManagerCordovaProvider",function(n,e){e.ready(function(e,i,a){n.registerPageTrack(function(n){e.trackPage(i,a,n)}),n.registerEventTrack(function(n,r){e.trackEvent(i,a,r.category,n,r.label,r.value)})})}]).run(["googleTagManagerCordova",function(n){n.init()}])}(angular);