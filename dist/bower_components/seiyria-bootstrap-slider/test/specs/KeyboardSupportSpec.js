describe("Keyboard Support Tests",function(){var e,t,i,o,n=0,r=10,s=1,d=5;describe("Clicking on slider handle automatically gives it focus",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider"}),t=$("#testSlider").find(".slider-track > .slider-handle:first")}),it("clicking on handle1 gives focus to handle1",function(){var e=!1;t.focus(function(){e=!0,expect(e).toBeTruthy()}),t.mousedown()})}),describe("When slider handle has TAB focus",function(){it("should display it's tooltip if 'tooltip' option is set to 'show'",function(){e=$("#testSlider1").slider({id:"testSlider",tooltip:"show"}),t=$("#testSlider").find(".slider-track > .slider-handle:first");var i=$("#testSlider").find("div.tooltip").hasClass("in");expect(i).toBeFalsy(),t.focus(),i=$("#testSlider").find("div.tooltip").hasClass("in"),expect(i).toBeTruthy()}),it("should not display it's tooltip if 'tooltip' option is set to 'hide'",function(){e=$("#testSlider1").slider({id:"testSlider",tooltip:"hide"}),t=$("#testSlider").find(".slider-track > .slider-handle:first");var i=$("#testSlider").children("div.tooltip").hasClass("hide");expect(i).toBeTruthy(),t.focus(),i=$("#testSlider").children("div.tooltip").hasClass("hide"),expect(i).toBeTruthy()}),it("should not affect the tooltip display if 'tooltip' option is set to 'always'",function(){e=$("#testSlider1").slider({id:"testSlider",tooltip:"always"}),t=$("#testSlider").find(".slider-track > .slider-handle:first");var i=$("#testSlider").children("div.tooltip"),o=i.hasClass("in");expect(o).toBeTruthy(),t.focus(),o=i.hasClass("in"),expect(o).toBeTruthy()})}),describe("For horizontal sliders where its handle has focus",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider",orientation:"horizontal",min:n,max:r,step:s,value:d}),t=$("#testSlider .min-slider-handle"),t.focus(),o=document.createEvent("Events"),o.initEvent("keydown",!0,!0)}),it("moves to the left by the 'step' value when the LEFT arrow key is pressed",function(){t.on("keydown",function(){var e=$("#testSlider1").slider("getValue"),t=d-s;expect(e).toBe(t)}),o.keyCode=o.which=37,t[0].dispatchEvent(o)}),it("moves to the right by the 'step' value when the RIGHT arrow key is pressed",function(){t.on("keydown",function(){var e=$("#testSlider1").slider("getValue"),t=d+s;expect(e).toBe(t)}),o.keyCode=o.which=39,t[0].dispatchEvent(o)}),it("moves to the left by the 'step' value when the DOWN arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t).toBe(i)}),o.keyCode=o.which=40,t[0].dispatchEvent(o)}),it("moves to the right by the 'step' value when the UP arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t).toBe(i)}),o.keyCode=o.which=38,t[0].dispatchEvent(o)})}),describe("For vertical sliders where its handle has focus",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider",orientation:"vertical",min:n,max:r,step:s,value:d}),t=$("#testSlider").find(".slider-track > .slider-handle:first"),t.focus()}),it("moves down by the 'step' value when the LEFT arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t).toBe(i)}),o.keyCode=o.which=37,t[0].dispatchEvent(o)}),it("moves up by the 'step' value when the RIGHT arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t).toBe(i)}),o.keyCode=o.which=39,t[0].dispatchEvent(o)}),it("moves down by the 'step' value when the DOWN arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t).toBe(i)}),o.keyCode=o.which=40,t[0].dispatchEvent(o)}),it("moves up by the 'step' value when the UP arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t).toBe(i)}),o.keyCode=o.which=38,t[0].dispatchEvent(o)})}),describe("For a reversed slider (regardless of 'orientation')",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider",reversed:!0,min:n,max:r,step:s,value:d}),t=$("#testSlider").find(".slider-track > .slider-handle:first"),t.focus()}),it("moves to the left by the 'step' value when the LEFT arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t).toBe(i)}),o.keyCode=o.which=37,t[0].dispatchEvent(o)}),it("moves to the right by the 'step' value when the RIGHT arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t).toBe(i)}),o.keyCode=o.which=39,t[0].dispatchEvent(o)}),it("moves to the left by the 'step' value when the DOWN arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t).toBe(i)}),o.keyCode=o.which=40,t[0].dispatchEvent(o)}),it("moves to the right by the 'step' value when the UP arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t).toBe(i)}),o.keyCode=o.which=38,t[0].dispatchEvent(o)})}),describe("For a range slider (regardless of 'orientation')",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider",min:n,max:r,step:s,value:[d,d]})}),describe("when handle1 tries to overtake handle2 from the left",function(){beforeEach(function(){t=$("#testSlider").find(".slider-track > .slider-handle:first"),t.focus()}),it("handle2 moves to the right by the step value",function(){t.on("keydown",function(){var t=e.slider("getValue"),i=d+s;expect(t[1]).toBe(i)}),o.keyCode=o.which=39,t[0].dispatchEvent(o)}),it("handle1's value remains unchanged",function(){var i=e.slider("getValue");t.on("keydown",function(){expect(i[0]).toBe(d)}),o.keyCode=o.which=39,t[0].dispatchEvent(o)})}),describe("when handle2 tries to overtake handle1 from the right",function(){beforeEach(function(){i=$("#testSlider").find(".slider-track > .slider-handle:eq( 1 )"),i.focus()}),it("handle1 moves to the left by the step value",function(){i.on("keydown",function(){var t=e.slider("getValue"),i=d-s;expect(t[0]).toBe(i)}),o.keyCode=o.which=37,t[0].dispatchEvent(o)}),it("handle2's value remains unchanged",function(){var n=e.slider("getValue");i.on("keydown",function(){expect(n[1]).toBe(d)}),o.keyCode=o.which=37,t[0].dispatchEvent(o)})})}),describe("For the natural arrow keys",function(){var i=[{reversed:!1,keyEvent:37,expectedSliderValue:d-s,orientation:"horizontal",key:"left"},{reversed:!0,keyEvent:37,expectedSliderValue:d+s,orientation:"horizontal",key:"left"},{reversed:!1,keyEvent:39,expectedSliderValue:d+s,orientation:"horizontal",key:"right"},{reversed:!0,keyEvent:39,expectedSliderValue:d-s,orientation:"horizontal",key:"right"},{reversed:!1,keyEvent:38,expectedSliderValue:d-s,orientation:"vertical",key:"up"},{reversed:!0,keyEvent:38,expectedSliderValue:d+s,orientation:"vertical",key:"up"},{reversed:!1,keyEvent:40,expectedSliderValue:d+s,orientation:"vertical",key:"down"},{reversed:!0,keyEvent:40,expectedSliderValue:d-s,orientation:"vertical",key:"down"}];i.forEach(function(i){describe("A"+(i.reversed?" reversed":"")+i.orientation+" slider is used for the arrow keys",function(){beforeEach(function(){e=$("#testSlider1").slider({id:"testSlider",min:n,max:r,step:s,value:d,natural_arrow_keys:!0,reversed:i.reversed,orientation:i.orientation}),t=$("#testSlider").find(".slider-track > .slider-handle:first"),t.focus()}),it("moves to the "+i.key+" by the 'step' value when the "+i.key+" arrow key is pressed",function(){t.on("keydown",function(){var t=e.slider("getValue"),o=i.expectedSliderValue;expect(t).toBe(o)}),o.keyCode=o.which=i.keyEvent,t[0].dispatchEvent(o)})})})}),afterEach(function(){e&&e.slider("destroy")})});