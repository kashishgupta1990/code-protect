module("Keyboard Navigation 2011",{setup:function(){this.input=$('<input type="text" value="31-03-2011">').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy"}).focus(),this.dp=this.input.data("datepicker"),this.picker=this.dp.picker},teardown:function(){this.picker.remove()}}),test("Regression: by week (up/down arrows); up from Mar 6, 2011 should go to Feb 27, 2011",function(){var t;this.input.val("06-03-2011").datepicker("update"),equal(this.dp.viewMode,0),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,6)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,6)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:38}),datesEqual(this.dp.viewDate,UTCDate(2011,1,27)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,6)),datesEqual(this.dp.focusDate,UTCDate(2011,1,27)),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"February 2011",'Title is "February 2011"')}),test("Regression: by day (left/right arrows); left from Mar 1, 2011 should go to Feb 28, 2011",function(){var t;this.input.val("01-03-2011").datepicker("update"),equal(this.dp.viewMode,0),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,1)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,1)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:37}),datesEqual(this.dp.viewDate,UTCDate(2011,1,28)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,1)),datesEqual(this.dp.focusDate,UTCDate(2011,1,28)),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"February 2011",'Title is "February 2011"')}),test("Regression: by month (shift + left/right arrows); left from Mar 15, 2011 should go to Feb 15, 2011",function(){var t;this.input.val("15-03-2011").datepicker("update"),equal(this.dp.viewMode,0),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:37,shiftKey:!0}),datesEqual(this.dp.viewDate,UTCDate(2011,1,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),datesEqual(this.dp.focusDate,UTCDate(2011,1,15)),t=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(t.text(),"February 2011",'Title is "February 2011"')}),test("Regression: by month with view mode = 1 (left/right arrow); left from March 15, 2011 should go to February 15, 2011",function(){this.picker.remove(),this.input=$('<input type="text" value="15-03-2011">').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy",minViewMode:1,startView:1}).focus(),this.dp=this.input.data("datepicker"),this.picker=this.dp.picker,this.input.val("15-03-2011").datepicker("update"),equal(this.dp.viewMode,1),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:37}),datesEqual(this.dp.viewDate,UTCDate(2011,1,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),datesEqual(this.dp.focusDate,UTCDate(2011,1,15)),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"February 2011",'Title is "February 2011"')}),test("Regression: by month with view mode = 1 (up/down arrow); down from March 15, 2011 should go to July 15, 2010",function(){this.picker.remove(),this.input=$('<input type="text" value="15-03-2011">').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy",minViewMode:1,startView:1}).focus(),this.dp=this.input.data("datepicker"),this.picker=this.dp.picker,this.input.val("15-03-2011").datepicker("update"),equal(this.dp.viewMode,1),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:40}),datesEqual(this.dp.viewDate,UTCDate(2011,6,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),datesEqual(this.dp.focusDate,UTCDate(2011,6,15)),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"July 2011",'Title is "July 2011"')}),test("Regression: by year with view mode = 2 (left/right arrow); left from March 15, 2011 should go to March 15, 2010",function(){this.picker.remove(),this.input=$('<input type="text" value="15-03-2011">').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy",minViewMode:2,startView:2}).focus(),this.dp=this.input.data("datepicker"),this.picker=this.dp.picker,this.input.val("15-03-2011").datepicker("update"),equal(this.dp.viewMode,2),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:37}),datesEqual(this.dp.viewDate,UTCDate(2010,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),datesEqual(this.dp.focusDate,UTCDate(2010,2,15)),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2010",'Title is "March 2010"')}),test("Regression: by year with view mode = 2 (up/down arrow); dows from March 15, 2011 should go to March 15, 2015",function(){this.picker.remove(),this.input=$('<input type="text" value="15-03-2011">').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy",minViewMode:2,startView:2}).focus(),this.dp=this.input.data("datepicker"),this.picker=this.dp.picker,this.input.val("15-03-2011").datepicker("update"),equal(this.dp.viewMode,2),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2011",'Title is "March 2011"'),datesEqual(this.dp.viewDate,UTCDate(2011,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),equal(this.dp.focusDate,null),this.input.trigger({type:"keydown",keyCode:40}),datesEqual(this.dp.viewDate,UTCDate(2015,2,15)),datesEqual(this.dp.dates.get(-1),UTCDate(2011,2,15)),datesEqual(this.dp.focusDate,UTCDate(2015,2,15)),target=this.picker.find(".datepicker-days thead th.datepicker-switch"),equal(target.text(),"March 2015",'Title is "March 2015"')});