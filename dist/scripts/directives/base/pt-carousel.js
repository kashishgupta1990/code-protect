angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("PTCarouselController",["$scope","$element","$timeout","$transition","$q",function(a,b,c,d,e){function f(){function b(){h?(a.next(),f()):a.pause()}g&&c.cancel(g);var d=+a.interval;!isNaN(d)&&d>=0&&(g=c(b,d))}var g,h,i=this,j=i.slides=[],k=-1,l=b;i.currentSlide=null,i.select=function(b,e){function g(){i.currentSlide&&angular.isString(e)&&!a.noTransition&&b.$element?(b.$element.addClass(e),b.$element[0].offsetWidth,angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(b,{direction:e,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:e,leaving:!0}),a.$currentTransition=d(b.$element,{}),function(b,c){a.$currentTransition.then(function(){m(b,c)},function(){m(b,c)})}(b,i.currentSlide)):m(b,i.currentSlide),i.currentSlide=b,k=n,f()}function h(){var a=k;if(a>=0&&4>a&&$(l).find(".carousel-indicators").animate({left:"0px"},800),a>=4){var b=-64*(a-4),c="px",d=b+c;$(l).find(".carousel-indicators").animate({left:d},800)}}function m(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var n=j.indexOf(b);void 0===e&&(e=n>k?"next":"prev"),b&&b!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),c(g),h()):(g(),c(h)))},i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.imageSrc=function(a){var b=a.$element.children()[0].attributes.src.nodeValue;return b},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",f),a.play=function(){h||(h=!0,f())},a.pause=function(){a.noPause||(h=!1,g&&c.cancel(g))},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?b>=j.length?i.select(j[b-1]):i.select(j[b]):k>b&&k--}}]).directive("ptCarousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"PTCarouselController",require:"ptCarousel",templateUrl:"views/directives/base/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="},link:function(a,b,c){a.$on("$destroy",function(){b.remove()})}}}]).directive("ptSlide",["$parse",function(a){return{require:"^ptCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"views/directives/base/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b),c.remove()}),b.$watch("active",function(a){a&&e.select(b)})}}}]);