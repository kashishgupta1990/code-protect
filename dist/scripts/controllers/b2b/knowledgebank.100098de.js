define("services/catchmentService",["app","services/getHttpService","services/globalService"],function(a){a.config(["$httpProvider",function(a){"use strict";delete a.defaults.headers.common["X-Requested-With"]}]).factory("CatchmentService",["$http","GlobalService","GetHttpService",function(a,b,c){"use strict";var d={"Content-Type":"application/json"},e=b.getAPIURL("data/v1/entity/user/catchment"),f=function(b,c,f,g,h,i){var j,k,l={},m="POST";if(!angular.isString(c)||!c.trim())return{status:"error",msg:"Please provide a valid name"};if(!f||!f.length)return{status:"error",msg:"Please include a project to create a valid catchment"};if(b)for(m="PUT",l.id=b,l.name=c.trim(),l.catchmentProjects=[],j=0,k=f.length;k>j;j++)l.catchmentProjects.push({projectId:f[j]});else for(l.name=c.trim(),l.catchmentProjects=[],j=0,k=f.length;k>j;j++)l.catchmentProjects.push({projectId:f[j]});l.status=g?g:"Active",h&&_.isObject(h)&&(l.metaAttributes=h),a({method:m,url:e,data:l,headers:d}).then(function(a){i(a)})},g=function(a,c){var d="data/v1/entity/user/catchment?filters=id=="+a;return b.makeGetCall(d,"application/json",!0,!0).then(function(a){200===a.status&&c(a.data.data)})},h=function(a,c,d,e){var f="";f+="?sort=-id",a&&(f+="&rows="+a,f+=c?"&start="+c:"&start=0"),d&&(f+="&filters=status=="+d);var g="data/v1/entity/user/catchment"+f;return b.makeGetCall(g,"application/json",!0,!0).then(function(a){200===a.status&&e(a.data.data)})};return{updateCatchment:f,getCatchment:g,getAllCatchment:h}}])}),define("controllers/b2b/knowledgebank.100098de",["app","services/b2b-constants","services/citiesService","services/catchmentService"],function(a){a.controller("knowledgeBankCtrl",["$rootScope","$scope","B2BConstants","CatchmentService","$location","$timeout",function(a,b,c,d,e,f){b.fetchCatchment=function(c){for(var d=[],g=0,h=c.catchmentProjects.length;h>g;g++)d.push(c.catchmentProjects[g].projectId);a.currentCatchment={name:c.name,id:c.id,state:"new",projIds:d,status:c.status,attr:c.metaAttributes},e.search({}),e.url(c.metaAttributes.url),f(function(){b.$apply()},0)},b.deleteCatchment=function(a){d.deleteCatchment(a,function(a){})},function(){d.getAllCatchment(0,0,"Active",function(a){b.savedCatchment=a})}()}])});