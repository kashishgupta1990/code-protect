define(["app","text!views/directives/maps/pt-map-locality-score-card.html"],function(a,b){a.directive("ptMapLocalityScoreCard",["$rootScope","$timeout","PtMapsConfig",function(a,c,d){return{restrict:"A",scope:{},template:b,link:function(a,b,d){a.$on("showLocalityScoreCard",function(a,b,c,d){g(b,c,d)}),a.$on("moveLocalityScoreCard",function(a,b,c,d){f(b,c,d)}),a.$on("hideLocalityScoreCard",function(a){e()}),a.$on("$destroy",function(){a.range=void 0,a.distance=void 0,b.remove()});var e=function(){a.showScoreCard=!1,c(function(){a.$apply()},0)},f=function(b,c,d){var e,f;void 0!==d?(e=d.x-10,f=d.y+90):(e=c.hb.clientX-10,f=c.hb.clientY+90),$(".polygon-info-bubble").css("top",f-145+"px").css("left",e-75+"px"),a.$apply()},g=function(b,d,e){var f,g;d.pixel?(f=d.pixel.x-10,g=d.pixel.y+55):void 0!==e?(f=e.x-10,g=e.y+90):(f=d.hb.clientX,g=d.hb.clientY+90),b.type.range?a.range=b.type.range:a.range="",b.type.distance?a.distance=b.type.distance:a.distance="",$(".polygon-info-bubble").css("top",g-145+"px").css("left",f-75+"px"),a.showScoreCard=!0,c(function(){a.$apply()},0)}}}}])});