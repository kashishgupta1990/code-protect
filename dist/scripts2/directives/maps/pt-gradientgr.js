define(["app"],function(a){a.directive("ptGradientgr",["$filter",function(a){"use strict";return{restrict:"A",scope:{range:"=",selected:"=",type:"@"},template:'<div class="gradient-bar" data-ng-class="{\'invert\': type === \'score\'}"></div><div class="min-text"></div><div class="max-text"></div>',link:function(b,c){b.$on("$destroy",function(){o=void 0,m=void 0,p=void 0,q.hasClass("ui-slider")&&q.slider("destroy"),q=void 0,r=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,j=void 0,k=void 0,l=void 0,c.remove()});var d,e,f,g,h,i,j,k,l,m,n=$(c),o=n.find(".min-text"),p=n.find(".max-text"),q=n.find(".gradient-bar"),r=a("priceFormat");i=function(){var c;return"rate"===b.type?c=function(a){return r(a,void 0,void 0,void 0,-1)}:"date"===b.type?c=a("dateFormat"):"score"===b.type&&(c=function(a){return a}),c}(),k=function(a){return d=parseInt(b.range[0]),e=parseInt(b.range[1]),f=e-d,100*(a-d)/f},l=function(){b.range&&(b.range.length?(d=i(b.range[0]),e=i(b.range[1]),o.text(d),p.text(e)):(o.text(""),p.text("")))},g=function(a){m||(m=q.find("a.ui-slider-handle"),m.addClass("displaySpoke")),m.show(),m.text(a)},h=function(){m||(m=q.find("a.ui-slider-handle"),m.addClass("displaySpoke")),m.hide()},q.slider({step:1,min:0,max:100,animate:!0,create:function(a,b){l()}}),b.$watch("range",function(a){a&&(l(),h())},!0),j=function(a){a=parseInt(a),a||0===a?q.slider("option","value",a):h()},b.$watch("selected",j),b.$on("gradient-show",function(a,c){var d;"rate"===b.type&&c.minPricePerUnitArea?(d=c._rateColor,g(c.minPricePerUnitArea)):"date"===b.type&&c.possessionDate?(d=c._dateColor,g(i(c.possessionDate))):"score"===b.type&&c.livabilityScore&&(d=c._scoreColor,g(i(c.livabilityScore))),j(d)}),b.$on("gradient-hide",function(a){j(void 0)})}}}])});