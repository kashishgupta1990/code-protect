if(define("services/b2b/dataService",["app"],function(a){a.config(["$httpProvider",function(a){delete a.defaults.headers.common["X-Requested-With"]}]).factory("DataService",["GlobalService","$http","GetHttpService","$q",function(a,b,c,d){"use strict";var e=function(d,e,f,g){return g||(g=!1),b({method:"GET",cache:g,url:a.getAPIURL(d+e)}).success(function(a){var b=!1;c.commonResponseData(a,"",b),f&&a.statusCode&&"2"===a.statusCode.substring(0,1)&&f(a,200)}).error(function(a){!f||!a||a.statusCode&&"5"!==a.statusCode.substring(0,1)||f(void 0,500)})},f=function(a,b){var c="data/v1/price-trend/hitherto?filters=";return e(c,a,b)},g=function(a,b,c){var d="data/v1/trend/hitherto?filters=";return e(d,a,b,c)},h=function(a,b){var c="data/v1/trend-list?filters=";return e(c,a,b)},i=function(a,b){var c="data/v1/trend-list/hitherto?filters=";return e(c,a,b)},j=function(a,b){var c="data/v1/trend/current?filters=";return e(c,a,b)},k=function(a,b){var c="data/v1/entity/project?selector=";return e(c,a,b)};return{trendList:h,trendHitherto:g,trendListHitherto:i,priceTrendHitherto:f,trendCurrent:j,getPropertyUnitTypesByProjectIds:k}}])}),define("text!views/directives/common/pt-enquireForm.html",[],function(){return'<div data-ng-if="stage === \'step1\'" >\n  <div pt-lead city-enabled="cityEnabled" locality-enabled="localityEnabled" is-modal="isModal" initial="initial" redirect-to="redirectTo"></div>\n  <span class="btnfrgallery" data-ng-click="closeform()">No Thanks</span>\n</div>\n<div data-ng-if="stage === \'step2\'">\n  <div pt-leadVerification lead="leadData"></div>\n</div>\n<div data-ng-if="stage === \'step3\'">\n  <div class="enq-crousel-lead-info">\n  		<div class="enq-crousel-mess-info">\n        	<i class="pt pt-icon-check-circle-o"></i>\n            <span class="paddingT5">Thanks for your query, our agent will get back to you shortly</span>\n        </div>\n        <div class="enq-crousel-link-info text-right clear"><a data-ng-click="closeform()">Dismiss</a></div>\n  </div>		\n  <div class="enq-form-info">\n    <div class="contentHeader">\n      <span class="contSubHeadViewInfo">Thank you for your interest</span>\n    </div>\n    <p> One of our executives will get back to you shortly.</p>\n    <p> \n      <span class="font-weight displayBlock paddingB10 paddingT40">Till then you can</span>\n      <a href="/portfolio/index" data-ng-if="loggedIn"> Make your personalised portfolio </a>\n      <a href="" data-ng-click="openSignIn()" data-ng-if="!loggedIn"> Make your personalised portfolio </a> <br />\n      <a href="/guide" target="_self"> Checkout our PropGuide </a> <br />\n      <a href="https://play.google.com/store/apps/details?id=com.proptiger"> Download our Mobile App </a>\n    </p>   \n  </div>\n</div>\n<div data-ng-if="stage === \'step4\'">\n  <div class="enq-form-info">\n    <div class="contentHeader">\n      <span class="contSubHeadViewInfo">You have already enquired for this project</span>\n    </div>\n    <p> One of our executives will get back to you shortly.</p>\n    <p> \n    	<span class="font-weight displayBlock paddingB10 paddingT30">Till then you can</span>\n    	<a href="/portfolio/index" data-ng-if="loggedIn"> Make your personalised portfolio </a>\n      <a href="" data-ng-click="openSignIn()" data-ng-if="!loggedIn"> Make your personalised portfolio </a> <br />\n      <a href="/guide" target="_self"> Checkout our PropGuide </a> <br />\n      <a href="https://play.google.com/store/apps/details?id=com.proptiger"> Download our Mobile App </a>\n    </p>   \n  </div>\n</div>\n\n<div data-ng-if="stage === \'step5\'">\n    <div pt-leadforwardflow lead="leadData" displaythanks="displaythanks"></div>\n</div>\n'}),define("services/signupService",["require","app","services/globalService"],function(a,b){b.factory("SignupService",["$rootScope","$modal","GlobalService",function(b,c,d){var e="",f=function(d){return d||(d=""),b.redirectUrl=d,e=c.open({templateUrl:"views/modal/signInRegister.html",controller:"signUpCtrl",resolve:{deps:["$q","$rootScope",function(b,c){var d=b.defer(),e=["scripts/controllers/common/signUpCtrl.js"];return a(e,function(){c.$apply(function(){d.resolve()})}),d.promise}]}})},g=function(){if(e.close)try{e.close()}catch(a){window.console.log("Error closing model: "+a.message)}};return b.$watch("userDetails",function(a,c){a&&a!==c&&g(),a?(b.$broadcast("$signupRes"),b.loggedIn=!0):b.loggedIn=!1}),{openSignUp:f,closeSignUp:g}}])}),define("text!views/directives/common/pt-lead.html",[],function(){return'<div class="row-full">\n<form name="enqForm" class="lead-form" id="enquiry-form" novalidate>\n    <div class="enq-form-info">\n        <div class="formHeader">\n            <span class="formSubHeadInfo" data-ng-bind-html="formTitle"></span>\n        </div>\n        <!-- <p data-ng-if="formData && formData.interested" data-ng-bind-html="formData.interested"> </p> -->\n        <div class="formFieldArea form-info">\n            <!--div class="formRow" data-ng-class="{error:(isSubmitted && (enqForm.fullname.$error.required || enqForm.fullname.$error.name))}">\n      <input type="text" name="fullname" pt-namevalid pt-required id="fullname" data-ng-model="formData.name" placeholder="{{placeholder.FULL_NAME}}" />\n      <span data-ng-show="enqForm.fullname.$error.required && isSubmitted" class="error-info" > Name is required </span>\n      <span data-ng-show="enqForm.fullname.$error.name && isSubmitted && !enqForm.fullname.$error.required" class="error-info" > Name is invalid </span>\n    </div-->\n            <div class="formRow" data-ng-class="{error:((enqForm.email.$error.required || enqForm.email.$error.email) && isSubmitted)}">\n                <input type="text" name="email" id="email" pt-emailvalid pt-required data-ng-model="formData.email" placeholder="{{placeholder.EMAIL}}" />\n                <span data-ng-show="enqForm.email.$error.required && isSubmitted" class="error-info"> Email is required </span>\n                <span data-ng-show="enqForm.email.$error.email && isSubmitted && !enqForm.email.$error.required" class="error-info"> Email is invalid </span>\n            </div>\n            <!-- <div class="formRow" data-ng-if="cityEnabled" data-ng-class="{error:(enqForm.city.$error.required && isSubmitted)}">\n                <select name="city" data-ng-disabled="(cityList && cityList.length === 0)" data-ng-model="formData.city" pt-required data-ng-options="c.label for c in cityList">\n                    <option value=""> City </option>\n                </select>\n                <span data-ng-show="enqForm.city.$error.required && isSubmitted" class="error-info"> City is required </span>\n            </div> -->\n            <div class="formRow" data-ng-if="localityEnabled" data-ng-class="{error:(enqForm.locality.$error.required && isSubmitted)}">\n                <select name="locality" data-ng-model="formData.locality" data-ng-disabled="(localityList && localityList.length === 0)" pt-required data-ng-options="l.label for l in localityList">\n                    <option value=""> Locality </option>\n                </select>\n                <span data-ng-show="enqForm.locality.$error.required && isSubmitted" class="error-info"> Locality is required </span>\n            </div>\n            <div class="formRow">\n                <div class="leadleftColInfo formAutoRow" data-ng-disabled="!countryList" data-ng-class="{error:((enqForm.country.$error.required || enqForm.country.$error.country) && isSubmitted)}">\n                    <select name="country" data-ng-model="formData.country" data-ng-disabled="(countryList && countryList.length === 0)" pt-countryvalid pt-required data-ng-change="updateCountryCode(formData.country)" data-ng-options="c.name for c in countryList">\n                        <option value=""> Country </option>\n                    </select>\n                    <span data-ng-show="(enqForm.country.$error.required || enqForm.country.$error.country) && isSubmitted" class="error-info"> Country is required </span>\n                </div>\n                <div class="leadRightColInfo formAutoRow" data-ng-class="{error:((enqForm.mobile.$error.required || enqForm.mobile.$error.mobile) && isSubmitted)}">\n                    <span class="contCodeInfo" data-ng-if="formData.country.code">{{formData.country.code}}</span>\n                    <input type="text" name="mobile" id="mobile" data-ng-model="formData.mobile" data-country="{{ formData.country | getName }}" placeholder="{{placeholder.MOBILE}}" pt-mobilevalid pt-required class="input-mobile" />\n                    <span data-ng-show="enqForm.mobile.$error.required && isSubmitted" class="error-info"> Contact is required </span>\n                    <span data-ng-show="enqForm.mobile.$error.mobile && isSubmitted && !enqForm.mobile.$error.required" class="error-info"> Contact is invalid </span>\n                </div>\n            </div>\n            <div data-ng-class="{error:(enqForm.query.$error.required && isSubmitted), formAutoRow: contactPage}">\n                <input type="hidden" name="query" data-ng-model="formData.query" data-ng-if="!contactPage" />\n                <textarea name="query" class="formTextareaInfo" data-ng-model="formData.query" data-ng-if="contactPage" style="width: 100%;" placeholder="Enter your message here" pt-required></textarea>\n                <span data-ng-show="enqForm.query.$error.required && isSubmitted" class="error-info"> Message is required </span>\n            </div>\n            <div class="formRow marginT10">\n                <button class="btn-action" data-ng-click="save(formData)" data-ng-disabled="isSaving" data-ng-show="!isSaving">\n                    <i class="pt pt-icon-phone paddingR5"></i> Get Call Back\n                </button>\n                <button class="btn-action disabled" data-ng-show="isSaving">\n                    Please wait...\n                </button>\n            </div>\n        </div>\n    </div>\n</form>\n<div class="promLeadInfo">\n    <div class="promHeadInfo">Our Promise </div>\n    <ul class="promLeadListInfo">\n        <li>\n            <span class="promCirInfo">\n                <i class="pt pt-icon-stamp"></i>\n            </span>\n            <span class="promLeadListTextInfo">Best Price</span>\n        </li>\n        <li>\n            <span class="promCirInfo">\n                <i class="pt pt-icon-Sec-o"></i>\n            </span>\n            <span class="promLeadListTextInfo">Assured Privacy</span>\n        </li>\n        <li>\n            <span class="promCirInfo">\n                <i class="pt pt-icon-car-o"></i>\n            </span>\n            <span class="promLeadListTextInfo">Free Site Visit</span>\n        </li>\n        <li>\n            <span class="promCirInfo">\n                <i class="pt pt-icon-Mai-o"></i>\n            </span>\n            <span class="promLeadListTextInfo">Expert consultation</span>\n        </li>\n    </ul>\n\n</div>\n<div class="formTermsInfo"> \n  *<span class="cursorPointer seoLink" data-ng-click="clickOnTnc(); $root.redirectToPage(\'/disclaimer\',\'blank\');">Terms</span> & <span class="cursorPointer seoLink" data-ng-click="clickOnTnc(); $root.redirectToPage(\'/privacy-policy\',\'blank\');">Privacy</span>\n</div>\n\n\n<!--div class="formListViewInfo">\n  <ul class="formListContInfo">\n    <li><i class="pt pt-icon-circle"></i> Free site visit</li>\n    <li data-ng-if="totalCount"><i class="pt pt-icon-circle"></i> Over <span>{{totalCount | number}}</span> projects to choose from <span class="formListCityName" data-ng-if="formData.city">in {{formData.city}}</span></li>\n  </ul>\n</div>\n\n<div class="formTermsInfo"> We do not share your information.  \n  For more details, read our <span class="cursorPointer seoLink" data-ng-click="$root.redirectToPage(\'/privacy-policy\',\'blank\')">privacy policy</span><br /> \n  *<span class="cursorPointer seoLink" data-ng-click="$root.redirectToPage(\'/disclaimer\',\'blank\')">Terms & conditions</span> applied\n\n</div-->\n\n\n</div>'}),define("parsers/gridParser",["app"],function(a){a.factory("GridParser",[function(){return{parse:function(a,b){for(var c=[],d=function(b,c){a.indexOf(b)>-1&&(g[b]=c)},e=0;e<b.length;e++){var f=b[e],g={};$.each(f,d),c.push(g)}return c}}}])}),define("parsers/recentlyViewedParser",["app"],function(a){a.factory("RecentlyViewedParser",[function(){return{parse:function(a,b,c){var d,e=function(a){var b;return b=a>=1e7||-1e7>=a?Math.round(100*a/1e7)/100+"Cr":a>=1e5||-1e5>=a?Math.round(100*a/1e5)/100+"L":a},f={},g=[];for(d=0;d<a.length;d++){var h=a[d];f[a[d].projectId]={projectId:h.projectId,projectName:h.builder.name+", "+h.name,projectLocation:h.address,pricePerSqft:"undefined"==typeof h.minPricePerUnitArea||"undefined"==typeof h.maxPricePerUnitArea?"-":h.minPricePerUnitArea+" / sq ft - "+h.maxPricePerUnitArea+" / sq ft",price:"undefined"==typeof h.minPrice||"undefined"==typeof h.maxPrice?"-":e(h.minPrice)+" - "+e(h.maxPrice),projectUrl:h.URL,imageURL:h.imageURL,city:h.locality.suburb.city.label,locality:h.locality.label,minResaleOrPrimaryPrice:h.minResaleOrPrimaryPrice,maxResaleOrPrimaryPrice:h.maxResaleOrPrimaryPrice,hasPriceOnRequest:h.hasPriceOnRequest,compProject:h,cityId:h.cityId}}for(c>b.length&&(c=b.length),d=0;c>d;d++)f[b[d]]&&g.push(f[b[d]]);return g}}}])}),define("services/userService",["app","parsers/gridParser","formatters/common","parsers/recentlyViewedParser","services/notificationService","services/b2b/CookieService"],function(a){a.config(["$httpProvider",function(a){delete a.defaults.headers.common["X-Requested-With"]}]).factory("UserService",["$http","$cookies","$q","$rootScope","$location","GlobalService","GridParser","Formatter","RecentlyViewedParser","NotificationService","CookieService",function(a,b,c,d,e,f,g,h,i,j,k){var l="",m=function(a,b){if(a){b||(b=0);var c=a.toString(),d=k.get("RECENTLY_VIEWED_2");if(d){var e=d.split("-"),f=e.indexOf(c);0!==f&&(-1!==f&&e.splice(f,1),e.unshift(c)),e=e.slice(0,10),c=e.join("-")}k.set("RECENTLY_VIEWED_2",c)}},n=function(a,b){var d=[],e=k.get("RECENTLY_VIEWED_2");if(e&&(l=_.map(e.split("-"),function(a){return a=a.split(","),d[a[0]]=a[1],a[0]}).filter(function(a){return a.toString().trim()})),l){var h='data/v1/entity/project?selector={"filters":{"and":[{"equal":{"projectId":['+l.join(",")+']}}]},"fields":["cityId","projectId","localityId","name","builder","address","URL","maxPrice","minPrice","minResaleOrPrimaryPrice","maxResaleOrPrimaryPrice","minPricePerUnitArea","maxPricePerUnitArea","imageURL","locality","label","suburb","city","hasPriceOnRequest"]}';return f.makeGetCall(h,!1,!0,!0,!0).then(function(c){var e=i.parse(c.data.data,l,b);return e=_.map(e,function(a){return d[a.projectId]?a.typeId=d[a.projectId]:a.typeId=0,a}),a?g.parse(a,e):e})}var j=c.defer();return j.resolve([]),j.promise},o=function(a){return f.makeGetCall("data/v1/entity/user/{userId}/enquired-property",!1,!0,!0).then(function(b){return $.each(b.data.data,function(a,c){b.data.data[a].url="/"+c.projectUrl,b.data.data[a].name="Visit",c.cityName&&!c.projectName&&(b.data.data[a].url=c.cityName.replace(" ","-").toLowerCase()+"-real-estate",b.data.data[a].projectName="NA")}),g.parse(a,b.data.data)})},p=function(a,b){var c={username:a.trim(),password:b};return f.makePostCall("app/v1/login",c,"",!1,!0)},q=function(a,b,c,d,e){var g={fullName:a.trim(),password:d,confirmPassword:d,email:b,countryId:e,contactNumbers:[{contactNumber:c}]};return f.makePostCall("app/v1/register",g,"application/json",!0,!0)},r=function(a){return f.makePostCall("app/v1/reset-password?email="+encodeURIComponent(a),!1,"application/json",!1,!0)},s=function(a,b){return d.isProvider=!0,f.makePostCall("app/v1/login/"+b,a).then(function(a){return t(a),f.returnUserResp(a)})},t=function(a){if(a&&a.firstName){a.USERNAME=a.firstName+(a.lastName?a.lastName:""),a.CONTACT=a.contactNumber,a.EMAIL=a.email,a.COUNTRY_ID=a.countryId,d.userDetails=a;var b="Hi "+a.USERNAME+"! You have logged in successfully.";d.$broadcast("userLoggedIn"),d.$broadcast("$signupRes"),j.setNotification({msg:b,type:"info"})}},u=function(b){return a({method:"POST",url:"app/v1/login",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){return a})},v=function(a){var b="data/v1/entity/user/change-password";return f.makePostCall(b,a,-1,!0,!0,!0)};return{userLogin:p,userRegister:q,resetPassword:r,userInfo:t,checkUser:s,getRecentlyViewed:n,setRecentlyViewed:m,getEnquiredProperty:o,loginB2b:u,changePassword:v}}])}),define("validators/commonValidators",["app"],function(a){a.factory("CommonValidators",[function(){var a="^((\\d+\\.?\\d{1,2})|(\\.?\\d{1,2}))$",b="^\\d+$",c="[^A-Za-z0-9.-]",d="^[^<>'\"]*$",e="^[a-zA-Z0-9]+$",f="^(19|20)dd[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$",g=function(a,b){var c=new RegExp(b),d=c.test(a);return d},h=function(a){return g(a,b)},i=function(b){return g(b,a)},j=function(a){return g(a,e)},k=function(a){return g(a,f)},l=function(a){return g(a,c)},m=function(a){return g(a,d)},n=function(a){var b="^[^<>'\"]{1,dynamic}$",c=b.replace("dynamic",a);return c},o=function(a){return a&&a.trim().length>0?!0:!1},p=function(a){var b=/[a-zA-Z ]+/;return a&&b.test(a.trim())?!0:!1},q=function(a){var b=/[a-zA-Z ]+/;return a&&b.test(a.trim())?!0:!1},r=function(a){return h(a)&&10===a.trim().length?!0:!1},s=function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a&&b.test(a.trim())?!0:!1};return{isName:p,isDate:k,isEmail:s,isMobile:r,haveTags:m,isInteger:h,isNumeric:i,isValidString:o,getlengthRegex:n,isAlphanumeric:j,haveSpecialCharacters:l,isCountry:q}}])}),define("validators/leadValidators",["app"],function(a){a.directive("ptMobilevalid",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a,b){var c=/^\+{0,1}[0-9- ]+$/;if(!c.test(a))return!1;var d=a[0];return a=a.match(/[0-9]+?/g).join(""),a=a.replace(/^[0]+/g,""),"india"===b.trim().toLowerCase()?"91"===a.substring(0,2)&&12===a.length?a.substring(2,12):10==a.length&&-1!==["7","8","9"].indexOf(d)?a:!1:(a.length<6||a.length>15)&&"+"==d?!1:a.length<6||a.length>12&&"+"!==d?!1:-1===_.indexOf(_.range(1,10),parseInt(d))?!1:a};d.$parsers.unshift(function(a){var b=e(a,c.country);return b?(d.$setValidity("mobile",!0),b&&b.trim()):(d.$setValidity("mobile",!1),a&&a.trim())})}}}]),a.directive("ptEmailvalid",["CommonValidators",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){return a.isEmail(b)?(e.$setValidity("email",!0),b&&b.trim()):(e.$setValidity("email",!1),b&&b.trim())})}}}]),a.directive("ptNamevalid",["CommonValidators",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){return a.isName(b)||0==b.length?(e.$setValidity("name",!0),b&&b.trim()):(e.$setValidity("name",!1),b&&b.trim())})}}}]),a.directive("ptIntegervalid",["CommonValidators",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){return a.isInteger(b)||0==b.length?(e.$setValidity("integer",!0),parseInt(b)):(e.$setValidity("integer",!1),b)})}}}]),a.directive("ptRequired",["CommonValidators",function(a){return{require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngModel,function(a){a&&"string"==typeof a&&a.trim()?d.$setValidity("required",!0):a&&"string"!=typeof a?d.$setValidity("required",!0):d.$setValidity("required",!1)})}}}]),a.directive("ptCountryvalid",["CommonValidators",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){return b&&a.isCountry(b.name)?(e.$setValidity("country",!0),b):(e.$setValidity("country",!1),b)})}}}])}),define("directives/common/pt-lead",["app","text!views/directives/common/pt-lead.html","services/globalService","services/citiesService","services/localityService","services/userService","services/notificationService","services/leadService","services/projectService","validators/commonValidators","validators/leadValidators"],function(a,b){a.filter("getName",function(){return function(a){return a?a.name:""}}),a.directive("ptLead",["LocalityService","CityService","GlobalService","UserService","NotificationService","LeadService","CommonValidators","$http","$timeout","ProjectService",function(a,c,d,e,f,g,h,i,j,k){return{restrict:"A",template:b,scope:{initial:"=",cityEnabled:"=",localityEnabled:"=",redirectTo:"=",isModal:"="},controller:["$scope","$rootScope","$location","$cookies","dateFilter",function(a,b,e,f,i){a.placeholder={FULL_NAME:"Full Name",EMAIL:"Email Address",MOBILE:"Mobile No."},a.isSubmitted=!1,a.contactPage="/contactus"==e.path();var j,k,l=["name","email","phone","country","query","projectId","projectName","cityId","cityName","localityId","ui_flag","ui_page","ui_php","ui_source","budget_flag","city","homeloan_flag","buy_howlong","locality","multiplePid","extra_bedrooms","extra_propertyType","ui_typeid","formlocationinfo","buy_sell","suburbId","interested","leadType","budget","bhk","propertyDetail","type"],m=!1,n={};a.currentDate=i(new Date,"yyyy-MM-dd HH:mm:ss"),a.$watch(function(){return b.totalProjects},function(b){a.totalCount=b},!0),a.$watch("initial",function(f){if(f){f.title&&(a.formTitle=f.title),!f.type||"locality-city"!==f.type&&"home-page"!==f.type&&"promise"!==f.type.split("-")[0].toLowerCase()||(m=!0),_.map(l,function(b){n[b]=a.initial[b]||""}),b.urlData&&b.urlData.pageType&&!n.ui_page?-1!==e.path().search("maps")?n.ui_page="MAP-"+b.urlData.pageType.toUpperCase():n.ui_page=b.urlData.pageType:n.ui_page||(n.ui_page="MAP-SALE-LISTING-CITY"),a.contactPage&&(n.query=""),a.formData={name:n.name.replace(/\+/g," ")||"",email:n.email||"",country_id:n.country||"1",city:n.cityName||"",city_id:n.cityId||"",localityName:n.locality||"",locality_id:n.localityId||"",suburb_id:n.suburbId||"",mobile:n.phone||"",project_id:n.projectId||"",query:n.query||"",interested:n.interested||"",leadType:n.leadType||"",budget:n.budget||"",bhk:n.bhk||"",propertyId:n.propertyDetail.propertyId||"",listingId:n.propertyDetail.listingId||""},a.localityList=[],c.getCountry().then(function(b){var c;if(a.countryList=b,a.formData.country_id&&parseInt(a.formData.country_id,10)){var d;for(c in a.countryList)d=a.countryList[c],parseInt(d.id,10)===parseInt(a.formData.country_id,10)&&(a.formData.country=d)}}),a.updateCountryCode=function(b){a.formData.country.code=b.code},a.clickOnTnc=function(){},a.save=function(b){if(a.enqForm.$valid){if(k={},_.map(l,function(a){n[a]&&(k["lead_"+a]=n[a])}),k.lead_name=b.name,k.lead_email=b.email,k.lead_cityName=b.city,k.lead_cityId=b.city_id,k.lead_locality=b.localityName,k.lead_localityId=b.locality_id,k.lead_phone=b.mobile,k.lead_country=b.country.id,k.lead_query=b.query?b.query:n.query,k.formlocationinfo=n.formlocationinfo,n.propertyDetail.resaleURL&&"undefined"!=typeof n.propertyDetail.resaleURL?k.listingId=n.propertyDetail.id:n.propertyDetail.listingId?k.listingId=n.propertyDetail.listingId:k.propertyId=n.propertyDetail.propertyId,m){if(k.lead_query.indexOf("{locality}")>-1){var c=k.lead_locality||"";c?k.lead_query=k.lead_query.replace("{locality}",c):k.lead_query=k.lead_query.replace("{locality}, ",c)}k.lead_query.indexOf("{city}")>-1&&(k.lead_query=k.lead_query.replace("{city}",k.lead_cityName))}j=d.isLoggedIn(),a.isSaving=!0;var e={};e.name=k.lead_name,e.email=k.lead_email,e.cityName=k.lead_cityName,e.cityId=k.lead_cityId,e.localityName=k.lead_locality,e.localityId=k.lead_localityId,e.projectId=k.lead_projectId,e.phone=k.lead_phone,e.countryId=k.lead_country,e.query=k.lead_query,e.formName=k.formlocationinfo,e.pageName=k.lead_ui_page,e.pageUrl=k.lead_ui_php,e.sendOtp=!0,k.listingId&&"undefined"!=typeof k.listingId?e.listingId=k.listingId:e.propertyId=k.propertyId,"homeloan"===k.lead_type&&(e.salesType=k.lead_type);var f="data/v1/entity/enquiry?lastEnquiryRequired=true",h=JSON.stringify(e),i="application/json";d.makePostCall(f,h,i,!0,!0,!0).then(function(a){if(a!==!1){var b=a.data;o(b)}},function(){a.isSaving=!1})}else a.isSubmitted=!0,g.enquiryTracking(n,"submitErr","Errors")};var h=!1;a.enqformFill=function(){h!==!0&&(h=!0,g.enquiryTracking(n,"filled","Initiated"))}}}),a.$watch(function(){return b.userDetails},function(b,c){if(!_.isEmpty(b)){var e=d.getHomeCity(),f={name:b.USERNAME.replace(/\+/g," ")||"",email:b.EMAIL||"",country_id:b.COUNTRY_ID||"0",mobile:b.CONTACT||""};if(e&&e.id&&(f.city_id=e.id),$.extend(!0,a.formData,f),a.formData.country_id&&parseInt(a.formData.country_id,10)){var g;for(var h in a.countryList)g=a.countryList[h],parseInt(g.id,10)===parseInt(a.formData.country_id,10)&&(a.formData.country=g)}}});var o=function(c){if("success"===c.status||"2XX"===c.statusCode){var e=d.isLoggedIn()?b.userDetails.EMAIL:k.lead_email,f=d.isLoggedIn()?b.userDetails.id:"";if("undefined"!=typeof mixpanel){var i=mixpanel.get_distinct_id();h.isEmail(i)?mixpanel.identify(e):(mixpanel.alias(e),mixpanel.register({distinct_id:e})),mixpanel.people.set({"USER ID":f,Mobile:k.lead_phone,$name:k.lead_name,$email:e,$last_login:a.currentDate}),"undefined"!=typeof mixpanel&&mixpanel.people.increment("Enquiry Submitted")}g.enquiryTracking(n,"submit","Submitted"),c.data.tracking&&angular.element("#LeadConversionTracking").trigger("click"),"undefined"!=typeof _taq&&window._taq.events.push(["leadSubmitted"+b.CURRENT_ACTIVE_PAGE,{url:window.location.href}]);var j={name:k.lead_name,email:k.lead_email,phone:k.lead_phone,country:k.lead_country,budget:k.lead_budget,bhk:k.lead_bhk};a.isSaving=!1,a.formData.isModal=a.isModal,d.setCookie("enquiry_info",JSON.stringify(j));var l="undefined"!=typeof c.data.lastEnquiry&&c.data.lastEnquiry.enquiryAttributes.length>0?!0:!1,m={enquiryid:c.data.enquiryIds[0],isOtpVerified:c.data.isOtpVerified,ppc:c.data.ppc.toString().toUpperCase(),status:c.data.status,userId:c.data.userId,leadData:a.formData,isPersonalAdviceFormFill:l};a.$emit("leadposted",m)}else a.isSaving=!1,a.isSubmitted=!0,g.enquiryTracking(n,"submitErr","Errors")};a.$on("leadAfterCaptcha",function(a,b){o(b.data)})}]}}])}),define("text!views/directives/common/pt-leadVerification.html",[],function(){return'<div class="row-full">\n   <div class="formTopMessInfo success" ng-if="ShowThanksOnAdviceForm && display.message.success && !numberVerified">\n      <span><i class="pt pt-icon-thumbs-up"></i>{{display.message.success}}</span>\n   </div>\n   <div class="formTopVerInfo" ng-if="numberVerified && showAdviceFormFlag">\n      <div><i class="pt pt-icon-mobile"></i><i class="pt pt-icon-check-square-o"></i>\n         <span>{{mobile}} is verified with us</span>\n      </div>\n   </div>\n   <div class="formMobiNumInfo">\n      <div class="formMobiContInfo row-full" data-ng-show="showVerificationFormFlag">\n         <div class="formVeriHeadInfo">Verify Number</div>\n         <div class="formVeriSubHeadInfo paddingT10">To get callback on priority, verify {{mobile}} using OTP sent to you via SMS</div>\n         <div class="row enq-form-info formMobiFormInfo">\n            <div class="formMobiRow">\n               <div class="col-lg-5 col-md-5 col-sm-5 relativePostion" ng-form name=\'otpform\'>\n                  <div class="row-full" data-ng-class="{\'error\': !otpform.$valid || wrongOtp}" data-ng-click="stopPropagating($event);">\n                     <input type="text" name="otp" data-ng-model="otp" pt-integervalid data-ng-focus="otpSubmit=true" ng-maxlength="4" data-ng-disabled="numberVerified" placeholder="{{placeholder.OTP}}"/>\n                     <div class="optConFirmInfo" data-ng-if="otpSubmit">\n                        <div class="optConBoxInfo pull-left" data-ng-click="verifyOTP();" data-ng-class="{\'disabled\':form.$invalid && form.otp.length}"><i class="pt pt-icon-check"></i></div>\n                        <div class="optConBoxInfo pull-left" data-ng-click="cancelOTP();"><i class="pt pt-icon-times"></i></div>\n                     </div>\n                  </div>\n                  <div class="otpContInfo paddingT5" data-ng-if="!numberVerified">\n                     Did not get SMS? <a data-ng-click="sendOtp();">click here</a> to Resend\n                  </div>\n               </div>\n               <div class="col-lg-5 col-md-5 col-sm-5 col-lg-offset-2 col-md-offset-2 col-sm-offset-2" ng-form name="form">\n                  <div class="editNumBoxInfo" data-ng-class="{\'error\': !form.$valid && mobileEditable}" data-ng-click="stopPropagating($event);">\n                     <input name="mobile" type="text" data-ng-model="mobile" data-country="{{formData.countryName}}" pt-mobilevalid pt-required data-ng-disabled="!mobileEditable" />\n                     <span data-ng-show="form.mobile.$error.required" class="error-info"> Contact is required </span>\n                     <span data-ng-show="form.mobile.$error.mobile  && !form.mobile.$error.required && isSubmitted" class="error-info"> Contact is invalid </span>\n                     <div data-ng-click="enableEditing();" class="editBtnInfo"><i class="pt pt-icon-pencil"></i></div>\n                     <div class="optConFirmInfo" data-ng-if="mobileEditable">\n                        <div class="optConBoxInfo pull-left" data-ng-click="updateNumber();"><i class="pt pt-icon-check"></i></div>\n                        <div class="optConBoxInfo pull-left" data-ng-click="cancelNumber();">\n                           <i class="pt pt-icon-times"></i>\n                        </div>\n                     </div>\n                  </div>\n                  <div class="successInfo paddingT3" data-ng-show="numberVerified">Verified</div>\n                  <div class="notSuccessInfo paddingT3" data-ng-show="!numberVerified">Not Verified</div>\n                  <div class="otpSendMessInfo paddingT3" data-ng-show="otpSent">We have sent an OTP.</div>\n               </div>\n            </div>\n         </div>\n         <div class="text-right">\n             <a data-ng-click="skipMobileVerificationForm()">Skip &raquo;</a>\n         </div>\n      </div>\n      <!-- Number verified -->\n      <div class="formMobiReqContInfo row-full" data-ng-show=\'showAdviceFormFlag\'>\n         <div class="formVeriHeadInfo">Yes, Give Me Personalised Advice</div>\n         <div class="formVeriSubHeadInfo"></div>\n         <div class="row enq-form-info formMobiFormInfo" name=\'detailsform\' ng-form>\n            <div class="formMobiRow">\n               <div class="col-lg-6 col-md-6 col-sm-6">\n                  <div class="row-full" data-ng-class="{\'error\': detailsform.name.$invalid && formData.name.length}">\n                     <input type="text" name=\'name\' data-ng-model="formData.name" pt-namevalid  placeholder="{{placeholder.FULL_NAME}}" />\n                  </div>\n               </div>\n               <div class="col-lg-6 col-md-6 col-sm-6">\n                  <div class="formMobTwoColumn" data-ng-class="{\'error\': detailsform.budget.$invalid && formData.budget.length}">\n                     <input type="text" name="budget" pt-integervalid data-ng-model="formData.budget" placeholder="{{placeholder.BUDGET}}" />\n                  </div>\n                  <div class="formMobTwoColumn">\n                     <select data-ng-model="formData.unit" data-ng-options="unit for unit in display.units">\n                     </select>\n                  </div>\n               </div>\n            </div>\n            <div class="formMobiRow">\n               <div class="col-lg-6 col-md-6 col-sm-6">\n                  <label>BHK</label>\n                  <div class="btn-group filter-checkbox row-full marginB20">\n                     <button type="button" class="btn" data-ng-click="apartmentSize(key)" data-ng-class="{\'active\':display.sizes[key].active}" ng-repeat="(key,value) in display.sizes">\n                     {{key}}\n                     </button>\n                  </div>\n                  \n                  <label>PURPOSE</label>\n                <div class="btn-group filter-checkbox row-full">\n                   <button type="button" name=\'purpose\' class="btn handler0 pth" data-ng-click="purchaseFor(\'SELF_USE\', 0)">SELF USE</button>\n                   <button type="button" name=\'purpose\' class="btn handler1 pth" data-ng-click="purchaseFor(\'INVESTMENT\', 1)">INVESTMENT</button>  \n                </div>\n\n               </div>\n               <div class="col-lg-6 col-md-6 col-sm-6">\n                  <div tag-manager filterdata="localityList" locality="formData.locality" data-ng-if="formData.locality_id !==\'\'"></div>\n                  <label>&nbsp;</label>\n                  <select data-ng-model="formData.city" data-ng-disabled="(cityList && cityList.length === 0)" data-ng-options="c.label for c in cityList" data-ng-if="formData.locality_id===\'\'">\n                     <option value="">City</option>\n                  </select>\n               </div>\n            </div>\n            <div class="formMobiRow paddingT15">\n               <div class="col-lg-12 col-md-12 col-sm-12">\n                  <div class="instPropOpInfo pull-left">I am interested in similar properties ?</div>\n                  <div class="checkboxInfo pull-left paddingL20 paddingT3" data-ng-if="!formData.project_id">\n                     <span class="checkIconInfo">\n                     <input type="checkbox" data-ng-model="formData.needNew" data-ng-true-value="primary"/>\n                     </span>\n                     <label>From Builder</label>\n                  </div>\n                  <div class="checkboxInfo pull-left paddingL20 paddingT3" data-ng-if="!formData.project_id">\n                     <span class="checkIconInfo">\n                     <input type="checkbox" data-ng-model="formData.needResale" data-ng-true-value="resale"/>\n                     </span>\n                     <label>In Resale</label>\n                  </div>\n                  <div class="checkboxInfo pull-left paddingL20 paddingT3" data-ng-if="formData.project_id">\n                     <span class="checkIconInfo">\n                     <input type="checkbox" data-ng-model="formData.similarProject"/>\n                     </span>\n                  </div>\n               </div>\n            </div>\n            <div class="formMobiRow paddingT15">\n               <div class="col-lg-12 col-md-12 col-sm-12">\n                  <button class="btn-action" data-ng-click=\'saveData()\' ng-class="{\'disabled\': enableSubmit()}">\n                  <i class="pt pt-icon-phone"></i> Get ME MY NEW HOME\n                  </button>\n               </div>\n               <div class="col-lg-12 col-md-12 col-sm-12 text-right paddingT10">\n                  <a data-ng-click="skipPersonalAdviceForm()">Skip &raquo;</a>\n               </div>\n            </div>\n         </div>\n         <div class="pt-advice" data-ng-if="showAdviceFormFlag"></div>\n      </div>\n      <!-- End Number verified -->\n   </div>\n</div>';
}),define("text!views/directives/filters/tagmanager.html",[],function(){return'<div class="row-full">\n    <label>{{filter.label|uppercase}}</label>                               \n    <div class="autoCompleteSearch" tags-input data-ng-model="filter.selected" \n        placeholder="{{filter.placeholder}}"\n        temp-placeholder="{{filter.placeholder}}"\n        replace-spaces-with-dashes="false"                                   \n        add-from-autocomplete-only="true"\n        allowed-tags-pattern = "[a-zA-Z0-9\\.]*"                                \n        max-tags = "6"\n        min-length="2"\n        on-tag-added="update($tag.label)"\n        on-tag-removed="update($tag.label)"\n        >\n        <div auto-complete source="loadData($query)" min-length="2" debounce-delay="0" max-results-to-show="5"></div>\n    </div>\n    <div class="row-full requireText">\n        <strong>Note:</strong> You can add upto 6 {{filter.label}}\n    </div> \n </div>\n                  \n\n                  '}),define("directives/filters/tagmanager",["app","text!views/directives/filters/tagmanager.html"],function(a,b){a.directive("tagManager",["$rootScope","$location",function(a,c){return{restrict:"A",scope:{filterdata:"=",locality:"="},template:b,controller:["$scope",function(a){var b={},c={selected:[],hide:!1,key:"localityOrSuburbLabel",label:"locality",placeholder:"Add a Locality",type:"tag"};a.$watch("locality",function(c){c.label&&(a.filter.selected.push({label:c.label,id:c.id}),b.selectedIds=c.id,a.$emit("tagsUpdationTriggered",b.selectedIds))}),a.filter=c,a.update=function(){c.selected.length?(b.localityOrSuburbLabel=_.pluck(c.selected,"label").join(),b.selectedIds=_.pluck(c.selected,"id").join()):(delete b.localityOrSuburbLabel,delete b.selectedIds),a.getlocalities=b,a.$emit("tagsUpdationTriggered",b.selectedIds)},a.loadData=function(){return a.filterdata}}]}}])}),define("directives/common/pt-leadVerification",["app","text!views/directives/common/pt-leadVerification.html","services/globalService","services/citiesService","services/localityService","services/leadService","services/filterService","validators/commonValidators","validators/leadValidators","directives/filters/tagmanager"],function(a,b){a.directive("ptLeadverification",["LocalityService","CityService","GlobalService","LeadService",function(){return{restrict:"A",template:b,scope:{lead:"="},controller:["$scope","$rootScope","CityService","LocalityService","$q","$timeout","LeadService","GlobalService","FilterService",function(a,b,c,d,e,f,g,h,i){a.formData={},a.display={},a.selectedLocalities={},a.$on("tagsUpdationTriggered",function(b,c){c&&(a.selectedLocalities=c.split(","))}),a.placeholder={FULL_NAME:"Full Name",BUDGET:"Budget",OTP:"OTP [ One Time Password ]"};var j={};_.forEach(i.filters.bed.options,function(a,b){j[a.key]=a.values?a.values:a.key});var k=function(){var b={};return _.forEach(j,function(c,d){if(b[d]={},$.isArray(c)){var e=0;_.forEach(c,function(f,g){-1!==$.inArray(f,m)&&e++,e==c.length?(b[d].active=!0,a.mark=!0):b[d].active=!1})}else b[d].active=-1!==$.inArray(c,m)?!0:!1,a.mark=a.mark?!0:b[d].active;b[d].value=c}),b},l=function(b){if(b){var c=1e5,d=1e7,e=parseInt(1*b/d);return e>0?(a.formData.unit="Crore",e):(a.formData.unit="Lacs",parseInt(1*b/c))}return""};_.extend(a.lead,a.lead),a.formData.mobile=a.lead.mobile,a.formData.locality_id=a.lead.locality_id?a.lead.locality_id:"",a.formData.locality={},a.formData.email=a.lead.email,a.formData.city_id=a.lead.city_id?a.lead.city_id:"",a.formData.city=a.lead.city?a.lead.city.label:"",a.formData.name=a.lead.name?a.lead.name:"",a.formData.budget=l(a.lead.budget),a.formData.project_id=a.lead.project_id?a.lead.project_id:"",a.formData.userEnquiryId=a.lead.enquiryid,a.formData.country=a.lead.country?a.lead.country.id:a.lead.country_id,a.formData.countryName=a.lead.country.name,a.formData.needNew="primary",a.formData.needResale="resale",a.formData.unit=a.formData.unit?a.formData.unit:"Lacs",a.formData.requiredSize=[],a.formData.similarProject=!0,a.userId=a.lead.userId,a.mobileEditable=!1,a.otpSubmit=!1,a.wrongOtp=!1,a.otpSent=!1,a.numberVerified=a.lead.isOtpVerified,a.mobile=a.formData.mobile;var m=a.lead.bhk?a.lead.bhk.split(","):[];a.display.sizes=k(),a.purposeObj=["SELF USE","INVESTMENT"],a.personalAdviceAccepted=a.lead.isPersonalAdviceFormFill;var n=function(a,b,c){};if(a.showVerificationFormFlag=!1,a.showAdviceFormFlag=!1,a.numberVerified&&a.personalAdviceAccepted?a.$emit("leadVerified"):!a.numberVerified&&a.personalAdviceAccepted?(a.showVerificationFormFlag=!0,n("enquiry","viewed","step2-OTPVerfication")):a.numberVerified&&!a.personalAdviceAccepted?(a.showAdviceFormFlag=!0,n("enquiry","viewed","step2-personalisation")):a.numberVerified||a.personalAdviceAccepted?n("enquiry","viewed","step3-personalisation"):(a.showVerificationFormFlag=!0,n("enquiry","viewed","step2-OTPVerfication")),a.purchaseFor=function(b,c){angular.element(".handler"+c).toggleClass("active");var d=[];angular.element(".pth").each(function(){angular.element(this).hasClass("active")&&d.push(angular.element(this).text())}),a.LeadFormPurpose=d},a.ShowThanksOnAdviceForm=!0,a.skipMobileVerificationForm=function(){n("enquiry","clicked","step2-OTPVerfication-skip"),a.showAdviceFormFlag=!1,a.showVerificationFormFlag=!1,a.ShowThanksOnAdviceForm=!1,a.personalAdviceAccepted?(n("enquiry","viewed","step3-morelinks"),a.$emit("leadVerified")):(n("enquiry","viewed","step3-personalisation"),a.showAdviceFormFlag=!0)},a.skipPersonalAdviceForm=function(){a.numberVerified?a.gaFlagOtpVerification?(n("enquiry","clicked","step3-personlisation-skip"),n("enquiry","viewed","step4-morelinks")):(n("enquiry","clicked","step2-personlisation-skip"),n("enquiry","viewed","step3-morelinks")):(n("enquiry","clicked","step3-personlisation-skip"),n("enquiry","viewed","step4-morelinks")),a.$emit("leadVerified")},a.display.units=["Lacs","Crore"],a.display.message={success:"Congrats! Youâ€™re one step closer to your dream home.",successOtp:"OTP Sent.",verificationFailed:"OTP Verification Failed"},a.isSubmitted=!1,a.apartmentSize=function(b){a.display.sizes[b].active=!a.display.sizes[b].active,a.detailsform.$setDirty()},""===a.formData.locality_id)c.getMainCities().then(function(b){if(a.cityList=b.data,a.formData.city_id){var c;angular.forEach(a.cityList,function(b){parseInt(b.id,10)==parseInt(a.formData.city_id,10)&&(c=b)}),c&&(a.formData.city=c)}});else{var o,p;d.getLeadFormList(a.formData.city_id).then(function(b){if(a.localityList=b,a.formData.locality_id)for(o in a.localityList)p=a.localityList[o],"object"==typeof p&&p.id.toString()===a.formData.locality_id.toString()&&(a.formData.locality=p)})}var q=function(){a.formData.requiredSize=[],_.each(a.display.sizes,function(b,c){b.active&&($.isArray(b.value)?_.forEach(b.value,function(b,c){a.formData.requiredSize.push(1*b)}):a.formData.requiredSize.push(1*b.value))})},r=function(){return"Lacs"===a.formData.unit?1e5*a.formData.budget:"Crore"===a.formData.unit?1e7*a.formData.budget:void 0},s=function(){var b={name:a.formData.name,email:a.formData.email,phone:a.formData.mobile,country:a.formData.country,budget:r(),bhk:a.formData.requiredSize.length>0?a.formData.requiredSize.join(","):a.bhk};h.setCookie("enquiry_info",JSON.stringify(b))};a.saveData=function(){if(!a.enableSubmit()){var b={};q(),b.name=a.formData.name,b.id=a.formData.userEnquiryId,a.formData.locality_id&&a.formData.locality&&parseInt(a.formData.locality.id)?a.selectedLocalities.length>0?b.localityIds=a.selectedLocalities:b.localityIds=parseInt(a.formData.locality.id):a.formData.locality_id||(b.cityName=a.formData.city.label),parseInt(a.formData.budget)&&(b.leadBudget=r()),b.bhk=a.formData.requiredSize.length?a.formData.requiredSize:[],b.salesTypes=[],a.formData.project_id?b.isInterestedInSimilarProperties=a.formData.similarProject:(a.formData.needResale?b.salesTypes.push(a.formData.needResale):!1,a.formData.needNew?b.salesTypes.push(a.formData.needNew):!1,b.isInterestedInSimilarProperties=!0),"undefined"!=typeof a.LeadFormPurpose&&(b.purpose=a.LeadFormPurpose);var c=[];_.each(b,function(a,b){$.isArray(a)&&a.length>0&&a&&"isInterestedInSimilarProperties"!==b&&"id"!==b?c.push(b):!$.isArray(a)&&a&&"isInterestedInSimilarProperties"!==b&&"id"!==b&&c.push(b)});var d=c.join(", ");b=JSON.stringify(b),a.numberVerified&&!a.personalAdviceAccepted?a.gaFlagOtpVerification?(n("enquiry","clicked","step3-personalisation-getme-"+d),n("enquiry","viewed","step4-morelinks")):(n("enquiry","clicked","step2-personalisation-getme-"+d),n("enquiry","viewed","step3-morelinks")):a.numberVerified||a.personalAdviceAccepted||(n("enquiry","clicked","step3-personalisation-getme-"+d),n("enquiry","viewed","step4-morelinks")),g.updateLeadByPUT(a.formData.userEnquiryId,b).then(function(b){a.$emit("leadVerified",b),s();var c=a.numberVerified?"OTPVerified":"OTPNotVerified";c=a.lead.isOtpVerified?"OTPAlreadyVerified":c},function(){})}},a.sendOtp=function(){n("enquiry","clicked","step2-OTPVerfication-resend");var b={};b.phoneToVerify=a.formData.mobile,b.userId=a.userId,g.updateLeadByPUT(a.formData.userEnquiryId,b).then(function(b){f(function(){a.otpSent=!1},2e3),b.data.data.isOtpVerified?(a.numberVerified=!0,a.personalAdviceAccepted?a.$emit("leadVerified"):a.showAdviceFormFlag=!0,a.showVerificationFormFlag=!1):(a.numberVerified=!1,a.otpSent=!0)},function(){})},a.enableEditing=function(){a.mobileEditable=!0},a.updateNumber=function(){a.isSubmitted=!0,a.form.$valid&&(a.mobileEditable=!1,a.formData.mobile=a.mobile,a.sendOtp(),s())},a.cancelNumber=function(){a.mobileEditable=!1,a.mobile=a.formData.mobile,a.isSubmitted=!1},a.gaFlagOtpVerification=!1,a.verifyOTP=function(){if(a.otpform.$valid){a.otpSubmit=!1;var b={};b.phone=a.formData.mobile,b.userId=a.userId,g.updateLeadByPUT(a.formData.userEnquiryId,b,a.otp).then(function(b){b.data.data.isOtpVerified?(a.numberVerified=!0,a.wrongOtp=!1,a.gaFlagOtpVerification=!0,n("enquiry","clicked","step2-OTPVerfication-OTPVerified"),a.personalAdviceAccepted?(n("enquiry","viewed","step3-morelinks"),a.$emit("leadVerified")):(n("enquiry","viewed","step3-personalisation"),a.showAdviceFormFlag=!0),a.showVerificationFormFlag=!1):a.wrongOtp=!0,a.otp=""},function(){})}},a.cancelOTP=function(){a.otpSubmit=!1,a.otp=""},angular.element(".modal-dialog").on("click",function(){a.cancelOTP(),a.cancelNumber()}),a.stopPropagating=function(a){a.stopPropagation()},a.enableSubmit=function(){return _.forEach(a.display.sizes,function(b,c){b.active&&(a.checkMark=!0)}),a.mark=a.checkMark?!0:!1,a.checkMark=!1,a.detailsform.$valid?a.detailsform.name.$viewValue.length>0||a.detailsform.budget.$viewValue.length>0||a.formData.locality_id&&void 0!==a.formData.locality&&null!==a.formData.locality||!a.formData.locality_id&&void 0!==a.formData.city&&null!==a.formData.city||a.mark?!1:a.detailsform.$pristine?!0:!0:!0}}],link:function(){}}}])}),define("text!views/directives/common/pt-leadforwardflow.html",[],function(){return'<div>\n<div class="formTopLinkVerInfo" ng-if="displaythanks">\n     <div><i class="pt pt-icon-check-circle"></i><span>Thank you. Your requirements are saved with us!</span></div>\n </div>\n<div class="row-full marginT20">\n      <div class="morePropHeadInfo">DON\'T MISS ON THESE</div>\n      <div class="morePropContInfo">\n         <ul class="moreListDescInfo">\n            <li ng-repeat="value in subPageUpperContent">\n               <div class="listContInfo" data-ng-click="GAeventOnMore(displayDataArr[value].name)">\n                   <a data-ng-href= "{{displayDataArr[value].url}}"  target="{{displayDataArr[value].target ? displayDataArr[value].target : \'\'}}">\n                        <img alt="{{displayDataArr[value].name}}" data-ng-src="/styles/images/{{displayDataArr[value].image}}.jpg">\n                        <div class="listProjContInfo">\n                           <span class="listprojdesc">{{displayDataArr[value].text}}</span>\n                        </div>\n                   </a>\n               </div>\n            </li>\n          </ul>\n      </div>\n   </div>\n   <div class="row-full marginT20 slickSlider hide" ng-if="displayProjects">\n      <div class="morePropHeadInfo">Properties You May Also Like</div>\n      <div class="likePropContInfo">\n         <div class="row-full" id="outerCarouselLead">\n            <div class="likePropProjInfo" data-ng-repeat="project in displayProjects">\n               <div class="listContInfo" data-ng-click="GAeventOnMore(\'similarproperties\')">\n                   <a data-ng-href= "{{project.landingUrl}}">\n                        <img alt="{{project.projectName}}" data-ng-src="{{project.imageUrl}}">\n                        <div class="likeProjHeadInfo">{{project.projectName}}</div>\n                        <div class="likelistProjContInfo">\n                           <span class="listprojdesc" ng-if="project.locality">{{project.locality}}</span>\n                           <span class="listprojdesc" ng-if="project.possession">Possession : {{project.possession}}</span>\n                        </div>\n                   </a>\n               </div>\n            </div>\n         </div>\n      </div>\n   </div>\n</div>\n\n'}),define("parsers/projectParser",["app","formatters/common","services/constants","services/globalService"],function(a){"use strict";a.factory("ProjectParser",["$filter","Formatter","Constants","GlobalService",function(a,b,c,d){var e=(a("removePrefix"),a("priceFormat")),f=a("dateFormat"),g=a("rateColor"),h=a("dateColor"),i=a("score"),j=a("formatGraphPrice"),k=a("formatGraphPriceHover"),l=a("formatSoldPercentage"),m=a("formatSoldPercentageHover");return{mergePriceTrendData:function(a,b){var c={};return b&&a.keys&&a.keys.length>2&&(c={keys:a.keys,projectAvg:a.avg,avg:[]},$.each(a.keys,function(a,d){var e=b.keys.indexOf(d);-1===e?c.avg.push(null):c.avg.push(b.avg[e])})),c},getResaleDropdown:function(a){for(var b,c=["All"],d=0;d<a.length;d++)b=_.keys(a[d])[0],b&&c.push(b+" BHK");return c},praseResaleListings:function(a,c){var e=[];return c=c?c:250,a&&_.each(a,function(a){a.images&&a.images.length&&(a.mainImage=a.images[0]),a.property.project&&a.property.project.projectStatus&&(a.property.project.projectStatus=b.getProjectStatusKey(a.property.project.projectStatus)),a.property.project&&a.property.project.possessionDate&&(a.property.project.possessionDate=("Ready to Move In"==a.property.project.projectStatus?"Since ":"Possession by ")+f(a.property.project.possessionDate)),a.description&&(a.smallDesc=d.stripContent(a.description,!0,0,c).mediumDescription),a.imageCount&&(a.isUIVerified=!0),a.videos&&(a.mainImage={},a.mainImage.absolutePath=a.videos[0].imageUrl),e.push(a)}),e},addResaleInfo:function(a,c,e){var g=[],h=[];return c?_.each(c,function(c){c.data&&c.data.length&&_.each(c.data,function(e){e.propertyId==a.propertyId&&(a.totalResaleListings=c.totalCount,e.images&&e.images.length&&(e.mainImage=e.images[0]),e.description&&(e.smallDesc=d.stripContent(e.description,!0,0,250).mediumDescription),e.property.project&&e.property.project.projectStatus&&(e.property.project.projectStatus=b.getProjectStatusKey(e.property.project.projectStatus)),e.property.project&&e.property.project.possessionDate&&(e.property.project.possessionDate=("Ready to Move In"==e.property.project.projectStatus?"Since ":"Possession by ")+f(e.property.project.possessionDate)),e.imageCount?(e.isUIVerified=!0,g.push(e)):h.push(e),e.videos&&(e.mainImage={},e.mainImage.absolutePath=e.videos[0].imageUrl))})}):e&&e.data&&e.data.listings&&_.each(e.data.listings,function(c){c.propertyId==a.propertyId&&(a.totalResaleListings=e.totalCount,c.images&&c.images.length&&(c.mainImage=c.images[0]),c.property.project&&c.property.project.projectStatus&&(c.property.project.projectStatus=b.getProjectStatusKey(c.property.project.projectStatus)),c.property.project&&c.property.project.possessionDate&&(c.property.project.possessionDate=("Ready to Move In"==c.property.project.projectStatus?"Since ":"Possession by ")+f(c.property.project.possessionDate)),c.description&&(c.smallDesc=d.stripContent(c.description,!0,0,250).mediumDescription),c.imageCount?(c.isUIVerified=!0,g.push(c)):h.push(c))}),a.resaleInfo=g.concat(h),a},catagoriesProperty:function(a,c,d){var f,g,h={},i=this;return _.each(a,function(a){g=a.budget?a.budget:a.resalePrice,a.emi=b.formatRs(b.getEMI(e(g,0),c)),a.size?a.orig_size=a.size:a.carpetArea&&(a.orig_size=a.carpetArea),a.media&&a.media.length&&$.each(a.media,function(b,c){"3DFloorPlan"==c.objectMediaType.type.replace(/ /g,"")&&(a.has3D=!0)}),a.imageToShow=a.images?a.images[0]:a.media?a.media[0]:null,a.imageToShow&&(a.imageToShow.text=a.images?a.images[0].altText:""),a.video&&a.video.length?(a.imageToShow&&(a.imageToShow.showingImage=a.video[0].imageUrl),a.enable2D=!0,a.enable3D=!0,a.hasVideo=!0):a.media&&a.media.length&&$.each(a.media,function(b,c){return"3DFloorPlan"==c.objectMediaType.type.replace(/ /g,"")?(a.imageToShow&&(a.imageToShow.showingImage=c.absoluteUrl),a.enable2D=!0,void(a.enable3D=!1)):void 0}),!a.images||!a.images.length||a.has3D||a.video&&a.video.length||(a.enable3D=!0,a.enable2D=!1,a.imageToShow.showingImage=a.images[0].absolutePath),a.imageAltText=a.images?a.images[0].altText:"",a=d?i.addResaleInfo(a,d):a,f=a.bedrooms+"BHK",h[f]="undefined"==typeof h[f]?{}:h[f],h[f].minSize="undefined"==typeof h[f].minSize?a.orig_size:h[f].minSize,h[f].data="undefined"==typeof h[f].data?[]:h[f].data,h[f].data.push(a),h[f].count?h[f].count=h[f].count+1:h[f].count=1}),h},parseNeighborhood:function(a){var b={};return $.each(a,function(a,c){b[c.localityAmenityTypes.name]?b[c.localityAmenityTypes.name].count++:(b[c.localityAmenityTypes.name]={},b[c.localityAmenityTypes.name].count=1,b[c.localityAmenityTypes.name].displayName=c.localityAmenityTypes.description)}),b},parseSpecifications:function(a){var b={doors:{},fittingsAndFixtures:{},flooring:{},walls:{}};return a&&($.each(a,function(a,c){b.hasOwnProperty(a)?$.each(c,function(c,d){d&&(b[a][c]=d)}):b[a]=c}),$.each(b,function(a,c){("object"==typeof b[a]&&$.isEmptyObject(b[a])||0===b[a].length)&&delete b[a]})),b},parseAmenities:function(a){var b,c=[],d=[];if(a&&a.length){for(var e=0,f=a.length;f>e;e++){var g=a[e];"Oth"===g.amenityMaster.abbreviation?(d.push(g.amenityDisplayName),b=g):c.push(g)}d.length&&(b.amenityDisplayName=d.join(", "),c.push(b))}return c},parseProjectRating:function(a){switch(a){case 1:a="Terrible";break;case 2:a="Poor";break;case 3:a="Average";break;case 4:a="Good";break;case 5:a="Excellent";break;default:a=""}return a},parseStats:function(a){var b,d,e,f=-(1/0),g=-(1/0),h=1/0,i=1/0,j={pricePerUnitArea:{min:void 0,max:void 0},possessionDate:{min:void 0,max:void 0}};for(d=0,e=a.data.items.length;e>d;d++)b=a.data.items[d],f<b.minPricePerUnitArea&&b.latitude&&(f=b.minPricePerUnitArea),g<b.possessionDate&&b.latitude&&(g=b.possessionDate),h>b.minPricePerUnitArea&&b.latitude&&(h=b.minPricePerUnitArea),i>b.possessionDate&&b.latitude&&(i=b.possessionDate);return i<c.JAN2012&&(i=c.JAN2012),f!=-(1/0)&&h!=1/0&&(j.pricePerUnitArea={max:f,min:h}),g!=-(1/0)&&i!=1/0&&(j.possessionDate={max:g,min:i}),j},parseProject:function(a,c,d){var n={};if(n.projectId=a.projectId,n.landmarkImageTypeCount=a.landmarkImageTypeCount,n.cityId=a.locality.suburb.city.id,n.localityId=a.locality.localityId,n.selector="project_"+a.projectId,n.discussions=a.totalProjectDiscussion,n.name=a.name,n.builderName=a.builder.name,n.imageURL=a.imageURL,n.projectStatus=b.getProjectStatusKey(a.projectStatus?a.projectStatus.toLowerCase():""),n.address=a.address,n.completeProjectAddress=a.completeProjectAddress,n.projectBuilderContact=a.projectBuilderContact,n.supply=a.supply?a.supply:"NA",n.offer=a.offer,n.builder=a.builder,n.locality=a.locality,n.builderMarketingShare=a.builderMarketingShare,n.isRedevelopementProject=a.isRedevelopementProject,a.livabilityScore&&(n.livabilityScore=parseFloat(a.livabilityScore).toFixed(1)),a.safetyScore&&(n.safetyScore=parseFloat(a.safetyScore).toFixed(1)),n.dominantUnitType=a.dominantUnitType,n.locality.ratings={averageRating:n.locality.averageRating,ratingsCount:n.locality.ratingsCount,numberOfUsersByRating:n.locality.numberOfUsersByRating},n.latitude=a.latitude,n.longitude=a.longitude,a.latitude&&a.longitude||(n.unMapped=!0),n.fullName=a.builder.name+" "+n.name,a.dominantUnitType&&(n.projectType=a.dominantUnitType.toLowerCase()),n.propertyUnitTypes=a.propertyUnitTypes,n.minPrice=e(a.minPrice,0,void 0,"L"),n.maxPrice=e(a.maxPrice,0,void 0,"L"),n.launchDateTstamp=a.launchDate,n.launchDate=f(a.launchDate),n.distinctBedrooms=a.distinctBedrooms,n.propertySizeMeasure=a.propertySizeMeasure,n.URL=a.URL,n.authorized=a.authorized,n.avgPricePerUnitArea=a.avgPricePerUnitArea,n.resalePricePerUnitArea=a.resalePricePerUnitArea,n.avgPriceDeviation=b.roundDoubleDecimal((n.locality.avgPricePerUnitArea-n.avgPricePerUnitArea)/n.locality.avgPricePerUnitArea*100),n.resaleEnquiry=a.resaleEnquiry,n.totalUnitsHtml="",a.totalUnits?(n.totalUnits=a.totalUnits,n.totalUnitsHtml=n.totalUnits+" Units Launched"):(n.totalUnits="NA",n.totalUnitsHover="Coming soon"),a.totalUnits&&(n.totalSold=Math.round((a.totalUnits-a.derivedAvailability)/a.totalUnits*100)),isNaN(n.totalSold)?n.totalSoldHtml="":n.totalSoldHtml=n.totalSold+"% Sold",n.totalSold=l(n.totalSold,a.derivedAvailability,n.projectStatus),n.totalSoldHover=m(n.totalSold,a.derivedAvailability,n.projectStatus),n.derivedAvailability=a.derivedAvailability,a.reachabilityInfo&&(n.reachabilityInfo=JSON.parse(decodeURIComponent(a.reachabilityInfo))),n.minResalePrice=e(a.minResalePrice,0,void 0,"L"),n.maxResalePrice=e(a.maxResalePrice,0,void 0,"L"),n.orgAvgPricePerUnitArea=a.avgPricePerUnitArea?a.avgPricePerUnitArea:a.resalePricePerUnitArea,n.minPricePerUnitArea=e(a.minPricePerUnitArea),n.maxPricePerUnitArea=e(a.maxPricePerUnitArea),n.maxResaleOrPrimaryPrice=a.maxResaleOrPrimaryPrice,n.minResaleOrPrimaryPrice=a.minResaleOrPrimaryPrice,n.projectLocalityScore=a.projectLocalityScore,n.projectSocietyScore=a.projectSocietyScore,n.projectSafetyRank=a.projectSafetyRank,n.isResale=a.isResale,n.isPrimary=a.isPrimary,n.isSoldOut=a.isSoldOut,n.projectLivabilityRank=a.projectLivabilityRank,n.possessionDate=f(a.possessionDate),n.possessionFullYear=parseInt(f(a.possessionDate,"yyyy"),10),n.possessionDateTstamp=a.possessionDate,n.avgPriceRiseMonths=a.avgPriceRiseMonths,n.avgPriceRiseMonthsHtml="in past "+a.avgPriceRiseMonths+" months",n.avgPriceRisePercentage=a.avgPriceRisePercentage,n.projectRating=this.parseProjectRating(parseInt(a.locality.averageRating)),n.imageThumbUrl=b.getImagePath(a.imageURL,"THUMBNAIL"),n.has3DImages=a.has3DImages,n.landmarkImages=a.landmarkImages,n.livabilityDeviation=b.roundDoubleDecimal((n.projectLocalityScore-n.livabilityScore)/n.projectLocalityScore*100),n.bCrum=[{text:"India Property",link:"/",target:"_self"},{text:"Property in "+n.locality.suburb.city.label,link:n.locality.suburb.city.overviewUrl,display:!0},{text:"Property in "+n.locality.label,link:n.locality.overviewUrl,display:!0},{label:"project",text:n.builderName+" "+n.name,link:n.URL}],n.lastUpdatedAt=a.lastUpdatedDate,void 0!==d){var o=d.pricePerUnitArea,p=d.possessionDate;o&&o.min&&o.max?n._rateColor=g(a.minPricePerUnitArea,o.min,o.max):n._rateColor=g(a.minPricePerUnitArea,void 0,void 0),p&&p.min&&p.max?n._dateColor=h(a.possessionDate,p.min,p.max):n._dateColor=h(a.possessionDate,void 0,void 0)}a.images&&(n.images=a.images),a.projectAmenities&&(n.amenities=this.parseAmenities(a.projectAmenities)),a.neighborhood&&(n.neighborhood=this.parseNeighborhood(a.neighborhood)),a.specifications&&(n.specifications=this.parseSpecifications(a.specifications)),a.description&&a.description.length>500?(n.projectDescriptionFull=a.description,n.projectDescriptionSmall=b.stripHtml(a.description).substring(0,300)+"... "):n.projectDescriptionSmall=a.description,a.loanProviderBanks&&(n.loanProviderBanks=a.loanProviderBanks),n.projectSize=a.sizeInAcres?a.sizeInAcres+" Acres":"NA";var q=a.propertyUnitTypes;q&&1==q.length&&"Plot"==q[0]&&(n.hasOnlyPlots=!0),n.hasResaleProperty=!1,n.showPricePerAreaCheckbox=!1,n.properties=a.properties,c&&a.properties&&_.each(n.properties,function(a){var b=a.size?"("+a.size+" "+a.measure+")":"";a.compareLabel=n.hasOnlyPlots?"Plot "+b:a.unitName+" "+b,a.compareBathroomsLabel=n.hasOnlyPlots?"NA":a.bathrooms,a.size=e(a.size),a.pricePerUnitArea=e(a.pricePerUnitArea),a.resalePricePerUnitArea=e(a.resalePricePerUnitArea),n.hasResaleProperty=n.hasResaleProperty||a.resalePrice?!0:!1,n.showPricePerAreaCheckbox=a.budget||a.resalePrice?!0:n.showPricePerAreaCheckbox}),a.offers&&(n.offers=a.offers),a.minSize&&(n.minSize=e(a.minSize)),a.maxSize&&(n.maxSize=e(a.maxSize)),a.maxPrice&&a.minPrice?n.minMaxPrice=a.minPrice+" - "+a.maxPrice:n.minMaxPrice="Not specified",a.maxSize&&a.minSize?n.minMaxSize=n.minSize+" - "+n.maxSize:n.minMaxSize="Not specified";var r=n.distinctBedrooms.indexOf(0);r>=0&&n.distinctBedrooms.splice(r,1),n.bhkInfo="",n.distinctBedrooms.length&&(n.bhkInfo+=n.distinctBedrooms.join(",")+" BHK "),n.bhkInfo+=n.propertyUnitTypes.join(","),n.newPriceHtml="Price On Request",n.minPrice&&n.maxPrice&&(n.newPriceHtml='<i class="pt pt-icon-inr"></i><span>'+n.minPrice+'</span> - <i class="pt pt-icon-inr"></i><span>'+n.maxPrice+"</span>"),n.isResale&&(n.minResalePrice&&n.maxResalePrice?n.resalePriceHtml='<i class="pt pt-icon-inr"></i><span>'+n.minResalePrice+'</span> - <i class="pt pt-icon-inr"></i><span>'+n.maxResalePrice+"</span>":n.resalePriceHtml="Price On Request"),n.sizeHtml="Size On Request";var s=n.propertySizeMeasure?n.propertySizeMeasure:"sq ft";return a.minSize&&a.maxSize&&(a.minSize!=a.maxSize?n.sizeHtml=n.minSize+" "+s+" - "+n.maxSize+" "+s:n.sizeHtml=n.maxSize+" "+s),n.displayPriceunitsHtml=n.displayPriceunitsHtmlMarker="",a.minPricePerUnitArea&&"NA"!==n.minPricePerUnitArea?n.displayPriceHtml='<i class="pt pt-icon-inr"></i><span>'+n.minPricePerUnitArea+"</span>":(n.displayPriceClass="rna",n.displayPriceHtml=""),n._scoreColor=i(a.livabilityScore,1,10),a.livabilityScore&&"NA"!==a.livabilityScore?n.livabilityScoreHtml=a.livabilityScore+"/10":(n.livabilityScoreClass="sna",n.livabilityScoreHtml=""),n.displayPriceunitsClass="rna",n.displayPriceunitsHtmlHover=k(a.avgPricePerUnitArea,a.derivedAvailability,n.projectStatus,a.resalePricePerUnitArea),n.displayPriceunitsHtml=j(a.avgPricePerUnitArea,a.derivedAvailability,n.projectStatus,a.resalePricePerUnitArea),isNaN(n.displayPriceunitsHtml)?n.displayPriceunitsHtmlMarker=n.displayPriceunitsHtml:(a.avgPricePerUnitArea?n.displayPriceunitsHtml=e(n.displayPriceunitsHtml,void 0,void 0,void 0,-1):n.displayPriceunitsHtml=e(n.displayPriceunitsHtml,void 0,void 0,void 0,-1)+" (R)",n.displayPriceunitsHtmlMarker='<i class="pt pt-icon-inr"></i><span>'+n.displayPriceunitsHtml+"</span>/"+s),n.possessionDateHtml=n.possessionDate,a.possessionDate&&"NA"!==n.possessionDate||(n.possessionDateClass="dna",n.possessionDateHtml=""),n.URL=a.URL,n.builderNameHtml='Builder: <span style="padding-left:2px;">'+n.builderName+"</span>",n.avgPriceRisePercentageHtml="",n.avgPriceRisePercentage&&(n.avgPriceRisePercentage>0?n.avgPriceRisePercentageHtml='<i class="pt pt-icon-arrow-up"></i>'+n.avgPriceRisePercentage+"%<small>in last 6 months</small>":n.avgPriceRisePercentageHtml='<i class="pt pt-icon-arrow-down"></i>'+-1*n.avgPriceRisePercentage+"%<small>in last 6 months</small>"),n.maxDiscount=e(a.maxDiscount,void 0,void 0,void 0,-1),n.isCouponAvailable=a.isCouponAvailable,n.couponsInventoryLeft=a.couponsInventoryLeft,n.minDiscountPrice=e(a.minDiscountPrice,0),n.maxDiscountPrice=e(a.maxDiscountPrice,0),n.numberOfTowers=a.numberOfTowers,n.hasTownship=a.hasTownship,n.avgFlatsPerFloor=a.avgFlatsPerFloor,n.delayInMonths=a.delayInMonths,n.avgLoadingPercentage=a.avgLoadingPercentage,n.hasProjectInsightReport=a.hasProjectInsightReport,n},parseDiscussed:function(a,c){c||(c=4);for(var d=[],e=0;e<a.length&&c>e;e++)d.push({projectId:a[e].projectId,url:a[e].URL,name:(a[e].builder?a[e].builder.name+" ":"")+a[e].name,minprice:a[e].minPrice?b.formatPrice(a[e].minPrice):"",maxprice:a[e].maxPrice?b.formatPrice(a[e].maxPrice):"",subName:a[e].totalProjectDiscussion?a[e].totalProjectDiscussion:"",subSubName:a[e].address,avgPriceRisePercentage:a[e].avgPriceRisePercentage?parseFloat(a[e].avgPriceRisePercentage).toFixed(1):0,avgPriceRiseMonths:a[e].avgPriceRiseMonths,propertyId:a[e].projectId,imageUrl:a[e].imageURL,altText:a[e].mainImage?a[e].mainImage.altText:""});return d},demandVsProjectParser:function(a,b,c){var d=0,e=[],f=[],g=[],h=[];_.each(a,function(a){e.push(a[0].extraAttributes.sumDemand)}),_.map(e,function(a){d+=a}),_.each(a,function(a){100*a[0].extraAttributes.sumDemand/d>=0&&(a[0].projectId===b?f.push({percentage:100*a[0].extraAttributes.sumDemand/d,project:a[0].projectName}):h.push({percentage:100*a[0].extraAttributes.sumDemand/d,project:a[0].projectName}))});var i=_.sortBy(h,"percentage"),j=i.reverse();return _.each(j,function(a,b){c>b&&f.push({percentage:a.percentage,project:a.project})}),g.xAxis=_.pluck(f,"project"),g.yAxis=_.pluck(f,"percentage"),g},scatterDiagramParser:function(a){var c=[],d=new Date;return _.each(a,function(a){var e=new Date(a.possessionDate-d.getTime()).getFullYear()-1970,f=a.projectStatus,g=a.locality.avgPricePerUnitArea-a.avgPricePerUnitArea,h=b.roundDoubleDecimal(Math.abs(g));"undefined"!=typeof a.minPricePerUnitArea&&("Under Construction"===a.projectStatus?(f="&gt;2 yrs to completion",0===e?f="&lt;1 yrs to completion":1===e&&(f="1-2 yrs to completion")):"Launch"===a.projectStatus?f="Lauching soon":"Completed"===a.projectStatus?f="Ready to move in":"Pre Launch"===a.projectStatus&&(f="New launch"),c.push({projectId:a.projectId,projectName:a.builder.name+" "+a.name,possessionDate:a.possessionDate,projectStatus:a.projectStatus,minPricePerUnitArea:a.minPricePerUnitArea,yearsApart:e,drawProjectStatus:f,viewCurrentStatus:b.getProjectStatusKey(a.projectStatus),locAvgPricePerUnitArea:h,priceStatusByLoc:g>0?"underpriced":"overpriced"}))}),c}}}])}),define("directives/common/pt-leadforwardflow",["app","text!views/directives/common/pt-leadforwardflow.html","services/citiesService","services/localityService","services/projectService","parsers/projectParser","formatters/common"],function(a,b){a.directive("ptLeadforwardflow",["LocalityService","CityService","ProjectService",function(){return{restrict:"A",template:b,scope:{lead:"=",displaythanks:"="},controller:["$scope","$rootScope","CityService","ProjectService","ProjectParser","Formatter","$timeout",function(a,b,c,d,e,f,g){var h=function(a,b,c){};a.lead.isOtpVerified&&a.lead.isPersonalAdviceFormFill&&h("enquiry","viewed","step2-morelinks"),a.GAeventOnMore=function(b){a.lead.isOtpVerified&&a.lead.isPersonalAdviceFormFill?h("enquiry","clicked","step2-morelinks-"+b):a.lead.isOtpVerified||a.lead.isPersonalAdviceFormFill?a.lead.isOtpVerified&&!a.lead.isPersonalAdviceFormFill?h("enquiry","clicked","step3-morelinks-"+b):!a.lead.isOtpVerified&&a.lead.isPersonalAdviceFormFill&&h("enquiry","clicked","step3-morelinks-"+b):h("enquiry","clicked","step4-morelinks-"+b)},c.getMainCities().then(function(c){var h=_.reject(c.data,function(a){return 1!==a.displayPriority}),i=[];_.each(h,function(a){i.push(a.label)});var j=i.indexOf(f.ucword(b.cityToShow))>-1?b.cityToShow:"bangalore";if("All Cities"===b.cityToShow&&a.lead.project_id)var j=i.indexOf(f.ucword(a.lead.city.toLowerCase()))>-1?a.lead.city.toLowerCase():"bangalore";var k=_.where(h,{label:f.ucword(j)}),l="undefined"!=typeof k?k[0].id:2,m=9,n={projectId:a.lead.project_id?a.lead.project_id:b.urlData.project_id,localityId:a.lead.locality_id?a.lead.locality_id:b.urlData.localityId,cityId:l,cityName:j.toLowerCase(),count:m};a.displayDataArr=[{name:"AppPromotion",image:"lead-app-promo",text:"Mobile APP: Search Properties On The Go",url:"/mobile-apps"},{name:"propGuide",image:"lead-propguide",text:"Propguide: Real Estate Simplified",url:"/guide/",target:"_self"},{name:"HomeLoanGuide",image:"lead-homeloan",text:"Home Loan Info: All About Home Loan",url:"/homeloan"},{name:"LocalityOverview",image:"lead-locality-overview",
text:"Locality Info: Know More About Locality",url:"/"+n.cityName+"/all-localities",target:"_self"},{name:"CityOverview",image:"lead-city-overview",text:"City Info: Know More About City",url:"/"+n.cityName+"-real-estate"},{name:"Portfolio",image:"lead-portfolio",text:"Portfolio: Track Property Prices",url:"/property-portfolio-tracker"}];var o=function(){var a=[];return a="undefined"!=typeof b.CURRENT_ACTIVE_PAGE&&(b.CURRENT_ACTIVE_PAGE.indexOf("-listing-")>-1||"map-projectdetail"===b.CURRENT_ACTIVE_PAGE||b.CURRENT_ACTIVE_PAGE.indexOf("-OVERVIEW")>-1)?[0,1,2,3]:_.contains(["projectdetail","property"],b.CURRENT_ACTIVE_PAGE)&&"undefined"!=typeof b.CURRENT_ACTIVE_PAGE?[0,3,2,5]:[0,2,1,4]},p=function(a){g(function(){require(["slickjs"],function(){$("#outerCarouselLead").slick({slidesToShow:3,slidesToScroll:2,lazyLoad:"ondemand",arrows:!0,variableWidth:!0}),angular.element(".slickSlider").removeClass("hide").addClass("show")})});var b=[];return _.each(a,function(a){var c=e.parseProject(a,!0),d={projectName:c.builder.name+" "+c.name,locality:c.locality.label,possession:c.possessionDate,imageUrl:c.imageURL+"?width=360&height=270",landingUrl:c.URL};b.push(d)}),b};if(n.projectId&&"undefined"!=typeof n.projectId)d.getSimilarProjects(n.projectId,!1,4).then(function(b){var c=p(b);a.displayProjects=c});else{if(n.localityId&&"undefined"!=typeof n.localityId&&i.indexOf(f.ucword(b.cityToShow))>-1)var q={filters:{and:[{equal:{localityId:n.localityId}}]},paging:{start:0,rows:m}};else if("undefined"!=typeof n.cityId)var q={filters:{and:[{equal:{cityId:n.cityId}}]},paging:{start:0,rows:m}};d.getProjectList(JSON.stringify(q),void 0,function(b){var c=p(b.data.items);a.displayProjects=c},!1,!1,!0)}a.subPageUpperContent=o()})}]}}])}),define("directives/common/pt-enquireForm",["app","text!views/directives/common/pt-enquireForm.html","services/signupService","directives/common/pt-lead","directives/common/pt-leadVerification","directives/common/pt-leadforwardflow"],function(a,b){a.directive("ptEnquireform",["$timeout","$modal",function(a,c){return{restrict:"A",template:b,scope:{initial:"=",localityEnabled:"=",cityEnabled:"=",redirectTo:"=",isModal:"=",showform:"=",stage:"=?"},link:function(a,b,c){a.$on("$destroy",function(){b.remove()})},controller:["$rootScope","$scope","$http","$document","$window","$compile","GlobalService","LeadService","SignupService",function(b,d,e,f,g,h,i,j,k){d.loggedIn=i.isLoggedIn(),d.leadData={},"step2"===d.stage&&(d.leadData=d.initial),d.closeform=function(){b.$broadcast("closeCarouselLead")},d.localityEnabled=!1;var l=function(a){var b=i.getAPIURL("data/v1/entity/user/enquired?projectId="+a.toString());return e({method:"GET",url:b}).then(function(a){return"2XX"===a.data.statusCode?a.data.data.hasValidEnquiry:!1})},m=function(){d.stage=d.stage?d.stage:"step1"},n=function(a,b,c){};d.$on("leadposted",function(a,b){b&&(b.leadData.isModal?(d.stage="step2",d.leadData=b.leadData,d.leadData.enquiryid=b.enquiryid,d.leadData.isOtpVerified=b.isOtpVerified,d.leadData.isPersonalAdviceFormFill=b.isPersonalAdviceFormFill,d.leadData.status=b.status,d.leadData.userId=b.userId,angular.element(".modal").addClass("formSecViewInfo")):(c.open({templateUrl:"views/modal/leadVerification.html",controller:["$scope","$modalInstance",function(a,c){a.stage="step2",a.leadData=b.leadData,a.leadData.enquiryid=b.enquiryid,a.leadData.status=b.status,a.leadData.isOtpVerified=b.isOtpVerified,a.leadData.isPersonalAdviceFormFill=b.isPersonalAdviceFormFill,a.leadData.userId=b.userId,a.isModal=!1;var d=function(a){angular.element("div").hasClass("pt-advice")?a?(n("enquiry","clicked","step2-personlisation-close"),n("enquiry","viewed","step3-morelinks")):(n("enquiry","clicked","step3-personlisation-close"),n("enquiry","viewed","step4-morelinks")):(n("enquiry","clicked","step2-OTPVerfication-close"),n("enquiry","viewed","step3-morelinks"))},e=function(a,b){a&&b?n("enquiry","clicked","step2-morelinks-close"):n("enquiry","clicked","step3-morelinks-close")};a.cancel=function(){"step2"===a.stage?(d(b.isOtpVerified),a.stage="step5"):"step3"===a.stage||"step5"===a.stage?(e(b.isOtpVerified,b.isPersonalAdviceFormFill),"step3"===a.stage&&(a.stage="step5"),c.dismiss("cancel")):(a.stage="step5",c.dismiss("cancel"))},a.$on("leadpushed",function(a,b){a.stopPropagation()})}],windowClass:"formSecViewInfo",backdrop:"static"}),d.stage="step3"),d.leadData.isOtpVerified&&d.leadData.isPersonalAdviceFormFill&&(d.displaythanks=!0))}),d.$on("leadVerified",function(b,c){d.stage="step5","undefined"!=typeof c&&(d.displaythanks=!0),a(function(){d.$emit("leadpushed",c)},1e4)}),d.showLeadForm=m,d.$watch("initial",function(b){b?(d.initial=j.updateLeadData(b,d.isModal),b.projectId&&i.isLoggedIn()?l(b.projectId).then(function(b){b?(d.stage="step4",a(function(){d.$emit("leadpushed",b)},4e3)):m()}):m()):void 0!==b&&m()}),d.openSignIn=function(){k.openSignUp("/portfolio/index")}}]}}])}),define("services/leadService",["app","services/globalService","directives/common/pt-enquireForm"],function(a){a.factory("LeadService",["$rootScope","$modal","GlobalService","$http",function(a,b,c,d){var e=function(a,b){a.title="Interested in this project?";var c="",d=[];if(a.propertyDetail&&(a.propertyDetail.unitName?d=a.propertyDetail.unitName.split("+"):a.propertyDetail.property&&a.propertyDetail.property.unitName&&(d=a.propertyDetail.property.unitName.split("+")),c="undefined"!=typeof d?d[0]:""),a.projectName?(a.interested='Thanks for showing your interest in <span class="font-weight">'+a.projectName+"</span>.",b?c?a.title='Interested in <span class="font-weight">'+c+" of "+a.projectName+"</span>?":a.title='Interested in <span class="font-weight">'+a.builderName+" "+a.projectName+"</span>?":a.title='Interested in <span class="font-weight">'+a.projectName+"</span>?"):a.areaName?(a.interested='Thanks for showing your interest in <span class="font-weight">'+a.areaName+"</span>.",a.title='Interested in <span class="font-weight">'+a.areaName+"</span>?"):a.cityLabel?(a.interested='Thanks for showing your interest in <span class="font-weight">'+a.cityLabel+"</span>.",a.title='Interested in <span class="font-weight">'+a.cityLabel+"</span>?"):(a.interested="Thanks for showing your interest",a.homePage&&(a.title="Interested in a property?")),a.interested="Please fill in your details below and we will get in touch with you shortly",a.type){var e="",f="",g="";a.propertyDetail&&(e=a.propertyDetail.unitName?a.propertyDetail.unitName:"",f=e+",",g=a.propertyDetail.size?a.propertyDetail.size+" "+a.propertyDetail.measure+", ":""),"floorPlan"===a.type?(a.query="Please send me floor plan of "+f+a.builderName+", "+a.projectName,b&&(c?a.title="Interested in floor plan of "+c+" - "+a.projectName:a.title="Interested in floor plan of "+a.builderName+", "+a.projectName+" ?")):"moreInfo"===a.type?(a.query="Please send me more information of "+f+a.builderName+", "+a.projectName,b&&(e?a.title="Interested to know more about "+e+"?":a.title="Interested to know more about "+a.builderName+", "+a.projectName+" ?")):"size"===a.type?(a.query="Please arrange callback for me about "+f+g+a.builderName+", "+a.projectName,c?a.title="Interested in size of "+c+" - "+a.projectName+"?":a.title="Interested in the size of this project?"):"newPrice"===a.type||"resalePrice"===a.type?(a.query="Please send me price list of "+f+g+a.builderName+", "+a.projectName,c?a.title="Interested in price of "+c+" - "+a.projectName+"?":a.title="Interested in this price list?"):"homeloan"===a.type?(a.title="Interested in taking a homeloan?",a.homeloan_flag="true",a.query="I am interested in taking a homeloan for "+f+a.builderName+", "+a.projectName):"locality-city"===a.type?b||(a.title="Interested in a property?",a.query="I am interested in {locality}, {city}. Please arrange a callback for me."):"home-page"===a.type?(a.title="Interested in a property?",a.query="I am interested in {locality}, {city}. Please arrange a callback for me."):"contactus"===a.type?(a.title="Want a call back?",a.query="I am interested in {locality}, {city}. Please arrange a callback for me."):"my-account"===a.type?(a.title="Interested in a property?",a.query="I am interested in buying a property in {city}. Please arrange a callback for me."):"promise-project"===a.type?(a.title="Let us help you",a.interested="Leave your contact details below and receive a call back at the earliest",a.query="I am interested in {locality}, {city}. Please arrange a callback for me."):"promise-listing"===a.type?(a.title="Letâ€™s save some time",a.interested="Just tell us where to reach you and we shall take care of the rest",a.query="I am interested in {locality}, {city}. Please arrange a callback for me."):"promise-overview"===a.type&&(a.title="Letâ€™s save some time",a.interested="Just tell us where to reach you and we shall take care of the rest",a.query="I am interested in {locality}, {city}. Please arrange a callback for me.")}else if(a.projectName){var h="";a.propertyDetail&&(h=a.propertyDetail.punitName?a.propertyDetail.punitName+", ":""),a.query="Please arrange callback for me about "+h+a.builderName+", "+a.projectName}else a.areaName&&(a.title="Interested in a property?",a.query="I am interested in "+a.areaName+". Please arrange a callback for me.");return a},f=function(a,b){var d=c.getCookie("enquiry_info");d&&d.length&&'"'==d[0]&&'"'==d[d.length-1]&&(d=JSON.parse(d)),d=JSON.parse(d);var f=["name","email","phone","country","budget","bhk"];return a&&d&&$.each(f,function(b,c){d[c]&&(a[c]=decodeURIComponent(d[c]))}),a=e(a,b)},g=function(a,b,c){var e="data/v1/entity/enquiry/"+a;c&&(e=e+"?otp="+c);var f={"Content-Type":"application/json"};return d({method:"PUT",url:e,data:b,headers:f})},h=function(a,b,c){},i=function(a,c,d){b.open({templateUrl:"views/modal/leadForm.html",controller:["$scope","$rootScope","$modalInstance",function(b,e,f){b.cityEnabled=c?!0:!1,b.localityEnabled=d?!0:!1,b.myData=a,b.isModal=!0,b.step={},b.step.stage="step1";var g=function(a){angular.element("div").hasClass("pt-advice")?a?(h("enquiry","clicked","step2-personlisation-close"),h("enquiry","viewed","step3-morelinks")):(h("enquiry","clicked","step3-personlisation-close"),h("enquiry","viewed","step4-morelinks")):(h("enquiry","clicked","step2-OTPVerfication-close"),h("enquiry","viewed","step3-morelinks"))},i=function(a,b){a&&b?h("enquiry","clicked","step2-morelinks-close"):h("enquiry","clicked","step3-morelinks-close")};b.$on("leadposted",function(a,c){b.cancel=function(){"step2"===b.step.stage?(g(c.isOtpVerified),b.step.stage="step5"):"step3"===b.step.stage||"step5"===b.step.stage?(i(c.isOtpVerified,c.isPersonalAdviceFormFill),"step3"===b.step.stage&&(b.step.stage="step5"),f.dismiss("cancel")):f.dismiss("cancel")}}),b.$on("leadpushed",function(a,b){a.stopPropagation()})}],backdrop:"static"}),j(a,"show","Opened")},j=function(b,c,d){var e=f(b),g={},h="";h=e.email?"yes":"no",g["Form Name"]=h+"-"+e.formlocationinfo,g["Page Name"]=a.CURRENT_ACTIVE_PAGE,g["Lead Type"]=e.leadType};return{updateLeadData:f,openLeadForm:i,enquiryTracking:j,updateLeadByPUT:g}}])}),define("configs/widgetConfig",["app"],function(a){a.factory("WidgetConfig",[function(){return{B2BDashBoard:{PriceTrend:{name:"Price Trend",title:{text:"Price Trend"},tag:"",type:"graph",widgetData:{displayInfo:{title:{text:"Graph / Chart"},chart:{type:"spline",backgroundColor:"#e7efef",borderRadius:0},subtype:"line",tooltip:{crosshairs:!0,pointFormat:'<span style="color:{series.color}">{series.name}</span>: â‚¹{point.y}<br/>'},xAxis:{categories:[],tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{gridLineWidth:0,title:{text:"Price (Rs per sq ft)"},labels:{format:"{value}",formatter:function(){return"â‚¹"+Highcharts.numberFormat(this.value,0,"",",")}}},exporting:{buttons:{contextButton:{menuItems:[{text:"Print",onclick:function(){this.print()}},{text:"Save as PNG",onclick:function(){this.exportChart({type:"image/png"})},separator:!1}]}}},plotOptions:{line:{events:{legendItemClick:function(){return!0}}}},seriesMeta:{name:[],data:"price"},series:[],noData:{style:{fontWeight:"bold",fontSize:"18px",fontFamily:"Lato Bold",color:"#6b727a"}},lang:{noData:"No matching projects found to plot in the graph"}},entities:["price","effectiveDate"]}},KeyData:{name:"Key Data",title:{text:"Key Data"},tag:"",type:"column",widgetData:{displayInfo:{title:{text:"Graph / Chart"},chart:{backgroundColor:"#e7efef",borderRadius:0},subtype:"column",xAxis:{categories:[],tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{gridLineWidth:0,title:{text:""},labels:{format:"{value}",formatter:function(){return Highcharts.numberFormat(this.value,0,"",",")}}},exporting:{buttons:{contextButton:{menuItems:[{text:"Print",onclick:function(){this.print()}},{text:"Save as PNG",onclick:function(){this.exportChart({type:"image/png"})},separator:!1}]}}},plotOptions:{line:{events:{legendItemClick:function(){return!0}}}},seriesMeta:{name:[],data:"price"},series:[],noData:{style:{fontWeight:"bold",fontSize:"18px",fontFamily:"Lato Bold",color:"#6b727a"}},lang:{noData:"No matching projects found to plot in the graph"}},entities:["price","effectiveDate"]}}},GraphAnalysis:{chart:{backgroundColor:"transparent"},xAxis:{},yAxis:{title:{text:null},allowDecimals:!1,gridLineWidth:0,minorGridLineWidth:0,labels:{format:"{value}",formatter:function(){return Highcharts.numberFormat(this.value,0,"",",")}}},exporting:{buttons:{contextButton:{menuItems:[{text:"Print",onclick:function(){this.print()}},{text:"Save as PNG",onclick:function(){this.exportChart({type:"image/png"})},separator:!1}]}}},credits:!1,noData:{style:{fontWeight:"bold",fontSize:"18px",fontFamily:"Lato Bold",color:"#6b727a"}},lang:{noData:"No matching projects found to plot in the graph"}}}}])}),define("parsers/priceTrend",["app"],function(a){a.factory("PriceTrendParser",["$filter",function(a){var b=a("priceFormat"),c=(a("dateFormat"),a("dateFormatForGraphs")),d=a("sortBy");return{priceTrendData:function(a,e,f,g){var h,i,j,k,l,m,n,o,p,q='<i class="pt pt-icon-inr"></i>',r={locality:{},data:[]};r[e]={};for(h in a.data){j=a.data[h],o={};for(m in j){for(i=j[m],l=0,k=i.length;k>l;l++){switch(r.locality[h]=i[l].localityName,n=i[l].extraAttributes,e){case"month":p="MMM `yy";break;case"year":case"financialYear":p={frequency:"year",yearType:g};break;case"quarter":p={frequency:"quarter",yearType:g}}r[e][m]=c(m,p)}n.price=b(n.wavgPricePerUnitAreaOnLtdSupply,void 0,void 0,void 0,-1),n.resale=b(n.wavgSecondaryPricePerUnitAreaOnLtdSupply,void 0,void 0,void 0,-1),"NA"!==n.price&&(n.price=q+n.price),"NA"!==n.resale&&(n.resale=q+n.resale),o[m]=n}r.data.push({id:h,sale:o})}return r.sortedIntervals=j=d(Object.keys(r[e]),-1),k=j.length,f?(r.data=_.sortBy(r.data,function(a){if("priceAppreciation"===f[0]){var b=a.sale[j[0]]?a.sale[j[0]].wavgPricePerUnitAreaOnLtdSupply:void 0,c=a.sale[j[k-1]]?a.sale[j[k-1]].wavgPricePerUnitAreaOnLtdSupply:void 0;return b&&c?-((c-b)/b):9999}if("sumInventory"===f[0])return-a.sale[j[k-1]].sumInventory;for(var d=0,e=0;e<j.length;e++)a.sale[j[e]]&&(d+=a.sale[j[e]][f]);return-d}),r):r},keyData:function(a,b,e){var f,g,h,i,j,k,l,m,n={city:{},data:[]};n[b]={};for(f in a.data){h=a.data[f];for(k in h){for(g=h[k],j=0,i=g.length;i>j;j++){switch(n.city[f]=g[j].cityName,l=g[j].extraAttributes,b){case"month":m="MMM `yy";break;case"year":case"financialYear":m={frequency:"year",yearType:e};break;case"quarter":m={frequency:"quarter",yearType:e}}n[b][k]={epoch:k,toString:function(){return c(this.epoch,m)}}}h[k]={sumUnitsSold:l.sumUnitsSold?l.sumUnitsSold:"NA",sumLaunchedUnit:l.sumLaunchedUnit?l.sumLaunchedUnit:"NA",sumInventory:l.sumInventory?l.sumInventory:"NA",sumUnitsDelivered:l.sumUnitsDelivered?l.sumUnitsDelivered:"NA",wavgInventoryOverhangOnInventory:l.wavgInventoryOverhangOnInventory?l.wavgInventoryOverhangOnInventory:"NA",inventoryOverhang:l.sumInventory&&l.sumRateOfSale?l.sumInventory/l.sumRateOfSale:"NA",areaLaunched:l.wavgSizeOnLaunchedUnit*l.sumLaunchedUnit||"NA",areaSold:l.wavgSizeOnUnitsSold*l.sumUnitsSold||"NA",areaUnsold:l.wavgSizeOnInventory*l.sumInventory||"NA",areaDelivered:l.wavgSizeOnUnitsDelivered*l.sumUnitsDelivered||"NA",wavgSizeOnLaunchedUnit:l.wavgSizeOnLaunchedUnit?l.wavgSizeOnLaunchedUnit:"NA",wavgSizeOnUnitsSold:l.wavgSizeOnUnitsSold?l.wavgSizeOnUnitsSold:"NA",wavgSizeOnInventory:l.wavgSizeOnInventory?l.wavgSizeOnInventory:"NA",wavgSizeOnUnitsDelivered:l.wavgSizeOnUnitsDelivered?l.wavgSizeOnUnitsDelivered:"NA"}}}return n.sortedIntervals=h=d(Object.keys(n[b]),-1),i=h.length,n.data=a.data,n}}}])}),define("controllers/common/commonFullScreenCtrl",["app"],function(a){a.controller("commonfullscreenctrl",["$scope","$rootScope","$modalInstance","images","index","unique","leadData","has3dimages","setFloorPlanFromListing","landmarkCount","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){a.optionsFullView={width:1330,height:800,imageWidth:1040,imageHeight:780,width100Proc:!0,height100Proc:!0,ptzoomControlVisible:!0,thumbnailWidth:100,thumbnailHeight:50,thumbnailMargin:5},a.images=d,a.index=e,a.unique=f,a.leadData=g,a.has3dimages=h,a.setFloorPlanFromListing=i,a.landmarkCount=j,a.collapse=function(){c.close(a.index),b.CURRENT_ACTIVE_PAGE,b.$broadcast("youtubeCollapse","collapse")}}])}),define("text!views/directives/common/pt-carousel.html",[],function(){return'<div data-ng-keyup="keypress($event)" tabindex="1" class="pt-carousel {{options.skin}}">\n    <div class="pt-carousel-collection" data-ng-style="{height: options.height+\'px\'}">\n        <div class="pt-carousel-left-panel" data-ng-class="{\'carousel-fullPhoto\' : collapseleadform || !leadData}">\n            <div data-ng-if="totalImages>1" class="bannerControls">\n                <div data-ng-click="Previous()"\n                     analytics-on\n                     data-analytics-event="Gallery View"\n                     data-analytics-category="Project Details View"\n                     data-analytics-label="Previous"\n                     class="leftNav"><i class="pt pt-icon-chevron-circle-left"></i></div>\n                <div data-ng-click="Next()"\n                     analytics-on\n                     data-analytics-event="Gallery View"\n                     data-analytics-category="Project Details View"\n                     data-analytics-label="Next"\n                     class="rightNav"><i class="pt pt-icon-chevron-circle-right"></i></div>\n            </div>\n            <ul class="carouselImageViewer">\n                <li data-ng-repeat="slide in ptslides">\n                    <div class="pt-cont-info" data-ng-if="slide.visible">\n                        <div data-ng-if="slide.mainTitle && slide.locality && slide.city">\n                            <div class="pt-cont-buil-text-info pull-left">\n                                <div class="pt-cout-buil-city-info">\n                                    {{slide.mainTitle}}, <span>{{slide.locality}}, {{slide.city}}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-ng-if="slide.walkThrough && $root.floorImageTypeWT" class="projDescInfo">This video is an artistic impression of the apartment. It may not be exact representation.</div>\n                    <div data-ng-if="slide.visible && slide.type==\'Construction\'" class="gallWrapperInfo">\n                        <span class="gallDropdownInfo">{{selectedconstructionImage.type}}<i class="pt pt-icon-angle-down"></i></span>\n                        <div class="gallPanor-overlay statViewInfo">\n                            <div class="panorDetailViewInfo">\n                                <ul class="ulTableView">\n                                    <li data-ng-click="SetImage(conf.startindex, null, null, null, true)" data-ng-repeat="conf in constructionDetail.config">\n                                        <span data-ng-bind-html="conf.type"></span>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-ng-if="slide.visible && slide.type==\'Neighborhood\'" class="gallWrapperInfo">\n                        <span class="gallDropdownInfo">{{selectedneighborImage.type}} ({{selectedneighborImage.count}})<i class="pt pt-icon-angle-down"></i></span>\n                        <div class="gallPanor-overlay statViewInfo">\n                            <div class="panorDetailViewInfo">\n                                <ul class="ulTableView">\n                                    <li data-ng-click="SetImage(conf.startindex, null, null, null, true)" data-ng-repeat="conf in neighbourDetail.config">\n                                        <span>{{conf.type}} <span class="font-weight">({{conf.count}})</span></span>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-ng-if="slide.visible && slide.type==\'Project & Floor Plans\' && slide.unitName" class="gallWrapperInfo">\n                        <span class="gallDropdownInfo">\n                                                    <span class="pull-left">{{selectedProperty.unitName}}\n                                                        <span class="gallPropSizeInfo" data-ng-if="selectedProperty.size">{{selectedProperty.size}}&nbsp;{{selectedProperty.measure}}</span>\n                        <span class="gallPropSizeInfo" data-ng-if="!selectedProperty.size && selectedProperty.carpetArea">{{selectedProperty.carpetArea}}&nbsp;{{selectedProperty.measure}} (Carpet Area)</span>\n                        </span>\n                        <i class="pt pt-icon-angle-down"></i>\n                        </span>\n                        <div class="gallPanor-overlay" pt-property-config-overlay></div>\n                    </div>\n                    <!--panorama-->\n                    <div data-ng-if="slide.visible && slide.floor3dImage && slide.panoramaViewPath" data-ng-click="expandTour(leadData.projectId, slide.panoramaUnit, slide.panoramaViewPath, null, \'name\')" class="panor-top-view">\n                        <div class="panor-view-info pull-left marginL10">\n                            <i class="pt pt-icon-panorama panor-icon-view"></i>\n                            <span class="panor-iconText-view">360&deg;</span>\n                            <span class="panor-text-info">Panorama View</span>\n                        </div>\n                    </div>\n                    <div class="pt-carousel-img-cont-info" data-ng-if="slide.visible">\n                        <div class="pt-cont-text-info">\n                            <span class="cont-img-info">({{currentIndex + 1}}/{{totalImages}})</span>\n                            <span data-ng-if="options.height100Proc || options.showLabel" class="proj-desc-img-info">{{slide.displayAltText}}</span>\n                        </div>\n                    </div>\n                    <!-- if slide is not vedio -->\n                    <div data-ng-if="!options.height100Proc && slide.visible && !slide.internalVideo" class="imagerContainer {{slide.imageClass}}" data-ng-style="{width: calWidth+10+\'px\', height: options.height+\'px\'}">\n                        <div data-ng-if="isloadervisible && !$root.floorImageTypeWT" class="carouselLoader">\n                            <div pt-loading-block class="carouselSpin"></div>\n                        </div>\n                        <div data-ng-style="{width: calWidth+10+\'px\', height: options.height+\'px\'}" pt-draggable="{{options.ptzoomControlVisible}}" class="image-info" itemscope="" itemtype="http://schema.org/ImageObject">\n                            <i data-ng-if="slide.video || (slide.walkThrough && $root.floorImageTypeWT)" class="pt pt-icon-youtube-play cursorPointer player" data-ng-click="expand()"></i>\n                            <!--WT-->\n                            <img data-ng-if="slide.walkThrough && $root.floorImageTypeWT" data-ng-click="expand()" class="cursorZoomIn {{slide.slideClass}}" data-ng-src="{{slide.walkThroughThumb}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()" itemprop="contentURL">\n                            <!--image-->\n                            <img data-ng-if="!slide.floor3dImage && !(slide.walkThrough && $root.floorImageTypeWT)"\n                                 analytics-on\n                                 data-analytics-event="Gallery Zoom"\n                                 data-analytics-category="Project Details View"\n                                 data-analytics-label="View: {{slide.text}}"\n                                 data-ng-click="expand()" class="cursorZoomIn {{slide.slideClass}}" data-ng-src="{{slide.largeImage}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()" itemprop="contentURL">\n                            <!--3d-->\n                            <img data-ng-if="slide.floor3dImage && $root.floorImageType3dImg" data-ng-click="expand()" class="cursorZoomIn {{slide.slideClass}}" data-ng-src="{{slide.floor3dImage}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()" itemprop="contentURL">\n                            <!--2d-->\n                            <img data-ng-if="slide.floor3dImage && $root.floorImageTypeImg" data-ng-click="expand()" class="cursorZoomIn {{slide.slideClass}}" data-ng-src="{{slide.largeImage}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()" itemprop="contentURL">\n                        </div>\n                    </div>\n                    <!--resale Listing videos-->\n                    <div data-ng-if="!options.height100Proc && slide.visible && slide.internalVideo" class="imagerContainer {{slide.imageClass}}" data-ng-style="{width: calWidth+10+\'px\', height: options.height+\'px\'}">\n                        <div data-ng-if="isloadervisible" class="carouselLoader">\n                            <div pt-loading-block class="carouselSpin"></div>\n                        </div>\n                        <div data-ng-style="{width: calWidth+10+\'px\', height: options.height+\'px\'}" pt-draggable="{{options.ptzoomControlVisible}}" class="image-info" itemscope="" itemtype="http://schema.org/ImageObject">\n                            <i class="pt pt-icon-youtube-play cursorPointer player" data-ng-click="expand()"></i>\n                            <!--WT-->\n                            <img data-ng-click="expand()" class="cursorZoomIn {{slide.slideClass}}" data-ng-src="{{slide.walkThroughThumb}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()" itemprop="contentURL">\n                        </div>\n                    </div>\n                    <!-- is slide is full screen and not vedio -->\n                    <div data-ng-if="options.height100Proc && slide.visible && !slide.video && !$root.floorImageTypeWT" class="imagerContainer {{slide.imageClass}}" data-ng-style="{width: calWidth+10+\'px\', height: options.divHeight+\'px\'}">\n                        <div data-ng-if="isloadervisible  && !$root.floorImageTypeWT" class="carouselLoader">\n                            <div pt-loading-block class="carouselSpin"></div>\n                        </div>\n                        <div data-ng-style="{width: calWidth+10+\'px\', height: options.divHeight+\'px\'}" pt-draggable="{{options.ptzoomControlVisible}}" class="image-info">\n                            <img data-ng-if="!slide.floor3dImage" data-ng-src="{{slide.largeImage}}" class="{{slide.slideClass}}" alt="{{slide.text}}" data-ng-style="{width: calWidth+\'px\', height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()">\n                            <div data-ng-if="slide.floor3dImage && $root.floorImageType3dImg" data-ng-style="{width: calWidth+\'px\', height: calHeight+\'px\', top:0, left:0}" class="{{slide.slideClass}} isometric_svg">\n                                <img data-ng-src="{{slide.floor3dImage}}" alt="{{slide.text}}" data-ng-style="{width: calWidth+\'px\', height: calHeight+\'px\', left:0, top:0}" bn-load="imageLoaded()">\n                                <div class="floor_detail_tooltip">\n                                    <div class="position_Right tooltip_arrow"></div>\n                                    <div class="position_Left tooltip_arrow"></div>\n                                    <div class="position_Top tooltip_arrow"></div>\n                                    <div class="position_Bottom tooltip_arrow"></div>\n                                    <div class="floor_tooltip">\n                                        <div class="header">Header</div>\n                                        <div class="content">\n                                            <div class="details">\n                                            </div>\n                                            <p class="tip"></p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <svg class="svgInfo" data-ng-style="{width: calWidth, height: calHeight+\'px\'}" preserveAspectRatio="xMinYMin meet" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="top:0px; left:0px;">\n                                    <g data-ng-repeat="svg in svg_details">\n                                        <polygon class="{{svg.polygon_class}} polygon panor-top-view" data-ng-click="expandTour(leadData.projectId, slide.panoramaUnit, slide.panoramaViewPath, svg.polygon_class, svg.name)" ng-attr-points="{{svg.per_points}}" data-ng-mouseover="svg_mouseenter(svg.polygon_class, svg.name, svg.tooltip_pos, svg.tooltip_top, svg.tooltip_left, svg.length, svg.width, slide.panoramaViewPath)" data-ng-mouseleave="svg_mouseout(svg.polygon_class)" style="opacity:0.01" />\n                                    </g>\n                                </svg>\n                            </div>\n                            <img data-ng-if="slide.floor3dImage && $root.floorImageTypeImg" data-ng-src="{{slide.largeImage}}" class="{{slide.slideClass}}" alt="{{slide.text}}" data-ng-style="{width: calWidth, height: calHeight+\'px\', left: calLeft, top: calTop}" bn-load="imageLoaded()">\n                        </div>\n                    </div>\n\n                    <div data-ng-style="{ height: options.divHeight+\'px\'}" data-ng-if="options.height100Proc && slide.visible && slide.internalVideo" class="ta-center">\n                        <div style="height:0px; width:100%;"></div>\n                        <span pt-playerjw isopen=\'options.height100Proc\' params="params" slide-data="slide" width="100%" height="90%"></span>\n                    </div>\n\n                    <!-- if slide is walkThrough and full screen mode -->\n                    <div data-ng-style="{ height: options.divHeight+\'px\'}" data-ng-if="options.height100Proc && slide.visible && $root.floorImageTypeWT && slide.walkThrough && !slide.internalVideo" class="ta-center">\n                        <div style="height:0px; width:100%;"></div>\n                        <span pt-playerjw isopen=\'options.height100Proc\' params="params" slide-data="slide" width="100%" height="90%"></span>\n                    </div>\n                    <!-- if slide is video and full screen mode -->\n                    <div data-ng-style="{ height: options.divHeight+\'px\'}" data-ng-if="options.height100Proc && slide.visible && slide.video">\n                        <div style="height:52px; width:100%;"></div>\n                        <span pt-youtube id="{{slide.videoId}}" player-id="\'project-gallery\'" slide-data="slide" width="100%" height="90%"></span>\n                    </div>\n                    <div data-ng-if="options.ptzoomControlVisible && !slide.video && !$root.floorImageTypeWT && slide.visible" class="ptZoomInOutControls buttons">\n                        <ul class="pt-carousel-control">\n                            <li data-ng-if="has3dimages && !hideswitch" class="panor-wrapper">\n                                <div class="floorPlanTextViewer">Floor Plan also available in</div>\n                                <div class="floorPlanViewerInfo">\n                                    <div data-ng-click="Set3DImageForFirstClick()" class="threeD-view pull-left">\n                                        <i class="pt pt-icon-cube"></i>\n                                        <span>3D</span>\n                                    </div>\n                                    <div class="panor-view pull-left marginL10">\n                                        <i class="pt pt-icon-panorama panor-icon-view"></i>\n                                        <span class="panor-iconText-view">360&deg;</span>\n                                    </div>\n                                    <div class="panor-overlay" pt-property-config-overlay></div>\n                                </div>\n                            </li>\n                            <li>\n                                <button data-ng-click="ZoomIn()" class="zoom-in pt pt-icon-search-plus {{isZoomIn}}"></button>\n                                <button data-ng-click="ZoomOut()" class="zoom-out pt pt-icon-search-minus {{isZoomOut}}"></button>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="img-tab-viewer">\n                        <div class="img-viewer-info">\n                            <a data-ng-if="slide.largeImage && (slide.floor3dImage || slide.walkThrough)" data-ng-class="{\'active\': $root.floorImageTypeImg, \'cursorDefault\': $root.floorImageTypeImg}" data-ng-click="setImageFloorType(\'2D\')">2D</a>\n                            <a data-ng-if="slide.floor3dImage && (slide.largeImage || slide.walkThrough)" data-ng-class="{\'active\': $root.floorImageType3dImg, \'cursorDefault\': $root.floorImageType3dImg}" data-ng-click="setImageFloorType(\'3D\')">3D</a>\n                            <a data-ng-if="slide.walkThrough && (slide.floor3dImage || slide.largeImage)" data-ng-class="{\'active\': $root.floorImageTypeWT, \'cursorDefault\': $root.floorImageTypeWT}" data-ng-click="setImageFloorType(\'WT\')"><i class="pt pt-icon-video-camera"></i></a>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <div data-ng-keyup="$event.stopPropagation();" class="pt-carousel-right-panel" data-ng-if="leadData">\n            <div pt-enquireform city-enabled="leadConfig.cEnabled" locality-enabled="leadConfig.lEnabled" is-modal="leadConfig.isModal" initial="leadData" class="pt-carousel-lead"></div>\n            <div class="leadCollapInfo" data-ng-click="toggleform()">\n                <i class="pt pt-icon-angle-double-right" data-ng-if="!collapseleadform"></i>\n                <i class="pt pt-icon-angle-double-left" data-ng-if="collapseleadform"></i>\n            </div>\n        </div>\n    </div>\n    <div data-ng-if="errorMesageBox">3D floor plan is not available for this property</div>\n    <div class="pt-thums-viewer" data-ng-if="options.showBottomNav">\n        <div class="photoGalleryTab">\n            <button class="thumbViewerInfo" data-ng-click="toggelThumbviewer()">Thumbnails\n                <i class="pt pt-icon-angle-double-down" data-ng-if="!hidethumbs"></i>\n                <i class="pt pt-icon-angle-double-up" data-ng-if="hidethumbs"></i>\n            </button>\n            <ul>\n                <li data-ng-repeat="bucket in buckets">\n                    <span analytics-on\n                          data-analytics-event="Gallery View Type"\n                          data-analytics-category="Project Details View"\n                          data-analytics-label="{{bucket.name}}" data-ng-click="SetImage(bucket.minRange)" class="{{bucket.class}}" data-ng-bind-html="bucket.name"></span>\n                </li>\n            </ul>\n        </div>\n        <div class="pt-thums-img-gallery">\n            <ul class="carouselIndicators" data-ng-style="{width: carouselWidth+\'px\'}">\n                <li class="sliderTab" data-ng-repeat="slide in ptslides">\n                    <a data-ng-click="SetImage($index, undefined ,$event, true)" data-ng-href="{{slide.pageUrl}}">\n                        <div class="thumbsHolder_ThumbOFF {{slide.thumbClass}}">\n                            <i data-ng-if="slide.video" class="pt pt-icon-youtube-play player"></i>\n                            <img data-ng-if="!slide.floor3dImage" data-ng-src="{{slide.thumbImage}}" data-ng-style="{width: options.thumbnailWidth+\'px\', height: options.thumbnailHeight+\'px\'}" alt="{{slide.text}}">\n                            <img data-ng-if="slide.floor3dImage && $root.floorImageType3dImg" data-ng-src="{{slide.thumbImage}}" data-ng-style="{width: options.thumbnailWidth+\'px\', height: options.thumbnailHeight+\'px\'}" alt="{{slide.text}}">\n                            <img data-ng-if="slide.floor3dImage && $root.floorImageTypeImg" data-ng-src="{{slide.thumbImage}}" data-ng-style="{width: options.thumbnailWidth+\'px\', height: options.thumbnailHeight+\'px\'}" alt="{{slide.text}}">\n                            <img data-ng-if="slide.floor3dImage && ($root.floorImageTypeWT || $root.floorImageTypeImg)" data-ng-src="{{slide.thumbImage}}" data-ng-style="{width: options.thumbnailWidth+\'px\', height: options.thumbnailHeight+\'px\'}" alt="{{slide.text}}">\n                        </div>\n                        <div data-ng-if=\'slide.floor3dImage || slide.walkThrough\' class="threeD-thums-view check3d_{{$index}} pt_check3d"><i data-ng-if=\'slide.floor3dImage\' class="pt pt-icon-cube"></i><i data-ng-if=\'slide.walkThrough\' class="pt pt-icon-video-camera"></i></div>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div data-ng-if="carouselSteps > 1">\n            <div data-ng-click="scrollThumbnailsRight()" class="carouselLeftNav {{leftScrollClass}}"><i class="pt pt-icon-chevron-circle-left"></i></div>\n            <div data-ng-click="scrollThumbnailsLeft()" class="carouselRightNav {{rightScrollClass}}"><i class="pt pt-icon-chevron-circle-right"></i></div>\n        </div>\n    </div>\n    <div data-ng-click="expand()"  class="expand-btn"><i class="pt pt-icon-expand"></i></div>\n    <div data-ng-click="Set3DImageForFirstClick()" data-ng-if="has3dimages && !hideswitch" class="threeD-btn">\n        <i class="pt pt-icon-cube"></i> 3D\n        <div class="threeTooltip"> This Project has <strong>3D</strong> floor plans.\n            <span>Click to view now!</span>\n        </div>\n    </div>\n</div>\n<div style="display:none">\n    <ul>\n        <li data-ng-repeat="item in ptslides">\n            <img data-ng-if="$index == currentIndex+1" data-ng-src="{{item.largeImage}}" />\n        </li>\n    </ul>\n</div>';
}),define("text!views/directives/common/pt-property-config-overlay.html",[],function(){return'<div class="panorDetailViewInfo">\n    <ul class="ulTableView">\n        <li class="ulTopHeader">\n            <div class="ulTableColView">TYPE/SIZE</div>\n            <div class="ulTableColView proj3DPlan">3D PLAN</div>\n            <div class="ulTableColView">360 PANORAMA</div>\n        </li>\n        <li class="{{selectedRow[$index]}}" data-ng-repeat="conf in overlayConfig" data-ng-click="SetImage(conf.slideidx, null, null, null, true)">\n            <div class="checkIconInfo" data-ng-click="SetImage(conf.slideidx)">\n                <i class="pt pt-icon-check checkIcon"></i>\n            </div>\n            <div class="ulTableColView projTextAlign" data-ng-click="setImageFloorType(\'2D\', null, true)">\n                <span>{{conf.unitName}}</span>\n                <span class="ulTableSubText" data-ng-if="conf.size">({{conf.size}} {{conf.measure}})</span>\n                <span class="ulTableSubText" data-ng-if="!conf.size && conf.carpetArea">{{conf.carpetArea}} {{conf.measure}} (Carpet Area)</span>\n            </div>\n            <div class="ulTableColView icon3DLink {{iconClassIndex[$index]}}" data-ng-click="setImageFloorType(\'3D\', $index, true)" data-ng-class="{\'disableIcon\' : !conf.floor3dImage }">\n                <i class="pt pt-icon-cube"></i>\n            </div>\n            <div class="ulTableColView iconPanorLink" data-ng-class="{\'disableIcon\' : !conf.panoramaViewPath }" data-ng-click="expandTour(leadData.projectId, conf.panoramaUnit, conf.panoramaViewPath, null, \'name\')">\n                <div class="gallPanorView">\n                    <i class="pt pt-icon-panorama panorIconView"></i>\n                    <span class="panorSubText">360&deg;</span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>'}),define("directives/common/pt-property-config-overlay",["app","text!views/directives/common/pt-property-config-overlay.html"],function(a,b){a.directive("ptPropertyConfigOverlay",function(){return{restrict:"A",template:b,controller:[function(){}]}})}),define("text!views/directives/common/pt-loading-block.html",[],function(){return'<div class="parent-blocking" data-ng-if="!loadingObject">\n    <div class="loader-info">\n    	<div data-ng-transclude ></div>\n    	<i class="pt pt-icon-cog pt-icon-spin {{iconStylingClass}}"></i>\n        <div class="big-loader">\n            <i class="spinLoader"></i>\n        </div>      \n    </div>        \n</div>\n'}),define("directives/common/pt-loading-block",["app","text!views/directives/common/pt-loading-block.html"],function(a,b){a.directive("ptLoadingBlock",[function(){return{restrict:"A",scope:{loadingObject:"=",iconStylingClass:"@"},transclude:!0,template:b,link:function(a,b,c){a.iconStylingClass=a.iconStylingClass||"",a.$on("$destroy",function(){a.loadingObject=void 0,b.remove()})}}}])}),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"https://www.youtube.com"};YT.loading||(YT.loading=1,function(){var a=[];YT.ready=function(b){YT.loaded?b():a.push(b)},window.onYTReady=function(){YT.loaded=1;for(var b=0;b<a.length;b++)try{a[b]()}catch(c){}},YT.setConfig=function(a){for(var b in a)a.hasOwnProperty(b)&&(YTConfig[b]=a[b])};var b=document.createElement("script");b.id="www-widgetapi-script",b.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflkfgkJ8.js",b.async=!0;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}()),define("youtube",function(a){return function(){var b;return b||a.YT}}(this)),define("directives/common/pt-youtube",["app","youtube"],function(a,b){a.directive("ptYoutube",["$rootScope",function(a){return{restrict:"A",scope:{slideData:"=",autoplay:"=",playerId:"="},template:'<div id="player_{{playerId}}"></div>',link:function(c,d,e){c.start=!1,c.load_player={attr_id:void 0,attr:!1,yt_load:!1},c.$watch(function(){return e.id},function(a,b){a&&(c.load_player.attr_id=a,c.load_player.attr=!0)}),c.$watch(function(){return b.Player},function(a,b){a&&(c.load_player.yt_load=!0)}),c.$watch("load_player",function(a,b){a&&a.attr&&a.yt_load&&(c.player=c.createPlayer(e))},!0),c.createPlayer=function(a){c.player&&c.player.destroy();var d=c.autoplay?1:0;return new b.Player("player_"+c.playerId,{height:a.height,width:a.width,videoId:a.id,playerVars:{autoplay:d,controls:1,frameborder:0,allowfullscreen:1},events:{onReady:c.onPlayerReady,onStateChange:c.onPlayerStateChange,onError:c.onError}})},c.$on("pause_player",function(a,b){c.player&&"portfolio_home_video"==e.$$element.parent()[0].getAttribute("id")&&c.player.pauseVideo()}),c.onPlayerReady=function(a){f("viewed","Video Viewed"),c.start=!0},c.onPlayerStateChange=function(a){if(a.data!=b.PlayerState.PLAYING||c.start||f("play","Video Play"),(c.start||a.data==b.PlayerState.UNSTARTED)&&(f("start","Video Start"),c.start=!1),a.data==b.PlayerState.PAUSED)if("portfolio_home_video"==a.target.a.parentElement.parentElement.getAttribute("id")){var d=(c.player.k.currentTime/c.player.k.duration*100).toFixed();f("pause","Video Paused",d)}else f("pause","Video Paused");a.data==b.PlayerState.ENDED&&(f("end","Video End"),f("played","Video Played",100))},c.onError=function(a){window.console.log("Encountered and ERROR")};var f=function(b,d,e){var g,h={},i="",j="";c.slideData&&c.slideData.objectId&&(i=c.slideData.objectId),c.slideData&&c.slideData.text&&(j=c.slideData.text),"portfolio_home_video"==c.player.a.parentElement.parentElement.getAttribute("id")&&(j="portfolio"),h["Project ID"]=i,h["Video Type"]=j,h["Page Name"]=a.CURRENT_ACTIVE_PAGE,e?(h["Video Played"]=e,g=e+"-"+j+"-"+a.CURRENT_ACTIVE_PAGE):g=j+"-"+a.CURRENT_ACTIVE_PAGE,a.$on("youtubeCollapse",function(){var b=(c.player.k.currentTime/c.player.k.duration*100).toFixed();f("played","Video Played",b),a.$$listeners.youtubeCollapse=[]})}}}}])}),define("text!views/directives/common/pt-playerjw.html",[],function(){return"<div id='playerGVtPteKoWxwx'>Loading</div>"});for(var jwBase64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode:function(a){if("function"==typeof window.atob)return atob(a);var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=jwBase64._keyStr.indexOf(a.charAt(j++)),f=jwBase64._keyStr.indexOf(a.charAt(j++)),g=jwBase64._keyStr.indexOf(a.charAt(j++)),h=jwBase64._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=jwBase64._utf8_decode(i)},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},bd=[],i=0;i<bd.length;i++){var bdn=jwBase64.decode(bd[i]);if(""!==bdn&&window.location.hostname.match(RegExp(bdn+"$"))){error_message="Error loading player: Unauthorized Domain",function(){var a="";jwplayer=function(c){return a=c,b};var b={setup:function(){var c="There was an error retrieving your embed.:Please double check your hosted URL in your <a href='http://account.jwplayer.com'>JW Dashboard</a>.";"undefined"!=typeof error_message&&(c=error_message);var d=document.getElementById(a),e=d.style;e.backgroundColor="#000",e.color="#FFF",e.width="480px",e.height="270px",e.display="table",e.opacity=1;var f=document.createElement("p"),g=f.style;return g.verticalAlign="middle",g.textAlign="center",g.display="table-cell",g.font="15px/20px Arial, Helvetica, sans-serif",f.innerHTML=c.replace(":",":<br>"),d.innerHTML="",d.appendChild(f),b},getRenderingMode:function(){return b},onReady:function(a){return b},getPlaylist:function(){return b},getPlaylistItem:function(a){return b},load:function(a){return b},playlistItem:function(a){return b},onPlaylist:function(a){return b},onPlaylistItem:function(a){return b},onComplete:function(a){return b},onPlaylistComplete:function(a){return b},getBuffer:function(){return b},onBufferChange:function(a){return b},getState:function(){return b},play:function(a){return b},pause:function(a){return b},stop:function(){return b},onBeforePlay:function(a){return b},onPlay:function(a){return b},onPause:function(a){return b},onBuffer:function(a){return b},onIdle:function(a){return b},getPosition:function(){return b},getDuration:function(){return b},seek:function(a){return b},onSeek:function(a){return b},onTime:function(a){return b},getMute:function(){return b},getVolume:function(){return b},setMute:function(a){return b},setVolume:function(a){return b},onMute:function(a){return b},onVolume:function(a){return b},getFullscreen:function(){return b},getHeight:function(){return b},getWidth:function(){return b},resize:function(a,c){return b},onFullscreen:function(a){return b},getQualityLevels:function(){return b},getCurrentQuality:function(){return b},setCurrentQuality:function(a){return b},onQualityLevels:function(a){return b},onQualityChange:function(a){return b},addButton:function(a,c,d,e){return b},removeButton:function(a){return b},getControls:function(){return b},getSafeRegion:function(){return b},setControls:function(a){return b},onControls:function(a){return b},onDisplayClick:function(a){return b},onError:function(a){return b},onMeta:function(a){return b}}}(),jwplayer.blacklisted=1;break}}"undefined"==typeof jwplayer&&(jwplayer=function(){return jwplayer.api?jwplayer.api.selectPlayer.apply(this,arguments):void 0},jwplayer.version="6.12.4956",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var a={},b=Array.prototype,c=Object.prototype,d=b.slice,e=b.concat,f=c.toString,g=c.hasOwnProperty,h=b.map,i=b.forEach,j=b.filter,k=b.every,l=b.some,m=b.indexOf,c=Array.isArray,n=Object.keys,o=function(a){return a instanceof o?a:this instanceof o?void 0:new o(a)},p=o.each=o.forEach=function(b,c,d){if(null==b)return b;if(i&&b.forEach===i)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===a)return}else for(var g=o.keys(b),e=0,f=g.length;f>e;e++)if(c.call(d,b[g[e]],g[e],b)===a)return;return b};o.map=o.collect=function(a,b,c){var d=[];return null==a?d:h&&a.map===h?a.map(b,c):(p(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)},o.find=o.detect=function(a,b,c){var d;return q(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},o.filter=o.select=function(a,b,c){var d=[];return null==a?d:j&&a.filter===j?a.filter(b,c):(p(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},o.every=o.all=function(b,c,d){c||(c=o.identity);var e=!0;return null==b?e:k&&b.every===k?b.every(c,d):(p(b,function(b,f,g){return(e=e&&c.call(d,b,f,g))?void 0:a}),!!e)};var q=o.some=o.any=function(b,c,d){c||(c=o.identity);var e=!1;return null==b?e:l&&b.some===l?b.some(c,d):(p(b,function(b,f,g){return e||(e=c.call(d,b,f,g))?a:void 0}),!!e)};o.size=function(a){return null==a?0:a.length===+a.length?a.length:o.keys(a).length},o.after=function(a,b){return function(){return 1>--a?b.apply(this,arguments):void 0}},o.sortedIndex=function(a,b,c,d){c=null==c?o.identity:o.isFunction(c)?c:o.property(c),b=c.call(d,b);for(var e=0,f=a.length;f>e;){var g=e+f>>>1;c.call(d,a[g])<b?e=g+1:f=g}return e},o.find=o.detect=function(a,b,c){var d;return q(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},q=o.some=o.any=function(b,c,d){c||(c=o.identity);var e=!1;return null==b?e:l&&b.some===l?b.some(c,d):(p(b,function(b,f,g){return e||(e=c.call(d,b,f,g))?a:void 0}),!!e)},o.contains=o.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=o.values(a)),0<=o.indexOf(a,b))},o.where=function(a,b){return o.filter(a,o.matches(b))},o.difference=function(a){var c=e.apply(b,d.call(arguments,1));return o.filter(a,function(a){return!o.contains(c,a)})},o.without=function(a){return o.difference(a,d.call(arguments,1))},o.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=o.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(m&&a.indexOf===m)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},o.partial=function(a){var b=d.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===o&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},o.memoize=function(a,b){var c={};return b||(b=o.identity),function(){var d=b.apply(this,arguments);return o.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},o.delay=function(a,b){var c=d.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},o.defer=function(a){return o.delay.apply(o,[a,1].concat(d.call(arguments,1)))},o.keys=function(a){if(!o.isObject(a))return[];if(n)return n(a);var b,c=[];for(b in a)o.has(a,b)&&c.push(b);return c},o.pick=function(a){var c={},f=e.apply(b,d.call(arguments,1));return p(f,function(b){b in a&&(c[b]=a[b])}),c},o.isArray=c||function(a){return"[object Array]"==f.call(a)},o.isObject=function(a){return a===Object(a)},p("Arguments Function String Number Date RegExp".split(" "),function(a){o["is"+a]=function(b){return f.call(b)=="[object "+a+"]"}}),o.isArguments(arguments)||(o.isArguments=function(a){return!(!a||!o.has(a,"callee"))}),"function"!=typeof/./&&(o.isFunction=function(a){return"function"==typeof a}),o.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},o.isNaN=function(a){return o.isNumber(a)&&a!=+a},o.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==f.call(a)},o.isNull=function(a){return null===a},o.isUndefined=function(a){return void 0===a},o.has=function(a,b){return g.call(a,b)},o.identity=function(a){return a},o.constant=function(a){return function(){return a}},o.property=function(a){return function(b){return b[a]}},o.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},o.result=function(a,b){if(null!=a){var c=a[b];return o.isFunction(c)?c.call(a):c}},this._=o}.call(jwplayer),function(a){function b(a){return function(){return g(a)}}function c(a,b,c,e,f){return function(){var g,h;if(f)c(a);else{try{if((g=a.responseXML)&&(h=g.firstChild,g.lastChild&&"parsererror"===g.lastChild.nodeName))return void(e&&e("Invalid XML",b,a))}catch(i){}if(g&&h)return c(a);(g=d.parseXML(a.responseText))&&g.firstChild?(a=d.extend({},a,{responseXML:g}),c(a)):e&&e(a.responseText?"Invalid XML":b,b,a)}}}var d=a.utils={},e=a._;d.exists=function(a){switch(typeof a){case"string":return 0<a.length;case"object":return null!==a;case"undefined":return!1}return!0},d.styleDimension=function(a){return a+(0<a.toString().indexOf("%")?"":"px")},d.getAbsolutePath=function(a,b){if(d.exists(b)||(b=document.location.href),d.exists(a)){var c;if(d.exists(a)){c=a.indexOf("://");var e=a.indexOf("?");c=c>0&&(0>e||e>c)}else c=void 0;if(c)return a;c=b.substring(0,b.indexOf("://")+3);var f,e=b.substring(c.length,b.indexOf("/",c.length+1));0===a.indexOf("/")?f=a.split("/"):(f=b.split("?")[0],f=f.substring(c.length+e.length+1,f.lastIndexOf("/")),f=f.split("/").concat(a.split("/")));for(var g=[],h=0;h<f.length;h++)f[h]&&d.exists(f[h])&&"."!==f[h]&&(".."===f[h]?g.pop():g.push(f[h]));return c+e+"/"+g.join("/")}},d.extend=function(){var a=Array.prototype.slice.call(arguments,0);if(1<a.length){for(var b=a[0],c=function(a,c){void 0!==c&&null!==c&&(b[a]=c)},e=1;e<a.length;e++)d.foreach(a[e],c);return b}return null};var f=window.console=window.console||{log:function(){}};d.log=function(){var a=Array.prototype.slice.call(arguments,0);"object"==typeof f.log?f.log(a):f.log.apply(f,a)};var g=e.memoize(function(a){return null!==navigator.userAgent.toLowerCase().match(a)});d.isFF=b(/firefox/i),d.isChrome=b(/chrome/i),d.isIPod=b(/iP(hone|od)/i),d.isIPad=b(/iPad/i),d.isSafari602=b(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),d.isIETrident=function(a){return a?(a=parseFloat(a).toFixed(1),g(RegExp("trident/.+rv:\\s*"+a,"i"))):g(/trident/i)},d.isMSIE=function(a){return a?(a=parseFloat(a).toFixed(1),g(RegExp("msie\\s*"+a,"i"))):g(/msie/i)},d.isIE=function(a){return a?(a=parseFloat(a).toFixed(1),a>=11?d.isIETrident(a):d.isMSIE(a)):d.isMSIE()||d.isIETrident()},d.isSafari=function(){return g(/safari/i)&&!g(/chrome/i)&&!g(/chromium/i)&&!g(/android/i)},d.isIOS=function(a){return g(a?RegExp("iP(hone|ad|od).+\\sOS\\s"+a,"i"):/iP(hone|ad|od)/i)},d.isAndroidNative=function(a){return d.isAndroid(a,!0)},d.isAndroid=function(a,b){return b&&g(/chrome\/[123456789]/i)&&!g(/chrome\/18/)?!1:a?(d.isInt(a)&&!/\./.test(a)&&(a=""+a+"."),g(RegExp("Android\\s*"+a,"i"))):g(/Android/i)},d.isMobile=function(){return d.isIOS()||d.isAndroid()},d.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},d.saveCookie=function(a,b){document.cookie="jwplayer."+a+"="+b+"; path=/"},d.getCookies=function(){for(var a={},b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");0===d[0].indexOf("jwplayer.")&&(a[d[0].substring(9,d[0].length)]=d[1])}return a},d.isInt=function(a){return 0===parseFloat(a)%1},d.typeOf=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&e.isArray(a)?"array":b},d.translateEventResponse=function(b,c){var e=d.extend({},c);if(b!==a.events.JWPLAYER_FULLSCREEN||e.fullscreen)if("object"==typeof e.data){var f=e.data;delete e.data,e=d.extend(e,f)}else"object"==typeof e.metadata&&d.deepReplaceKeyName(e.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else e.fullscreen="true"===e.message,delete e.message;return d.foreach(["position","duration","offset"],function(a,b){e[b]&&(e[b]=Math.round(1e3*e[b])/1e3)}),e},d.flashVersion=function(){if(d.isAndroid())return 0;var a,b=navigator.plugins;try{if("undefined"!==b&&(a=b["Shockwave Flash"]))return parseInt(a.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(c){}if("undefined"!=typeof window.ActiveXObject)try{if(a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(a.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(e){}return 0},d.getScriptPath=function(a){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src;if(d&&0<=d.indexOf(a))return d.substr(0,d.indexOf(a))}return""},d.deepReplaceKeyName=function(b,c,e){switch(a.utils.typeOf(b)){case"array":for(var f=0;f<b.length;f++)b[f]=a.utils.deepReplaceKeyName(b[f],c,e);break;case"object":d.foreach(b,function(d,f){var g;if(c instanceof Array&&e instanceof Array){if(c.length!==e.length)return;g=c}else g=[c];for(var h=d,i=0;i<g.length;i++)h=h.replace(RegExp(c[i],"g"),e[i]);b[h]=a.utils.deepReplaceKeyName(f,c,e),d!==h&&delete b[d]})}return b};var h=d.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};d.getPluginPathType=function(a){if("string"==typeof a){a=a.split("?")[0];var b=a.indexOf("://");if(b>0)return h.ABSOLUTE;var c=a.indexOf("/");return a=d.extension(a),!(0>b&&0>c)||a&&isNaN(a)?h.RELATIVE:h.CDN}},d.getPluginName=function(a){return a.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},d.getPluginVersion=function(a){return a.replace(/[^-]*-?([^\.]*).*$/,"$1")},d.isYouTube=function(a,b){return"youtube"===b||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(a)},d.youTubeID=function(a){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(a).slice(1).join("").replace("?","")}catch(b){return""}},d.isRtmp=function(a,b){return 0===a.indexOf("rtmp")||"rtmp"===b},d.foreach=function(a,b){var c,e;for(c in a)"function"===d.typeOf(a.hasOwnProperty)?a.hasOwnProperty(c)&&(e=a[c],b(c,e)):(e=a[c],b(c,e))},d.isHTTPS=function(){return 0===window.location.href.indexOf("https")},d.repo=function(){var b="http://p.jwpcdn.com/"+a.version.split(/\W/).splice(0,2).join("/")+"/";try{d.isHTTPS()&&(b=b.replace("http://","https://ssl."))}catch(c){}return b},d.versionCheck=function(b){b=("0"+b).split(/\W/);var c=a.version.split(/\W/),d=parseFloat(b[0]),e=parseFloat(c[0]);return d>e||d===e&&parseFloat("0"+b[1])>parseFloat(c[1])?!1:!0},d.ajax=function(a,b,e,f){var g,h=!1;if(0<a.indexOf("#")&&(a=a.replace(/#.*$/,"")),a&&0<=a.indexOf("://")&&a.split("/")[2]!==window.location.href.split("/")[2]&&d.exists(window.XDomainRequest))g=new window.XDomainRequest,g.onload=c(g,a,b,e,f),g.ontimeout=g.onprogress=function(){},g.timeout=5e3;else{if(!d.exists(window.XMLHttpRequest))return e&&e("",a,g),g;var i=g=new window.XMLHttpRequest,j=a;g.onreadystatechange=function(){if(4===i.readyState)switch(i.status){case 200:c(i,j,b,e,f)();break;case 404:e("File not found",j,i)}}}g.overrideMimeType&&g.overrideMimeType("text/xml");var k=a,l=g;g.onerror=function(){e("Error loading file",k,l)};try{g.open("GET",a,!0)}catch(m){h=!0}return setTimeout(function(){if(h)e&&e(a,a,g);else try{g.send()}catch(b){e&&e(a,a,g)}},0),g},d.parseXML=function(a){var b;try{if(window.DOMParser){if(b=(new window.DOMParser).parseFromString(a,"text/xml"),b.childNodes&&b.childNodes.length&&"parsererror"===b.childNodes[0].firstChild.nodeName)return}else b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)}catch(c){return}return b},d.between=function(a,b,c){return Math.max(Math.min(a,c),b)},d.seconds=function(a){if(e.isNumber(a))return a;a=a.replace(",",".");var b=a.split(":"),c=0;return"s"===a.slice(-1)?c=parseFloat(a):"m"===a.slice(-1)?c=60*parseFloat(a):"h"===a.slice(-1)?c=3600*parseFloat(a):1<b.length?(c=parseFloat(b[b.length-1]),c+=60*parseFloat(b[b.length-2]),3===b.length&&(c+=3600*parseFloat(b[b.length-3]))):c=parseFloat(a),c},d.serialize=function(a){return null===a?null:"true"===a.toString().toLowerCase()?!0:"false"===a.toString().toLowerCase()?!1:isNaN(Number(a))||5<a.length||0===a.length?a:Number(a)},d.addClass=function(a,b){var c=e.isString(a.className)?a.className.split(" "):[],f=e.isArray(b)?b:b.split(" ");e.each(f,function(a){e.contains(c,a)||c.push(a)}),a.className=d.trim(c.join(" "))},d.removeClass=function(a,b){var c=e.isString(a.className)?a.className.split(" "):[],f=e.isArray(b)?b:b.split(" ");a.className=d.trim(e.difference(c,f).join(" "))},d.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},d.indexOf=e.indexOf,d.noop=function(){},d.canCast=function(){var b=a.cast;return!(!b||!e.isFunction(b.available)||!b.available())}}(jwplayer),function(a){function b(a){var b=document.createElement("style");return a&&b.appendChild(document.createTextNode(a)),b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b),b}function c(a,b,c){return g.exists(b)?(c=c?" !important":"","string"==typeof b&&isNaN(b)?/png|gif|jpe?g/i.test(b)&&0>b.indexOf("url")?"url("+b+")":b+c:0===b||"z-index"===a||"opacity"===a?""+b+c:/color/i.test(a)?"#"+g.pad(b.toString(16).replace(/^0x/i,""),6)+c:Math.ceil(b)+"px"+c):""}function d(a,b){for(var c=0;c<a.length;c++){var d,e,f=a[c];if(void 0!==f&&null!==f)for(d in b){e=d,e=e.split("-");for(var g=1;g<e.length;g++)e[g]=e[g].charAt(0).toUpperCase()+e[g].slice(1);e=e.join(""),f.style[e]!==b[d]&&(f.style[e]=b[d])}}}function e(a){var b,c,d,e=h[a].sheet;if(e){b=e.cssRules,c=k[a],d=a;var f=i[d];d+=" { ";for(var g in f)d+=g+": "+f[g]+"; ";if(d+="}",void 0!==c&&c<b.length&&b[c].selectorText===a){if(d===b[c].cssText)return;e.deleteRule(c)}else c=b.length,k[a]=c;try{e.insertRule(d,c)}catch(j){}}}var f,g=a.utils,h={},i={},j=null,k={};g.cssKeyframes=function(a,c){var d=h.keyframes;d||(d=b(),h.keyframes=d);var d=d.sheet,e="@keyframes "+a+" { "+c+" }";try{d.insertRule(e,d.cssRules.length)}catch(f){}e=e.replace(/(keyframes|transform)/g,"-webkit-$1");try{d.insertRule(e,d.cssRules.length)}catch(g){}};var l=g.css=function(a,d,g){i[a]||(i[a]={});var k=i[a];g=g||!1;var l,m,n=!1;for(l in d)m=c(l,d[l],g),""!==m?m!==k[l]&&(k[l]=m,n=!0):void 0!==k[l]&&(delete k[l],n=!0);n&&(h[a]||(d=f&&f.sheet&&f.sheet.cssRules&&f.sheet.cssRules.length||0,(!f||d>5e4)&&(f=b()),h[a]=f),null!==j?j.styleSheets[a]=i[a]:e(a))};l.style=function(b,e,f){if(void 0!==b&&null!==b){void 0===b.length&&(b=[b]);var g,h={};for(g in e)h[g]=c(g,e[g]);if(null===j||f)d(b,h);else{e=(e=b.__cssRules)||{};for(var i in h)e[i]=h[i];b.__cssRules=e,0>a._.indexOf(j.elements,b)&&j.elements.push(b)}}},l.block=function(a){null===j&&(j={id:a,styleSheets:{},elements:[]})},l.unblock=function(a){if(j&&(!a||j.id===a)){for(var b in j.styleSheets)e(b);for(a=0;a<j.elements.length;a++)b=j.elements[a],d(b,b.__cssRules);j=null}},g.clearCss=function(a){for(var b in i)0<=b.indexOf(a)&&delete i[b];for(var c in h)0<=c.indexOf(a)&&e(c)},g.transform=function(a,b){var c={};b=b||"",c.transform=b,c["-webkit-transform"]=b,c["-ms-transform"]=b,c["-moz-transform"]=b,c["-o-transform"]=b,"string"==typeof a?l(a,c):l.style(a,c)},g.dragStyle=function(a,b){l(a,{"-webkit-user-select":b,"-moz-user-select":b,"-ms-user-select":b,"-webkit-user-drag":b,"user-select":b,"user-drag":b})},g.transitionStyle=function(a,b){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||l(a,{"-webkit-transition":b,"-moz-transition":b,"-o-transition":b,transition:b})},g.rotate=function(a,b){g.transform(a,"rotate("+b+"deg)")},g.rgbHex=function(a){return a=String(a).replace("#",""),3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),"#"+a.substr(-6)},g.hexToRgba=function(a,b){var c="rgb",d=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];return void 0!==b&&100!==b&&(c+="a",d.push(b/100)),c+"("+d.join(",")+")"}}(jwplayer),function(a){var b=jwplayer._,c=a.foreach,d={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},e={mp4:d.mp4,f4v:d.mp4,m4v:d.mp4,mov:d.mp4,m4a:d.aac,f4a:d.aac,aac:d.aac,mp3:d.mp3,ogv:d.ogg,ogg:d.ogg,oga:d.vorbis,vorbis:d.vorbis,webm:d.webm,m3u8:d.hls,m3u:d.hls,hls:d.hls},f=a.extensionmap={};c(e,function(a,b){f[a]={html5:b}}),c({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(a,b){f[a]||(f[a]={}),f[a].flash=b}),f.types=d,f.mimeType=function(a){var c;return b.find(d,function(b,d){return b===a?(c=d,!0):void 0}),c},f.extType=function(a){return f.mimeType(e[a])}}(jwplayer.utils),function(a){var b=a.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};a.scriptloader=function(c){function d(a){h=b.ERROR,g.sendEvent(f.ERROR,a)}function e(a){h=b.COMPLETE,g.sendEvent(f.COMPLETE,a)}var f=jwplayer.events,g=a.extend(this,new f.eventdispatcher),h=b.NEW;this.load=function(){if(h===b.NEW){var g=a.scriptloader.loaders[c];if(g&&(h=g.getStatus(),2>h))return g.addEventListener(f.ERROR,d),void g.addEventListener(f.COMPLETE,e);var i=document.getElementsByTagName("head")[0]||document.documentElement,j=document.createElement("script"),k=!1;j.onload=j.onreadystatechange=function(a){k||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(k=!0,e(a),j.onload=j.onreadystatechange=null,i&&j.parentNode&&i.removeChild(j))},j.onerror=d,j.src=c,i.insertBefore(j,i.firstChild),h=b.LOADING,a.scriptloader.loaders[c]=this}},this.getStatus=function(){return h}},a.scriptloader.loaders={}}(jwplayer.utils),function(a){a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},a.pad=function(a,b,c){for(c||(c="0");a.length<b;)a=c+a;return a},a.xmlAttribute=function(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name&&a.attributes[c].name.toLowerCase()===b.toLowerCase())return a.attributes[c].value.toString();return""},a.extension=function(a){if(!a||"rtmp"===a.substr(0,4))return"";var b;return(b=-1<a.indexOf("(format=m3u8-")?"m3u8":!1)?b:(a=a.substring(a.lastIndexOf("/")+1,a.length).split("?")[0].split("#")[0],-1<a.lastIndexOf(".")?a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase():void 0)},a.stringToColor=function(a){return a=a.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3===a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)}}(jwplayer.utils),function(a){var b="touchmove",c="touchstart";a.touch=function(d){function e(a){a.type===c?(i=!0,k=g(m.DRAG_START,a)):a.type===b?i&&(l||(f(m.DRAG_START,a,k),l=!0),f(m.DRAG,a)):(i&&(l?f(m.DRAG_END,a):(a.cancelBubble=!0,f(m.TAP,a))),i=l=!1,k=null)}function f(a,b,c){j[a]&&(b.preventManipulation&&b.preventManipulation(),b.preventDefault&&b.preventDefault(),b=c?c:g(a,b))&&j[a](b)}function g(a,b){var c=null;if(b.touches&&b.touches.length?c=b.touches[0]:b.changedTouches&&b.changedTouches.length&&(c=b.changedTouches[0]),!c)return null;var d=h.getBoundingClientRect(),c={type:a,target:h,x:c.pageX-window.pageXOffset-d.left,y:c.pageY,deltaX:0,deltaY:0};return a!==m.TAP&&k&&(c.deltaX=c.x-k.x,c.deltaY=c.y-k.y),c}var h=d,i=!1,j={},k=null,l=!1,m=a.touchEvents;return document.addEventListener(b,e),document.addEventListener("touchend",function(a){i&&l&&f(m.DRAG_END,a),i=l=!1,k=null}),document.addEventListener("touchcancel",e),d.addEventListener(c,e),d.addEventListener("touchend",e),this.addEventListener=function(a,b){j[a]=b},this.removeEventListener=function(a){delete j[a]},this}}(jwplayer.utils),function(a){a.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(a){a.key=function(b){var c,d,e;this.edition=function(){return e&&e.getTime()<(new Date).getTime()?"invalid":c},this.token=function(){return d},a.exists(b)||(b="");try{b=a.tea.decrypt(b,"36QXq4W@GSBV^teR");var f=b.split("/");(c=f[0])?/^(free|pro|premium|enterprise|ads)$/i.test(c)?(d=f[1],f[2]&&0<parseInt(f[2])&&(e=new Date,e.setTime(String(f[2])))):c="invalid":c="free"}catch(g){c="invalid"}}}(jwplayer.utils),function(a){var b=a.tea={};b.encrypt=function(a,e){if(0==a.length)return"";var f=b.strToLongs(d.encode(a));1>=f.length&&(f[1]=0);for(var g,h=b.strToLongs(d.encode(e).slice(0,16)),i=f.length,j=f[i-1],k=f[0],l=Math.floor(6+52/i),m=0;0<l--;){m+=2654435769,g=m>>>2&3;for(var n=0;i>n;n++)k=f[(n+1)%i],j=(j>>>5^k<<2)+(k>>>3^j<<4)^(m^k)+(h[3&n^g]^j),j=f[n]+=j}return f=b.longsToStr(f),c.encode(f)},b.decrypt=function(a,e){if(0==a.length)return"";for(var f,g=b.strToLongs(c.decode(a)),h=b.strToLongs(d.encode(e).slice(0,16)),i=g.length,j=g[i-1],k=g[0],l=2654435769*Math.floor(6+52/i);0!=l;){f=l>>>2&3;for(var m=i-1;m>=0;m--)j=g[m>0?m-1:i-1],j=(j>>>5^k<<2)+(k>>>3^j<<4)^(l^k)+(h[3&m^f]^j),k=g[m]-=j;l-=2654435769}return g=b.longsToStr(g),g=g.replace(/\0+$/,""),d.decode(g)},b.strToLongs=function(a){for(var b=Array(Math.ceil(a.length/4)),c=0;c<b.length;c++)b[c]=a.charCodeAt(4*c)+(a.charCodeAt(4*c+1)<<8)+(a.charCodeAt(4*c+2)<<16)+(a.charCodeAt(4*c+3)<<24);return b},b.longsToStr=function(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(255&a[c],a[c]>>>8&255,a[c]>>>16&255,a[c]>>>24&255);return b.join("")};var c={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a,b){var e,f,g,h,i,j,k=[],l="",m=c.code;if(j=("undefined"==typeof b?0:b)?d.encode(a):a,i=j.length%3,i>0)for(;3>i++;)l+="=",j+="\x00";for(i=0;i<j.length;i+=3)e=j.charCodeAt(i),f=j.charCodeAt(i+1),g=j.charCodeAt(i+2),h=e<<16|f<<8|g,e=h>>18&63,f=h>>12&63,g=h>>6&63,h&=63,k[i/3]=m.charAt(e)+m.charAt(f)+m.charAt(g)+m.charAt(h);return k=k.join(""),k=k.slice(0,k.length-l.length)+l},decode:function(a,b){b="undefined"==typeof b?!1:b;var e,f,g,h,i,j,k=[],l=c.code;j=b?d.decode(a):a;for(var m=0;m<j.length;m+=4)e=l.indexOf(j.charAt(m)),f=l.indexOf(j.charAt(m+1)),h=l.indexOf(j.charAt(m+2)),i=l.indexOf(j.charAt(m+3)),g=e<<18|f<<12|h<<6|i,e=g>>>16&255,f=g>>>8&255,g&=255,k[m/4]=String.fromCharCode(e,f,g),64==i&&(k[m/4]=String.fromCharCode(e,f)),64==h&&(k[m/4]=String.fromCharCode(e));return h=k.join(""),b?d.decode(h):h}},d={encode:function(a){return a=a.replace(/[\u0080-\u07ff]/g,function(a){return a=a.charCodeAt(0),String.fromCharCode(192|a>>6,128|63&a)}),a=a.replace(/[\u0800-\uffff]/g,function(a){return a=a.charCodeAt(0),String.fromCharCode(224|a>>12,128|a>>6&63,128|63&a)})},decode:function(a){return a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){return a=(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2),String.fromCharCode(a)}),a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){
return a=(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1),String.fromCharCode(a)})}}}(jwplayer.utils),function(a){a.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"}}(jwplayer),function(a){var b=a.utils;a.events.eventdispatcher=function(c,d){function e(a,c,d){if(a)for(var e=0;e<a.length;e++){var f=a[e];if(f){null!==f.count&&0===--f.count&&delete a[e];try{f.listener(c)}catch(g){b.log('Error handling "'+d+'" event listener ['+e+"]: "+g.toString(),f.listener,c)}}}}var f,g;this.resetEventListeners=function(){f={},g=[]},this.resetEventListeners(),this.addEventListener=function(a,c,d){try{b.exists(f[a])||(f[a]=[]),"string"===b.typeOf(c)&&(c=new Function("return "+c)()),f[a].push({listener:c,count:d||null})}catch(e){b.log("error",e)}return!1},this.removeEventListener=function(a,c){var d;if(f[a]){try{if(void 0===c)return void(f[a]=[]);for(d=0;d<f[a].length;d++)if(f[a][d].listener.toString()===c.toString()){f[a].splice(d,1);break}}catch(e){b.log("error",e)}return!1}},this.addGlobalListener=function(a,c){try{"string"===b.typeOf(a)&&(a=new Function("return "+a)()),g.push({listener:a,count:c||null})}catch(d){b.log("error",d)}return!1},this.removeGlobalListener=function(a){if(a){try{for(var c=g.length;c--;)g[c].listener.toString()===a.toString()&&g.splice(c,1)}catch(d){b.log("error",d)}return!1}},this.sendEvent=function(h,i){b.exists(i)||(i={}),b.extend(i,{id:c,version:a.version,type:h}),d&&b.log(h,i),e(f[h],i,h),e(g,i,h)}}}(window.jwplayer),function(a){var b={},c={};a.plugins=function(){},a.plugins.loadPlugins=function(d,e){return c[d]=new a.plugins.pluginloader(new a.plugins.model(b),e),c[d]},a.plugins.registerPlugin=function(c,d,e,f){var g=a.utils.getPluginName(c);b[g]||(b[g]=new a.plugins.plugin(c)),b[g].registerPlugin(c,d,e,f)}}(jwplayer),function(a){a.plugins.model=function(b){this.addPlugin=function(c){var d=a.utils.getPluginName(c);return b[d]||(b[d]=new a.plugins.plugin(c)),b[d]},this.getPlugins=function(){return b}}}(jwplayer),function(a){var b=jwplayer.utils,c=jwplayer.events;a.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},a.plugin=function(d){function e(){switch(b.getPluginPathType(d)){case b.pluginPathType.ABSOLUTE:return d;case b.pluginPathType.RELATIVE:return b.getAbsolutePath(d,window.location.href)}}function f(){k=setTimeout(function(){l=b.loaderstatus.COMPLETE,m.sendEvent(c.COMPLETE)},1e3)}function g(){l=b.loaderstatus.ERROR,m.sendEvent(c.ERROR,{url:d})}var h,i,j,k,l=b.loaderstatus.NEW,m=new c.eventdispatcher;b.extend(this,m),this.load=function(){if(l===b.loaderstatus.NEW)if(0<d.lastIndexOf(".swf"))h=d,l=b.loaderstatus.COMPLETE,m.sendEvent(c.COMPLETE);else if(b.getPluginPathType(d)===b.pluginPathType.CDN)l=b.loaderstatus.COMPLETE,m.sendEvent(c.COMPLETE);else{l=b.loaderstatus.LOADING;var a=new b.scriptloader(e());a.addEventListener(c.COMPLETE,f),a.addEventListener(c.ERROR,g),a.load()}},this.registerPlugin=function(a,d,e,f){k&&(clearTimeout(k),k=void 0),j=d,e&&f?(h=f,i=e):"string"==typeof e?h=e:"function"==typeof e?i=e:!e&&!f&&(h=a),l=b.loaderstatus.COMPLETE,m.sendEvent(c.COMPLETE)},this.getStatus=function(){return l},this.getPluginName=function(){return b.getPluginName(d)},this.getFlashPath=function(){if(h)switch(b.getPluginPathType(h)){case b.pluginPathType.ABSOLUTE:return h;case b.pluginPathType.RELATIVE:return 0<d.lastIndexOf(".swf")?b.getAbsolutePath(h,window.location.href):b.getAbsolutePath(h,e())}return null},this.getJS=function(){return i},this.getTarget=function(){return j},this.getPluginmode=function(){return"undefined"!=typeof h&&"undefined"!=typeof i?a.pluginmodes.HYBRID:"undefined"!=typeof h?a.pluginmodes.FLASH:"undefined"!=typeof i?a.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(a,b,c){return new i(a,b,c)},this.getURL=function(){return d}}}(jwplayer.plugins),function(a){var b=a.utils,c=a.events,d=a._,e=b.foreach;a.plugins.pluginloader=function(a,f){function g(){l||(l=!0,k=b.loaderstatus.COMPLETE,p.sendEvent(c.COMPLETE))}function h(){if(!o&&((!m||0===d.keys(m).length)&&g(),!l)){var e=a.getPlugins();j=d.after(n,g),b.foreach(m,function(a){a=b.getPluginName(a);var d=e[a];a=d.getJS();var f=d.getTarget(),d=d.getStatus();d===b.loaderstatus.LOADING||d===b.loaderstatus.NEW||(a&&!b.versionCheck(f)&&p.sendEvent(c.ERROR,{message:"Incompatible player version"}),j())})}}function i(a){o||(p.sendEvent(c.ERROR,{message:"File not found"}),a.url&&b.log("File not found",a.url),h())}var j,k=b.loaderstatus.NEW,l=!1,m=f,n=d.size(m),o=!1,p=new c.eventdispatcher;b.extend(this,p),this.setupPlugins=function(c,d,f){var g={length:0,plugins:{}},h=0,i={},j=a.getPlugins();return e(d.plugins,function(a,e){var k=b.getPluginName(a),l=j[k],m=l.getFlashPath(),n=l.getJS(),o=l.getURL();m&&(g.plugins[m]=b.extend({},e),g.plugins[m].pluginmode=l.getPluginmode(),g.length++);try{if(n&&d.plugins&&d.plugins[o]){var p=document.createElement("div");p.id=c.id+"_"+k,p.style.position="absolute",p.style.top=0,p.style.zIndex=h+10,i[k]=l.getNewInstance(c,b.extend({},d.plugins[o]),p),h++,c.onReady(f(i[k],p,!0)),c.onResize(f(i[k],p))}}catch(q){b.log("ERROR: Failed to load "+k+".")}}),c.plugins=i,g},this.load=function(){if(!b.exists(f)||"object"===b.typeOf(f)){k=b.loaderstatus.LOADING,e(f,function(d){b.exists(d)&&(d=a.addPlugin(d),d.addEventListener(c.COMPLETE,h),d.addEventListener(c.ERROR,i))});var d=a.getPlugins();e(d,function(a,b){b.load()})}h()},this.destroy=function(){o=!0,p&&(p.resetEventListeners(),p=null)},this.pluginFailed=i,this.getStatus=function(){return k}}}(jwplayer),function(a){a.parsers={localName:function(a){return a?a.localName?a.localName:a.baseName?a.baseName:"":""},textContent:function(b){return b?b.textContent?a.utils.trim(b.textContent):b.text?a.utils.trim(b.text):"":""},getChildNode:function(a,b){return a.childNodes[b]},numChildren:function(a){return a.childNodes?a.childNodes.length:0}}}(jwplayer),function(a){var b=a.parsers;(b.jwparser=function(){}).parseEntry=function(c,d){for(var e=[],f=[],g=a.utils.xmlAttribute,h=0;h<c.childNodes.length;h++){var i=c.childNodes[h];if("jwplayer"===i.prefix){var j=b.localName(i);"source"===j?(delete d.sources,e.push({file:g(i,"file"),"default":g(i,"default"),label:g(i,"label"),type:g(i,"type")})):"track"===j?(delete d.tracks,f.push({file:g(i,"file"),"default":g(i,"default"),kind:g(i,"kind"),label:g(i,"label")})):(d[j]=a.utils.serialize(b.textContent(i)),"file"===j&&d.sources&&delete d.sources)}d.file||(d.file=d.link)}if(e.length)for(d.sources=[],h=0;h<e.length;h++)0<e[h].file.length&&(e[h]["default"]="true"===e[h]["default"]?!0:!1,e[h].label.length||delete e[h].label,d.sources.push(e[h]));if(f.length)for(d.tracks=[],h=0;h<f.length;h++)0<f[h].file.length&&(f[h]["default"]="true"===f[h]["default"]?!0:!1,f[h].kind=f[h].kind.length?f[h].kind:"captions",f[h].label.length||delete f[h].label,d.tracks.push(f[h]));return d}}(jwplayer),function(a){var b=jwplayer.utils,c=b.xmlAttribute,d=a.localName,e=a.textContent,f=a.numChildren,g=a.mediaparser=function(){};g.parseGroup=function(a,h){var i,j,k=[];for(j=0;j<f(a);j++)if(i=a.childNodes[j],"media"===i.prefix&&d(i))switch(d(i).toLowerCase()){case"content":c(i,"duration")&&(h.duration=b.seconds(c(i,"duration"))),0<f(i)&&(h=g.parseGroup(i,h)),c(i,"url")&&(h.sources||(h.sources=[]),h.sources.push({file:c(i,"url"),type:c(i,"type"),width:c(i,"width"),label:c(i,"label")}));break;case"title":h.title=e(i);break;case"description":h.description=e(i);break;case"guid":h.mediaid=e(i);break;case"thumbnail":h.image||(h.image=c(i,"url"));break;case"group":g.parseGroup(i,h);break;case"subtitle":var l={};if(l.file=c(i,"url"),l.kind="captions",0<c(i,"lang").length){var m=l;i=c(i,"lang");var n={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};i=n[i]?n[i]:i,m.label=i}k.push(l)}for(h.hasOwnProperty("tracks")||(h.tracks=[]),j=0;j<k.length;j++)h.tracks.push(k[j]);return h}}(jwplayer.parsers),function(a){function b(b){for(var e={},f=0;f<b.childNodes.length;f++){var h=b.childNodes[f],i=g(h);if(i)switch(i.toLowerCase()){case"enclosure":e.file=c.xmlAttribute(h,"url");break;case"title":e.title=d(h);break;case"guid":e.mediaid=d(h);break;case"pubdate":e.date=d(h);break;case"description":e.description=d(h);break;case"link":e.link=d(h);break;case"category":e.tags=e.tags?e.tags+d(h):d(h)}}return e=a.mediaparser.parseGroup(b,e),e=a.jwparser.parseEntry(b,e),new jwplayer.playlist.item(e)}var c=jwplayer.utils,d=a.textContent,e=a.getChildNode,f=a.numChildren,g=a.localName;a.rssparser={},a.rssparser.parse=function(a){for(var c=[],d=0;d<f(a);d++){var h=e(a,d);if("channel"===g(h).toLowerCase())for(var i=0;i<f(h);i++){var j=e(h,i);"item"===g(j).toLowerCase()&&c.push(b(j))}}return c}}(jwplayer.parsers),function(a){var b=a.utils,c=a._;a.playlist=function(b){var d=[];return b=c.isArray(b)?b:[b],c.each(b,function(b){d.push(new a.playlist.item(b))}),d},a.playlist.filterPlaylist=function(a,e){var f=[];return c.each(a,function(a){if(a=b.extend({},a),a.sources=d(a.sources,!1,e),a.sources.length){for(var c=0;c<a.sources.length;c++)a.sources[c].label=a.sources[c].label||c.toString();f.push(a)}}),f};var d=a.playlist.filterSources=function(d,e,f){var g,h=[],i=e?a.embed.flashCanPlay:a.embed.html5CanPlay;return d?(c.each(d,function(a){if(a&&a.file){var c=b.trim(""+a.file),d=a.type;d||(d=b.extension(c),d=b.extensionmap.extType(d)),a=b.extend({},a,{file:c,type:d})}else a=void 0;a&&i(a.file,a.type,f)&&(g=g||a.type,a.type===g&&h.push(a))}),h):void 0}}(jwplayer),function(a){var b=a.item=function(c){var d,e,f=jwplayer.utils,g=f.extend({},b.defaults,c);for(g.tracks=c&&f.exists(c.tracks)?c.tracks:[],0===g.sources.length&&(g.sources=[new a.source(g)]),d=0;d<g.sources.length;d++)e=g.sources[d]["default"],g.sources[d]["default"]=e?"true"===e.toString():!1,g.sources[d]=new a.source(g.sources[d]);if(g.captions&&!f.exists(c.tracks)){for(c=0;c<g.captions.length;c++)g.tracks.push(g.captions[c]);delete g.captions}for(d=0;d<g.tracks.length;d++)g.tracks[d]=new a.track(g.tracks[d]);return g};b.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(a){var b=a.utils,c=a.events,d=a.parsers;a.playlist.loader=function(){function e(b){try{var e=b.responseXML.childNodes;b="";for(var f=0;f<e.length&&(b=e[f],!(8!==b.nodeType));f++);if("xml"===d.localName(b)&&(b=b.nextSibling),"rss"!==d.localName(b))g("Not a valid RSS feed");else{var i=new a.playlist(d.rssparser.parse(b));h.sendEvent(c.JWPLAYER_PLAYLIST_LOADED,{playlist:i})}}catch(j){g()}}function f(a){g(a.match(/invalid/i)?"Not a valid RSS feed":"")}function g(a){h.sendEvent(c.JWPLAYER_ERROR,{message:a?a:"Error loading file"})}var h=new c.eventdispatcher;b.extend(this,h),this.load=function(a){b.ajax(a,e,f)}}}(jwplayer),function(a){var b=jwplayer.utils,c={file:void 0,label:void 0,type:void 0,"default":void 0};a.source=function(a){var d=b.extend({},c);return b.foreach(c,function(c){b.exists(a[c])&&(d[c]=a[c],delete a[c])}),d.type&&0<d.type.indexOf("/")&&(d.type=b.extensionmap.mimeType(d.type)),"m3u8"===d.type&&(d.type="hls"),"smil"===d.type&&(d.type="rtmp"),d}}(jwplayer.playlist),function(a){var b=jwplayer.utils,c={file:void 0,label:void 0,kind:"captions","default":!1};a.track=function(a){var d=b.extend({},c);return a||(a={}),b.foreach(c,function(c){b.exists(a[c])&&(d[c]=a[c],delete a[c])}),d}}(jwplayer.playlist),function(a){function b(a,b,d){var e=a.style;e.backgroundColor="#000",e.color="#FFF",e.width=c.styleDimension(d.width),e.height=c.styleDimension(d.height),e.display="table",e.opacity=1,d=document.createElement("p"),e=d.style,e.verticalAlign="middle",e.textAlign="center",e.display="table-cell",e.font="15px/20px Arial, Helvetica, sans-serif",d.innerHTML=b.replace(":",":<br>"),a.innerHTML="",a.appendChild(d)}var c=a.utils,d=a.events,e=a._,f=a.embed=function(g){function h(){if(!v){var b=o.playlist;if(e.isArray(b)){if(0===b.length)return void k();if(!(1!==b.length||b[0].sources&&0!==b[0].sources.length&&b[0].sources[0].file))return void k()}if(!u)if(e.isString(b))n=new a.playlist.loader,n.addEventListener(d.JWPLAYER_PLAYLIST_LOADED,function(a){o.playlist=a.playlist,u=!1,h()}),n.addEventListener(d.JWPLAYER_ERROR,function(a){u=!1,k(a)}),u=!0,n.load(o.playlist);else if(t.getStatus()===c.loaderstatus.COMPLETE){for(b=0;b<o.modes.length;b++){var j=o.modes[b],m=j.type;if(m&&f[m]){var p=c.extend({},o);if(w=new f[m](z,j,p,t,g),w.supportsConfig())return w.addEventListener(d.ERROR,i),w.embed(),c.css("object.jwswf, .jwplayer:focus",{outline:"none"}),c.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),g}}o.fallback?(b="No suitable players found and fallback enabled",l(b,!0),c.log(b),new f.download(z,o,k)):(b="No suitable players found and fallback disabled",l(b,!1),c.log(b))}}}function i(a){m(r+a.message)}function j(a){g.dispatchEvent(d.JWPLAYER_ERROR,{message:"Could not load plugin: "+a.message})}function k(a){m(a&&a.message?"Error loading playlist: "+a.message:r+"No playable sources found")}function l(a,b){clearTimeout(x),x=setTimeout(function(){g.dispatchEvent(d.JWPLAYER_SETUP_ERROR,{message:a,fallback:b})},0)}function m(a){v||(s.parentNode.replaceChild(z,s),o.fallback?(v=!0,b(z,a,o),l(a,!0)):l(a,!1))}var n,o=new f.config(g.config),p=o.width,q=o.height,r="Error loading player: ",s=document.getElementById(g.id),t=a.plugins.loadPlugins(g.id,o.plugins),u=!1,v=!1,w=null,x=-1;o.id=g.id,o.aspectratio?g.config.aspectratio=o.aspectratio:delete g.config.aspectratio;var y=g;c.foreach(o.events,function(a,b){var c=y[a];"function"==typeof c&&c.call(y,b)});var z=document.createElement("div");return z.id=s.id,z.style.width=0<p.toString().indexOf("%")?p:p+"px",z.style.height=0<q.toString().indexOf("%")?q:q+"px",this.embed=function(){v||(t.addEventListener(d.COMPLETE,h),t.addEventListener(d.ERROR,j),t.load())},this.destroy=function(){w&&(w.destroy(),w=null),t&&(t.destroy(),t=null),n&&(n.resetEventListeners(),n=null)},this.errorScreen=m,this};a.embed.errorScreen=b}(jwplayer),function(a){function b(a){if(a.playlist)for(var b=0;b<a.playlist.length;b++)a.playlist[b]=new e(a.playlist[b]);else{var f={};d.foreach(e.defaults,function(b){c(a,f,b)}),f.sources||(a.levels?(f.sources=a.levels,delete a.levels):(b={},c(a,b,"file"),c(a,b,"type"),f.sources=b.file?[b]:[])),a.playlist=[new e(f)]}}function c(a,b,c){d.exists(a[c])&&(b[c]=a[c],delete a[c])}var d=a.utils,e=a.playlist.item;(a.embed.config=function(c){var e={fallback:!0,height:270,primary:"html5",width:480,base:c.base?c.base:d.getScriptPath("jwplayer.js"),aspectratio:""};c=d.extend({},e,a.defaults,c);var e={type:"html5",src:c.base+"jwplayer.html5.js"},f={type:"flash",src:c.base+"jwplayer.flash.swf"};if(c.modes="flash"===c.primary?[f,e]:[e,f],c.listbar&&(c.playlistsize=c.listbar.size,c.playlistposition=c.listbar.position,c.playlistlayout=c.listbar.layout),c.flashplayer&&(f.src=c.flashplayer),c.html5player&&(e.src=c.html5player),b(c),f=c.aspectratio,"string"==typeof f&&d.exists(f)){var g=f.indexOf(":");-1===g?e=0:(e=parseFloat(f.substr(0,g)),f=parseFloat(f.substr(g+1)),e=0>=e||0>=f?0:100*(f/e)+"%")}else e=0;return-1===c.width.toString().indexOf("%")?delete c.aspectratio:e?c.aspectratio=e:delete c.aspectratio,c}).addConfig=function(a,c){return b(c),d.extend(a,c)}}(jwplayer),function(a){function b(a,b){function d(a,b){e[f].style[a]=b}for(var e=document.querySelectorAll(a),f=0;f<e.length;f++)c.foreach(b,d)}var c=a.utils;a.embed.download=function(a,d,e){function f(a,b,c){return a=document.createElement(a),b&&(a.className="jwdownload"+b),c&&c.appendChild(a),a}var g,h,i=c.extend({},d),j=i.width?i.width:480,k=i.height?i.height:320;d=d.logo?d.logo:{prefix:c.repo(),file:"logo.png",margin:10};var l,m,n,o,p,q;if(m=i.playlist,i=["mp4","aac","mp3"],m&&m.length){for(n=m[0],o=n.sources,m=0;m<o.length;m++)p=o[m],p.file&&(q=p.type||c.extensionmap.extType(c.extension(p.file)),0<=c.indexOf(i,q)?(g=p.file,h=n.image):c.isYouTube(p.file,q)&&(l=p.file));g?(e=g,a&&(g=f("a","display",a),f("div","icon",g),f("div","logo",g),e&&g.setAttribute("href",c.getAbsolutePath(e))),e="#"+a.id+" .jwdownload",a.style.width="",a.style.height="",b(e+"display",{width:c.styleDimension(Math.max(320,j)),height:c.styleDimension(Math.max(180,k)),background:"black center no-repeat "+(h?"url("+h+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),b(e+"display div",{position:"absolute",width:"100%",height:"100%"}),b(e+"logo",{top:d.margin+"px",right:d.margin+"px",background:"top right no-repeat url("+d.prefix+d.file+")"}),b(e+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):l?(d=l,a=f("iframe","",a),a.src="http://www.youtube.com/embed/"+c.youTubeID(d),a.width=j,a.height=k,a.style.border="none"):e()}}}(jwplayer),function(a){var b=a.utils,c=a.events,d={};(a.embed.flash=function(f,g,h,i,j){function k(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function l(a,b,c){return function(){try{c&&document.getElementById(j.id+"_wrapper").appendChild(b);var d=document.getElementById(j.id).getPluginConfig("display");"function"==typeof a.resize&&a.resize(d.width,d.height),b.style.left=d.x,b.style.top=d.h}catch(e){}}}function m(a){if(!a)return{};var c={},d=[];return b.foreach(a,function(a,e){var f=b.getPluginName(a);d.push(a),b.foreach(e,function(a,b){c[f+"."+a]=b})}),c.plugins=d.join(","),c}var n=new a.events.eventdispatcher,o=b.flashVersion();b.extend(this,n),this.embed=function(){if(h.id=j.id,10>o)return n.sendEvent(c.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var a,e,p=f.id,q=j.config.listbar,r=b.extend({},h);if(a=document.getElementById(j.id),a.parentNode.replaceChild(f,a),p+"_wrapper"===f.parentNode.id)a=document.getElementById(p+"_wrapper");else{if(a=document.createElement("div"),e=document.createElement("div"),e.style.display="none",e.id=p+"_aspect",a.id=p+"_wrapper",a.style.position="relative",a.style.display="block",a.style.width=b.styleDimension(r.width),a.style.height=b.styleDimension(r.height),j.config.aspectratio){var s=parseFloat(j.config.aspectratio);e.style.display="block",e.style.marginTop=j.config.aspectratio,a.style.height="auto",a.style.display="inline-block",q&&("bottom"===q.position?e.style.paddingBottom=q.size+"px":"right"===q.position&&(e.style.marginBottom=-1*q.size*(s/100)+"px"))}f.parentNode.replaceChild(a,f),a.appendChild(f),a.appendChild(e)}for(q=i.setupPlugins(j,r,l),0<q.length?b.extend(r,m(q.plugins)):delete r.plugins,"undefined"!=typeof r["dock.position"]&&"false"===r["dock.position"].toString().toLowerCase()&&(r.dock=r["dock.position"],delete r["dock.position"]),q=r.wmode||(r.height&&40>=r.height?"transparent":"opaque"),e="height width modes events primary base fallback volume".split(" "),s=0;s<e.length;s++)delete r[e[s]];e=b.getCookies(),b.foreach(e,function(a,b){"undefined"==typeof r[a]&&(r[a]=b)}),e=window.location.href.split("/"),e.splice(e.length-1,1),e=e.join("/"),r.base=e+"/",d[p]=r,b.isMSIE()?(f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+p+'" name="'+p+'" tabindex="0"><param name="movie" value="'+g.src+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="seamlesstabbing" value="true"><param name="wmode" value="'+q+'"><param name="bgcolor" value="#000000"></object>',a=a.getElementsByTagName("object")[0],a.style.outline="none"):(a=document.createElement("object"),a.setAttribute("type","application/x-shockwave-flash"),a.setAttribute("data",g.src),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("bgcolor","#000000"),a.setAttribute("id",p),a.setAttribute("name",p),a.className="jwswf",k(a,"allowfullscreen","true"),k(a,"allowscriptaccess","always"),k(a,"seamlesstabbing","true"),k(a,"wmode",q),f.parentNode.replaceChild(a,f)),j.config.aspectratio&&(a.style.position="absolute",a.style.left="0"),j.container=a,j.setPlayer(a,"flash")},this.supportsConfig=function(){if(o){if(!h)return!0;if("string"===b.typeOf(h.playlist))return!0;try{var a=h.playlist[0].sources;if("undefined"==typeof a)return!0;for(var c=0;c<a.length;c++)if(a[c].file&&e(a[c].file,a[c].type))return!0}catch(d){}}return!1},this.destroy=function(){}}).getVars=function(a){return d[a]};var e=a.embed.flashCanPlay=function(a,c){if(b.isYouTube(a,c)||b.isRtmp(a,c)||"hls"===c)return!0;var d=b.extensionmap[c?c:b.extension(a)];return d?!!d.flash:!1}}(jwplayer),function(a){var b,c=a.utils,d=c.extensionmap,e=a.events;a.embed.html5=function(d,f,g,h,i){function j(a,b,c){return function(){try{var e=document.querySelector("#"+d.id+" .jwmain");c&&e.appendChild(b),"function"==typeof a.resize&&(a.resize(e.clientWidth,e.clientHeight),setTimeout(function(){a.resize(e.clientWidth,e.clientHeight)},400)),b.left=e.style.left,b.top=e.style.top}catch(f){}}}var k=new e.eventdispatcher;c.extend(this,k),this.embed=function(){if(a.html5){h.setupPlugins(i,g,j),c.emptyElement(d);var b=a.utils.extend({},g);delete b.volume,b=new a.html5.player(b),i.setPlayer(b,"html5")}else this.loadEmbedder()},this.loadEmbedder=function(){b=b||new c.scriptloader(f.src),b.addEventListener(e.ERROR,this.loadError),b.addEventListener(e.COMPLETE,this.embed),b.load()},this.loadError=function(a){this.sendEvent(a.type,{message:"HTML5 player not found"})},this.supportsConfig=function(){if(a.vid.canPlayType)try{if("string"===c.typeOf(g.playlist))return!0;for(var b=g.playlist[0].sources,d=0;d<b.length;d++)if(a.embed.html5CanPlay(b[d].file,b[d].type,g.androidhls))return!0}catch(e){}return!1},this.destroy=function(){b&&(b.resetEventListeners(),b=null)}},a.embed.html5CanPlay=function(b,e,f){if(null!==navigator.userAgent.match(/BlackBerry/i)||c.isIE(9))return!1;if(c.isYouTube(b,e))return!0;var g=c.extension(b);if(e=e||d.extType(g),"hls"===e)if(f){if(f=c.isAndroidNative,f(2)||f(3)||f("4.0"))return!1;if(c.isAndroid())return!0}else if(c.isAndroid())return!1;if(c.isRtmp(b,e))return!1;if(b=d[e]||d[g],!b||b.flash&&!b.html5)return!1;var h;a:if(b=b.html5){try{h=!!a.vid.canPlayType(b);break a}catch(i){}h=!1}else h=!0;return h}}(jwplayer),function(a){var b=a.embed,c=a.embed.html5CanPlay,d=a.utils,e=a._,f=/\.(js|swf)$/;a.cast=a.cast||{},a.embed=d.extend(function(c){function e(){g="Adobe SiteCatalyst Error: Could not find Media Module"}var g,h=d.repo(),i=d.extend({},a.defaults),j=d.extend({},i,c.config),k=c.config,l=j.plugins,m=j.analytics,n=h+"jwpsrv.js",o=h+"sharing.js",p=h+"related.js",q=h+"gapro.js",i=a.key?a.key:i.key,r=new a.utils.key(i).edition(),l=l?l:{};switch("ads"==r&&j.advertising&&(f.test(j.advertising.client)?l[j.advertising.client]=j.advertising:l[h+j.advertising.client+".js"]=j.advertising),delete k.advertising,k.key=i,j.analytics&&f.test(j.analytics.client)&&(n=j.analytics.client),delete k.analytics,m&&!("ads"===r||"enterprise"===r)&&delete m.enabled,"free"!=r&&m&&!1===m.enabled||(l[n]=m?m:{}),delete l.sharing,delete l.related,r){case"ads":case"enterprise":if(k.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new a.embed.sitecatalyst(c):e()}catch(s){e()}case"premium":j.related&&(f.test(j.related.client)&&(p=j.related.client),l[p]=j.related),j.ga&&(f.test(j.ga.client)&&(q=j.ga.client),l[q]=j.ga);case"pro":j.sharing&&(f.test(j.sharing.client)&&(o=j.sharing.client),l[o]=j.sharing),j.skin&&(k.skin=j.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,d.repo()+"skins/$1.xml"))}return k.plugins=l,c.config=k,c=new b(c),g&&c.errorScreen(g),c},a.embed),a.embed.html5CanPlay=function(b,d){var f,g={file:b,type:d};return f=a.html5&&a.html5.chooseProvider?a.html5.chooseProvider(g)!==a.html5.VideoProvider:e.any(a.unregisteredProviders,function(a){return a.supports(g)}),f?!0:c.apply(this,arguments)}}(jwplayer),function(a){var b=jwplayer.utils;a.sitecatalyst=function(a){function c(a){l.debug&&b.log(a)}function d(a){return a=a.split("/"),a=a[a.length-1],a=a.split("?"),a[0]}function e(){if(!n){n=!0;var a=k.getPosition();c("stop: "+g+" : "+a),s.Media.stop(g,a)}}function f(){o||(e(),o=!0,c("close: "+g),s.Media.close(g),j=!0,i=0)}var g,h,i,j,k=a,l=b.extend({},k.config.sitecatalyst),m={onPlay:function(){if(!j){var a=k.getPosition();n=!1,c("play: "+g+" : "+a),s.Media.play(g,a)}},onPause:e,onBuffer:e,onIdle:f,onPlaylistItem:function(a){try{j=!0,f(),i=0;var c;if(l.mediaName)c=l.mediaName;else{var e=k.getPlaylistItem(a.index);c=e.title?e.title:e.file?d(e.file):e.sources&&e.sources.length?d(e.sources[0].file):""}g=c,h=l.playerName?l.playerName:k.id}catch(m){b.log(m)}},onTime:function(){if(j){var a=k.getDuration();if(-1==a)return;o=n=j=!1,c("open: "+g+" : "+a+" : "+h),s.Media.open(g,a,h),c("play: "+g+" : 0"),s.Media.play(g,0)}if(a=k.getPosition(),3<=Math.abs(a-i)){var b=i;c("seek: "+b+" to "+a),c("stop: "+g+" : "+b),s.Media.stop(g,b),c("play: "+g+" : "+a),s.Media.play(g,a)}i=a},onComplete:f},n=!0,o=!0;b.foreach(m,function(a){k[a](m[a])})}}(jwplayer.embed),function(a){function b(a,b){a[b]&&(a[b]=c.getAbsolutePath(a[b]))}var c=a.utils,d=a._,e=window.location.href;a.cast.setupCastConfig=function(d,f){var g=c.extend({},d.config);g.cast=c.extend({pageUrl:e},f);for(var h="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar events".split(" "),i=h.length;i--;)delete g[h[i]];h=g.plugins,delete g.plugins;for(var j in h)if(h.hasOwnProperty(j)){var k=h[j];if(k.client&&(/[\.\/]/.test(k.client)&&b(k,"client"),-1<k.client.indexOf("vast"))){if(i=g,k=c.extend({},k),k.client="vast",delete k.companiondiv,k.schedule){var l=void 0;for(l in k.schedule)k.schedule.hasOwnProperty(l)&&b(k.schedule[l].ad||k.schedule[l],"tag")}b(k,"tag"),i.advertising=k}}return d.position&&(g.position=d.position),0<d.item&&(g.item=d.item),g.captionLabel=c.getCookies().captionLabel,g.playerVersion=a.version,g},a.cast.setupFlashCastConfig=function(b){var e=b.config;e.playlist=b.getPlaylist();var f;return(f=d.find(e.plugins,function(a,b){return 0<b.indexOf("vast.js")}))?(f.client="vast",f={advertising:f}):f={},e=d.pick(e,"id captionLabel cast key playlist repeat".split(" ")),e.cast.pageUrl=window.location.href,c.extend(e,{playerVersion:a.version,captionLabel:c.getCookies().captionLabel,volume:b.getVolume(),mute:b.getMute(),id:b.id,position:b.getPosition(),item:b.getPlaylistIndex()},f),e}}(window.jwplayer),function(a,b){function c(a,b){a[b]&&(a[b]=e.getAbsolutePath(a[b]))}var d=b.cast,e=b.utils,f=b.events,g=f.state,h={};d.NS="urn:x-cast:com.longtailvideo.jwplayer",d.debug=!1,d.availability=null,d.available=function(b){b=b||d.availability;var c=a.chrome,e="available";return c.cast&&c.cast.ReceiverAvailability&&(e=c.cast.ReceiverAvailability.AVAILABLE),b===e},d.controller=function(i,j){function k(a,b){d.log("send command",a,b);var c={command:a};void 0!==b&&(c.args=b),I.sendMessage(d.NS,c,E,function(a){d.log("error message",a),"Invalid namespace"===a.description&&s()})}function l(a){a=!!d.available(a.availability),J.available!==a&&(J.available=a,p(f.JWPLAYER_CAST_AVAILABLE))}function m(a){d.log("existing session",a),!I&&!P&&(P=a.session,P.addMessageListener(d.NS,n))}function n(a,c){var e=JSON.parse(c);if(!e)throw"Message not proper JSON";if(e.reconcile){P.removeMessageListener(d.NS,n);var g=e.diff,h=P;g.id&&e.appid&&e.pageUrl||(g.id=b().id,e.appid=H.appid,e.pageUrl=L,P=I=null),g.id===i.id&&e.appid===H.appid&&e.pageUrl===L&&(I||(i.jwInstreamState()&&i.jwInstreamDestroy(!0),u(h),j.sendEvent(f.JWPLAYER_PLAYER_STATE,{oldstate:g.oldstate,newstate:g.newstate})),z(e)),P=null}}function o(a){J.active=!!a,a=J;var b;b=I&&I.receiver?I.receiver.friendlyName:"",a.deviceName=b,p(f.JWPLAYER_CAST_SESSION,{})}function p(a){var b=e.extend({},J);j.sendEvent(a,b)}function q(b){var c=a.chrome;b.code!==c.cast.ErrorCode.CANCEL&&(d.log("Cast Session Error:",b,I),b.code===c.cast.ErrorCode.SESSION_ERROR&&s())}function r(b){var c=a.chrome;b.code!==c.cast.ErrorCode.CANCEL&&(d.log("Cast Session Error:",b,I),b.code===c.cast.ErrorCode.SESSION_ERROR&&s())}function s(){I?(x(),I.stop(w,t),A({item:0}),z({type:"state",diff:{buffer:0,position:0,duration:0}})):w()}function t(a){d.error("Cast Session Stop error:",a,I),w()}function u(c){if(d.log("Session started:",c),I)s(),Q=c;else{I=c,I.addMessageListener(d.NS,y),I.addUpdateListener(v),i.jwPause(!0),i.jwSetFullscreen(!1),O=j.getVideo(),F=j.volume,G=j.mute,M=new d.provider(k),M.init(),j.setVideoProvider(M),i.jwPlay=function(a){!1===a?M.pause():M.play()},i.jwPause=function(a){i.jwPlay(!!a)},i.jwLoad=function(a){"number"===e.typeOf(a)&&j.setItem(a),M.load(a)},i.jwPlaylistItem=function(a){"number"===e.typeOf(a)&&j.setItem(a),M.playlistItem(a)},i.jwPlaylistNext=function(){i.jwPlaylistItem(j.item+1)},i.jwPlaylistPrev=function(){i.jwPlaylistItem(j.item-1)},i.jwSetVolume=function(a){e.exists(a)&&(a=0|Math.min(Math.max(0,a),100),C(a)&&(a=Math.max(0,Math.min(a/100,1)),I.setReceiverVolumeLevel(a,B,function(a){d.error("set volume error",a),B()})))},i.jwSetMute=function(a){e.exists(a)||(a=!K.mute),D(a)&&I.setReceiverMuted(!!a,B,function(a){d.error("set muted error",a),B()})},i.jwGetVolume=function(){
return 0|K.volume},i.jwGetMute=function(){return!!K.mute},i.jwIsBeforePlay=function(){return!1};var h=i.jwSetCurrentCaptions;i.jwSetCurrentCaptions=function(a){h(a),M.sendCommand("caption",a)},i.jwSkipAd=function(a){N&&(N.skipAd(a),a=N.getAdModel(),a.complete=!0,j.sendEvent(f.JWPLAYER_CAST_AD_CHANGED,a))},i.jwClickAd=function(c){if(N&&300<N.timeSinceClick()&&(N.clickAd(c),j.state!==g.PAUSED)){var d={tag:c.tag};c.sequence&&(d.sequence=c.sequence),c.podcount&&(d.podcount=c.podcount),b(i.id).dispatchEvent(f.JWPLAYER_AD_CLICK,d),a.open(c.clickthrough)}},i.jwPlayAd=i.jwPauseAd=i.jwSetControls=i.jwForceState=i.jwReleaseState=i.jwSetFullscreen=i.jwDetachMedia=i.jwAttachMedia=E;var l=b(i.id).plugins;l.vast&&l.vast.jwPauseAd!==E&&(R={jwPlayAd:l.vast.jwPlayAd,jwPauseAd:l.vast.jwPauseAd},l.vast.jwPlayAd=l.vast.jwPauseAd=E),B(),o(!0),c!==P&&(M.setup(b.cast.setupCastConfig(j,H),j),b.cast.loader.sendDummyMedia(c))}}function v(a){d.log("Cast Session status",a),a?B():(M.sendEvent(f.JWPLAYER_PLAYER_STATE,{oldstate:j.state,newstate:g.BUFFERING}),w())}function w(){if(d.log("_sessionStopped"),I&&(x(),I=null),O){delete i.jwSkipAd,delete i.jwClickAd,i.initializeAPI();var a=b(i.id).plugins;a.vast&&e.extend(a.vast,R),j.volume=F,j.mute=G,j.setVideoProvider(O),j.duration=0,M&&(M.destroy(),M=null),N&&(N.destroy(),N=null),j.state!==g.IDLE?e.isIPad()||e.isIPod()?(i.jwStop(!0),O.sendEvent(f.JWPLAYER_PLAYER_STATE,{oldstate:g.BUFFERING,newstate:g.IDLE})):(j.state=g.IDLE,i.jwPlay(!0),i.jwSeek(j.position)):O.sendEvent(f.JWPLAYER_PLAYER_STATE,{oldstate:g.BUFFERING,newstate:g.IDLE}),O=null}o(!1),null!==Q&&(u(Q),Q=null)}function x(){I.removeUpdateListener(v),I.removeMessageListener(d.NS,y)}function y(a,b){var c=JSON.parse(b);if(!c)throw"Message not proper JSON";z(c)}function z(a){if("state"===a.type)N&&(a.diff.newstate||a.diff.position)&&(N.destroy(),N=null,j.setVideoProvider(M),j.sendEvent(f.JWPLAYER_CAST_AD_CHANGED,{done:!0})),M.updateModel(a.diff,a.type),A(a.diff);else if("ad"===a.type){null===N&&(N=new d.adprovider(d.NS,I),N.init(),j.setVideoProvider(N)),N.updateModel(a.diff,a.type);var b=N.getAdModel();a.diff.clickthrough&&(b.onClick=i.jwClickAd),a.diff.skipoffset&&(b.onSkipAd=i.jwSkipAd),j.sendEvent(f.JWPLAYER_CAST_AD_CHANGED,b),a.diff.complete&&N.resetAdModel()}else"connection"===a.type?!0===a.closed&&s():d.error("received unhandled message",a.type,a)}function A(a){void 0!==a.item&&j.item!==a.item&&(j.item=a.item,j.sendEvent(f.JWPLAYER_PLAYLIST_ITEM,{index:j.item}))}function B(){if(I&&I.receiver){var a=I.receiver.volume;if(a){var b=100*a.level|0;D(!!a.muted),C(b)}}}function C(a){var b=K.volume!==a;return b&&(K.volume=a,M.sendEvent(f.JWPLAYER_MEDIA_VOLUME,{volume:a})),b}function D(a){var b=K.mute!==a;return b&&(K.mute=a,M.sendEvent(f.JWPLAYER_MEDIA_MUTE,{mute:a})),b}function E(){}var F,G,H,I=null,J={available:!1,active:!1,deviceName:""},K={volume:null,mute:null},L=e.getAbsolutePath(a.location.href),M=null,N=null,O=null;F=j.volume,G=j.mute;var P=null,Q=null,R=null;H=e.extend({},h,j.cast),c(H,"loadscreen"),c(H,"endscreen"),c(H,"logo"),!H.appid||a.cast&&a.cast.receiver||(d.loader.addEventListener("availability",l),d.loader.addEventListener("session",m),d.loader.initialize(H.appid)),this.startCasting=function(){I||i.jwInstreamState()||a.chrome.cast.requestSession(u,q)},this.stopCasting=s,this.openExtension=function(){i.jwInstreamState()||a.chrome.cast.requestSession(u,r)}},d.log=function(){if(d.debug){var a=Array.prototype.slice.call(arguments,0);console.log.apply(console,a)}},d.error=function(){var a=Array.prototype.slice.call(arguments,0);console.error.apply(console,a)}}(window,jwplayer),function(a){function b(a){r.log("existing session",a),!q&&!o&&(o=a.session,o.addMessageListener(r.NS,c))}function c(b,d){var e=JSON.parse(d),f=o;if(!e)throw"Message not proper JSON";e.reconcile&&(o.removeMessageListener(r.NS,c),e.receiverFriendlyName=o.receiver.friendlyName,e.pageUrl&&e.diff.id&&e.appid||(e.pageUrl=x,e.diff.id=a().id,e.appid=n,o=q=null),v[e.diff.id]&&n===e.appid&&e.pageUrl===x&&(m=e.diff.id,n=e.appid,k(m,"jwInstreamDestroy"),g(f),k(m,w.message,e),o=null))}function d(){q&&(q.removeUpdateListener(j),q.removeMessageListener(r.NS,h),q.stop(e.bind(this),i.bind(this)),q=null),k(m,w.cleanup)}function e(){"undefined"!=typeof p&&null!==p&&(g(p),p=null)}function f(a,b){q.sendMessage(r.NS,{command:a,args:b},s.noop,function(a){r.error("message send error",a)})}function g(b){var c=a(m);q?(d(),p=b):(q=b,q.addMessageListener(r.NS,h),q.addUpdateListener(j),c=a.cast.setupFlashCastConfig(c),o!==q&&(f("setup",c),a.cast.loader.sendDummyMedia(q)),k(m,w.connected,{receiverFriendlyName:b.receiver.friendlyName}))}function h(a,b){if(b){var c=JSON.parse(b);if(!c)throw"Message not proper JSON";k(m,w.message,c)}}function i(a){k(m,w.error,a||{})}function j(a){a?l():d()}function k(b,c,d){d?a(b).callInternal(c,d):a(b).callInternal(c)}function l(){if(q&&q.receiver){var b=q.receiver.volume;if(b){var c=100*b.level|0,b=!!b.muted;a(m).setVolume(c).setMute(b)}}}var m,n,o,p,q,r=a.cast,s=a.utils,t=a._,u=window.chrome||{},v={},w={},x=s.getAbsolutePath(window.location.href);r.NS="urn:x-cast:com.longtailvideo.jwplayer",r.flash={checkAvailability:function(a,c,d){w=d,n=c,v[a]=!0,r.loader.addEventListener("availability",function(b){"available"===b.availability&&k(a,w.available,b)}),r.loader.addEventListener("session",b),r.loader.initialize(c)},startCasting:function(a){m=a,u.cast.requestSession(g.bind(this),i.bind(this))},stopCasting:d,openExtension:function(a){m=a,u.cast.requestSession(g.bind(this),i.bind(this))},mute:function(a){q.setReceiverMuted(a,l,function(a){r.error("set muted error",a)})},volume:function(a){a=Math.max(0,Math.min(a/100,1)),q.setReceiverVolumeLevel(a,l,function(a){r.error("set volume error",a)})},messageReceiver:f,canCastItem:function(b){return t.any(b.levels,function(b){return a.embed.html5CanPlay(b.file,b.type)||"hls"===b.type})}}}(window.jwplayer),function(a,b){function c(a){var c=new b.cast.media.MediaInfo("");c.contentType="video/mp4",c=new b.cast.media.LoadRequest(c),c.autoplay=!1,a.loadMedia(c)}function d(){b&&b.cast&&b.cast.isAvailable&&!k.apiConfig?(k.apiConfig=new b.cast.ApiConfig(new b.cast.SessionRequest(o),h,i,b.cast.AutoJoinPolicy.ORIGIN_SCOPED),b.cast.initialize(k.apiConfig,g,f)):15>n++&&setTimeout(d,1e3)}function e(){j&&(j.resetEventListeners(),j=null)}function f(){k.apiConfig=null}function g(){}function h(a){p.sendEvent("session",{session:a}),a.sendMessage(k.NS,{whoami:1}),0===a.media.length&&c(a)}function i(a){k.availability=a,p.sendEvent("availability",{availability:a})}window.chrome=b;var j,k=a.cast,l=a.utils,m=a.events,n=0,o=null,p=l.extend({initialize:function(a){o=a,null!==k.availability?p.sendEvent("availability",{availability:k.availability}):b&&b.cast?d():j||(j=new l.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),j.addEventListener(m.ERROR,e),j.addEventListener(m.COMPLETE,d),j.load())}},new m.eventdispatcher("cast.loader"));a.cast.loader=p,a.cast.loader.sendDummyMedia=c}(window.jwplayer,window.chrome||{}),function(a,b){var c=[],d=a.utils,e=a.events,f=a._,g=0,h=e.state,i="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),j="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),k={onBufferChange:e.JWPLAYER_MEDIA_BUFFER,onBufferFull:e.JWPLAYER_MEDIA_BUFFER_FULL,onError:e.JWPLAYER_ERROR,onSetupError:e.JWPLAYER_SETUP_ERROR,onFullscreen:e.JWPLAYER_FULLSCREEN,onMeta:e.JWPLAYER_MEDIA_META,onMute:e.JWPLAYER_MEDIA_MUTE,onPlaylist:e.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:e.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:e.JWPLAYER_PLAYLIST_COMPLETE,onReady:e.API_READY,onResize:e.JWPLAYER_RESIZE,onComplete:e.JWPLAYER_MEDIA_COMPLETE,onSeek:e.JWPLAYER_MEDIA_SEEK,onTime:e.JWPLAYER_MEDIA_TIME,onVolume:e.JWPLAYER_MEDIA_VOLUME,onBeforePlay:e.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:e.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:e.JWPLAYER_DISPLAY_CLICK,onControls:e.JWPLAYER_CONTROLS,onQualityLevels:e.JWPLAYER_MEDIA_LEVELS,onQualityChange:e.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:e.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:e.JWPLAYER_CAPTIONS_CHANGED,onAdError:e.JWPLAYER_AD_ERROR,onAdClick:e.JWPLAYER_AD_CLICK,onAdImpression:e.JWPLAYER_AD_IMPRESSION,onAdTime:e.JWPLAYER_AD_TIME,onAdComplete:e.JWPLAYER_AD_COMPLETE,onAdCompanions:e.JWPLAYER_AD_COMPANIONS,onAdSkipped:e.JWPLAYER_AD_SKIPPED,onAdPlay:e.JWPLAYER_AD_PLAY,onAdPause:e.JWPLAYER_AD_PAUSE,onAdMeta:e.JWPLAYER_AD_META,onCast:e.JWPLAYER_CAST_SESSION,onAudioTrackChange:e.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:e.JWPLAYER_AUDIO_TRACKS},l={onBuffer:h.BUFFERING,onPause:h.PAUSED,onPlay:h.PLAYING,onIdle:h.IDLE};a.api=function(g){function m(a,b){d.foreach(a,function(a,c){t[a]=function(a){return b(c,a)}})}function n(a,b){var c="jw"+b.charAt(0).toUpperCase()+b.slice(1);t[b]=function(){var b=q.apply(this,[c].concat(Array.prototype.slice.call(arguments,0)));return a?t:b}}function o(a,b){try{a.jwAddEventListener(b,'function(dat) { jwplayer("'+t.id+'").dispatchEvent("'+b+'", dat); }')}catch(c){if("flash"===t.renderingMode){var e=document.createElement("a");e.href=r.data,e.protocol!==location.protocol&&d.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+e.protocol+"] are hosted using different protocols")}d.log("Could not add internal listener")}}function p(a,b){return u[a]||(u[a]=[],r&&w&&o(r,a)),u[a].push(b),t}function q(){if(w){if(r){var a=Array.prototype.slice.call(arguments,0),b=a.shift();if("function"==typeof r[b]){switch(a.length){case 6:return r[b](a[0],a[1],a[2],a[3],a[4],a[5]);case 5:return r[b](a[0],a[1],a[2],a[3],a[4]);case 4:return r[b](a[0],a[1],a[2],a[3]);case 3:return r[b](a[0],a[1],a[2]);case 2:return r[b](a[0],a[1]);case 1:return r[b](a[0])}return r[b]()}}return null}x.push(arguments)}var r,s,t=this,u={},v={},w=!1,x=[],y={},z={};return t.container=g,t.id=g.id,t.setup=function(b){if(a.embed){a.api.destroyPlayer(t.id);var c=new a.api(t.container);return a.api.addPlayer(c),c.config=b,c._embedder=new a.embed(c),c._embedder.embed(),c}return t},t.getContainer=function(){return t.container},t.addButton=function(a,b,c,e){try{z[e]=c,q("jwDockAddButton",a,b,'jwplayer("'+t.id+'").callback("'+e+'")',e)}catch(f){d.log("Could not add dock button"+f.message)}},t.removeButton=function(a){q("jwDockRemoveButton",a)},t.callback=function(a){z[a]&&z[a]()},t.getMeta=function(){return t.getItemMeta()},t.getPlaylist=function(){var a=q("jwGetPlaylist");return"flash"===t.renderingMode&&d.deepReplaceKeyName(a,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),a},t.getPlaylistItem=function(a){return d.exists(a)||(a=t.getPlaylistIndex()),t.getPlaylist()[a]},t.getRenderingMode=function(){return t.renderingMode},t.setFullscreen=function(a){return d.exists(a)?q("jwSetFullscreen",a):q("jwSetFullscreen",!q("jwGetFullscreen")),t},t.setMute=function(a){return d.exists(a)?q("jwSetMute",a):q("jwSetMute",!q("jwGetMute")),t},t.lock=function(){return t},t.unlock=function(){return t},t.load=function(b){return q("jwInstreamDestroy"),a(t.id).plugins.googima&&q("jwDestroyGoogima"),q("jwLoad",b),t},t.playlistItem=function(a){return q("jwPlaylistItem",parseInt(a,10)),t},t.resize=function(a,b){if("flash"!==t.renderingMode)q("jwResize",a,b);else{var c=document.getElementById(t.id+"_wrapper"),e=document.getElementById(t.id+"_aspect");e&&(e.style.display="none"),c&&(c.style.display="block",c.style.width=d.styleDimension(a),c.style.height=d.styleDimension(b))}return t},t.play=function(a){if(a!==b)return q("jwPlay",a),t;a=t.getState();var c=s&&s.getState();return c&&q(c===h.IDLE||c===h.PLAYING||c===h.BUFFERING?"jwInstreamPause":"jwInstreamPlay"),q(a===h.PLAYING||a===h.BUFFERING?"jwPause":"jwPlay"),t},t.pause=function(a){return a===b?(a=t.getState(),q(a===h.PLAYING||a===h.BUFFERING?"jwPause":"jwPlay")):q("jwPause",a),t},t.createInstream=function(){return new a.api.instream(this,r)},t.setInstream=function(a){return s=a},t.loadInstream=function(a,b){return s=t.setInstream(t.createInstream()).init(b),s.loadItem(a),s},t.destroyPlayer=function(){w=!0,q("jwPlayerDestroy")},t.playAd=function(b){var c=a(t.id).plugins;c.vast?c.vast.jwPlayAd(b):q("jwPlayAd",b)},t.pauseAd=function(){var b=a(t.id).plugins;b.vast?b.vast.jwPauseAd():q("jwPauseAd")},m(l,function(a,b){return v[a]||(v[a]=[],p(e.JWPLAYER_PLAYER_STATE,function(b){var c=b.newstate;if(b=b.oldstate,c===a){var d=v[c];if(d)for(var e=0;e<d.length;e++){var f=d[e];"function"==typeof f&&f.call(this,{oldstate:b,newstate:c})}}})),v[a].push(b),t}),m(k,p),d.foreach(i,function(a,b){n(!1,b)}),d.foreach(j,function(a,b){n(!0,b)}),t.remove=function(){this._embedder&&this._embedder.destroy&&this._embedder.destroy(),x=[];var a=1<f.size(f.where(c,{id:t.id}));a||d.clearCss("#"+t.id);var b=document.getElementById(t.id+("flash"===t.renderingMode?"_wrapper":""));if(b){if("html5"===t.renderingMode)t.destroyPlayer();else if(d.isMSIE(8)){var e=document.getElementById(t.id);if(e&&e.parentNode){e.style.display="none";for(var g in e)"function"==typeof e[g]&&(e[g]=null);e.parentNode.removeChild(e)}}a||(a=document.createElement("div"),a.id=t.id,b.parentNode.replaceChild(a,b))}c=f.filter(c,function(a){return a.uniqueId!==t.uniqueId})},t.registerPlugin=function(b,c,d,e){a.plugins.registerPlugin(b,c,d,e)},t.setPlayer=function(a,b){r=a,t.renderingMode=b},t.detachMedia=function(){return"html5"===t.renderingMode?q("jwDetachMedia"):void 0},t.attachMedia=function(a){return"html5"===t.renderingMode?q("jwAttachMedia",a):void 0},t.getAudioTracks=function(){return q("jwGetAudioTracks")},t.removeEventListener=function(a,b){var c=u[a];if(c)for(var d=c.length;d--;)c[d]===b&&c.splice(d,1)},t.dispatchEvent=function(a,b){var c=u[a];if(c)for(var c=c.slice(0),f=d.translateEventResponse(a,b),g=0;g<c.length;g++){var h=c[g];if("function"==typeof h)try{a===e.JWPLAYER_PLAYLIST_LOADED&&d.deepReplaceKeyName(f.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),h.call(this,f)}catch(i){d.log("There was an error calling back an event handler",i)}}},t.dispatchInstreamEvent=function(a){s&&s.dispatchEvent(a,arguments)},t.callInternal=q,t.playerReady=function(a){for(w=!0,r||t.setPlayer(document.getElementById(a.id)),t.container=document.getElementById(t.id),d.foreach(u,function(a){o(r,a)}),p(e.JWPLAYER_PLAYLIST_ITEM,function(){y={}}),p(e.JWPLAYER_MEDIA_META,function(a){d.extend(y,a.metadata)}),p(e.JWPLAYER_VIEW_TAB_FOCUS,function(a){var b=t.getContainer();!0===a.hasFocus?d.addClass(b,"jw-tab-focus"):d.removeClass(b,"jw-tab-focus")}),t.dispatchEvent(e.API_READY);0<x.length;)q.apply(t,x.shift())},t.getItemMeta=function(){return y},t},a.playerReady=function(b){var c=a.api.playerById(b.id);c||(c=a.api.selectPlayer(b.id)),c.playerReady(b)},a.api.selectPlayer=function(b){var e;return d.exists(b)||(b=0),b.nodeType?e=b:"string"==typeof b&&(e=document.getElementById(b)),e?(b=a.api.playerById(e.id))?b:new a.api(e):"number"==typeof b?c[b]:null},a.api.playerById=function(a){for(var b=0;b<c.length;b++)if(c[b].id===a)return c[b];return null},a.api.addPlayer=function(a){for(var b=0;b<c.length;b++)if(c[b]===a)return a;return g++,a.uniqueId=g,c.push(a),a},a.api.destroyPlayer=function(a){a=f.where(c,{id:a}),f.each(a,f.partial(f.result,f,"remove"))}}(window.jwplayer),function(a){var b=a.events,c=a.utils,d=b.state;a.api.instream=function(a,e){function f(b,c){return j[b]||(j[b]=[],e.jwInstreamAddEventListener(b,'function(dat) { jwplayer("'+a.id+'").dispatchInstreamEvent("'+b+'", dat); }')),j[b].push(c),this}function g(a,c){return k[a]||(k[a]=[],f(b.JWPLAYER_PLAYER_STATE,function(b){var c=b.newstate,d=b.oldstate;if(c===a){var e=k[c];if(e)for(var f=0;f<e.length;f++){var g=e[f];"function"==typeof g&&g.call(this,{oldstate:d,newstate:c,type:b.type})}}})),k[a].push(c),this}var h,i,j={},k={},l=this;l.type="instream",l.init=function(){return a.callInternal("jwInitInstream"),l},l.loadItem=function(b,d){h=b,i=d||{},"array"===c.typeOf(b)?a.callInternal("jwLoadArrayInstream",h,i):a.callInternal("jwLoadItemInstream",h,i)},l.removeEvents=function(){j=k={}},l.removeEventListener=function(a,b){var c=j[a];if(c)for(var d=c.length;d--;)c[d]===b&&c.splice(d,1)},l.dispatchEvent=function(a,b){var d=j[a];if(d)for(var d=d.slice(0),e=c.translateEventResponse(a,b[1]),f=0;f<d.length;f++){var g=d[f];"function"==typeof g&&g.call(this,e)}},l.onError=function(a){return f(b.JWPLAYER_ERROR,a)},l.onMediaError=function(a){return f(b.JWPLAYER_MEDIA_ERROR,a)},l.onFullscreen=function(a){return f(b.JWPLAYER_FULLSCREEN,a)},l.onMeta=function(a){return f(b.JWPLAYER_MEDIA_META,a)},l.onMute=function(a){return f(b.JWPLAYER_MEDIA_MUTE,a)},l.onComplete=function(a){return f(b.JWPLAYER_MEDIA_COMPLETE,a)},l.onPlaylistComplete=function(a){return f(b.JWPLAYER_PLAYLIST_COMPLETE,a)},l.onPlaylistItem=function(a){return f(b.JWPLAYER_PLAYLIST_ITEM,a)},l.onTime=function(a){return f(b.JWPLAYER_MEDIA_TIME,a)},l.onBuffer=function(a){return g(d.BUFFERING,a)},l.onPause=function(a){return g(d.PAUSED,a)},l.onPlay=function(a){return g(d.PLAYING,a)},l.onIdle=function(a){return g(d.IDLE,a)},l.onClick=function(a){return f(b.JWPLAYER_INSTREAM_CLICK,a)},l.onInstreamDestroyed=function(a){return f(b.JWPLAYER_INSTREAM_DESTROYED,a)},l.onAdSkipped=function(a){return f(b.JWPLAYER_AD_SKIPPED,a)},l.play=function(a){e.jwInstreamPlay(a)},l.pause=function(a){e.jwInstreamPause(a)},l.hide=function(){a.callInternal("jwInstreamHide")},l.destroy=function(){l.removeEvents(),a.callInternal("jwInstreamDestroy")},l.setText=function(a){e.jwInstreamSetText(a?a:"")},l.getState=function(){return e.jwInstreamState()},l.setClick=function(a){e.jwInstreamClick&&e.jwInstreamClick(a)}}}(jwplayer),function(a){var b=a.api,c=b.selectPlayer,d=a._;b.selectPlayer=function(b){var d=c.apply(this,arguments);return d?d:{registerPlugin:function(b,c,d){"jwpsrv"!==b&&a.plugins.registerPlugin(b,c,d)}}},a.unregisteredProviders=[],b.registerProvider=function(b){a&&a.html5&&d.isFunction(a.html5.registerProvider)?a.html5.registerProvider(b):a.unregisteredProviders.push(b)}}(jwplayer)),jwplayer.key="8ZEJ4ezwrpWZovJqzfloVK7xgaAb+jJwnYS9YQ==","https:"===location.protocol?jwplayer.defaults={flashplayer:"https://ssl.p.jwpcdn.com/6/12/jwplayer.flash.swf",html5player:"https://ssl.p.jwpcdn.com/6/12/jwplayer.html5.js",ph:1}:jwplayer.defaults={flashplayer:"http://p.jwpcdn.com/6/12/jwplayer.flash.swf",html5player:"http://p.jwpcdn.com/6/12/jwplayer.html5.js",ph:1},define("jwPlayer",["angular"],function(){}),define("directives/common/pt-playerjw",["app","text!views/directives/common/pt-playerjw.html"],function(a,b){a.directive("ptPlayerjw",[function(){return{restrict:"A",template:b,scope:{params:"=",isopen:"="},controller:["$scope",function(a){require(["jwPlayer"],function(){jwplayer.key="cAr98kB89aA0ZhpVmJqMLQGxXGRUXKjW3Z9DlufTILI=",a.isopen&&(a.mode="list",jwplayer("playerGVtPteKoWxwx").setup(a.params))})}]}}])}),define("directives/common/pt-carousel",["app","text!views/directives/common/pt-carousel.html","directives/common/pt-enquireForm","directives/common/pt-property-config-overlay","services/fullScreenService","formatters/common","services/constants","directives/common/pt-loading-block","directives/common/pt-youtube","parsers/imageParser","directives/common/pt-playerjw"],function(a,b){a.directive("ptImagecarousel",["$location",function(a){return{restrict:"A",scope:{images:"=",settings:"=",imagesfullview:"=",index:"=",focus:"@",unique:"=",leadData:"=",has3dimages:"=",floorplanlisting:"=",landmarkcount:"=",ispropertypage:"="},template:b,link:function(b,c){var d=!0;b.focus&&(d=b.focus),d===!0&&""===a.hash()&&window.setTimeout(function(){$(c[0].children[0]).focus()},1e3)},controller:["$scope","$rootScope","$element","$attrs","$timeout","FullScreenService","Formatter","Constants","$modal","ImageParser",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q=null,r=!1,s=function(){a.totalImages=0,a.carouselSteps=0,l=0,m=0,a.carouselWidth=0,a.carouselWidth=0};a.leadConfig={isModal:!1,cEnabled:!1,lEnabled:!1,showForm:!1},a.leadConfig.showform=!1,a.options={skin:"",width:1150,height:300,imageWidth:320,imageHeight:240,width100Proc:!1,height100Proc:!1,fadeSlides:!0,responsive:!0,responsiveRelativeToBrowser:!0,numberOfThumbsPerScreen:0,showBottomNav:!0,ptzoomControlVisible:!1,thumbnailWidth:60,thumbnailHeight:40,thumbnailMargin:5,showLabel:!0},a.$on("$destroy",function(){$(window).unbind("resize")}),a.$on("closeCarouselLead",function(){a.leadConfig.showform=!1}),a.openform=function(){a.leadConfig.showform=!0},a.closeform=function(){a.leadConfig.showform=!1},a.$on("leadpushed",function(){a.closeform()});var t=function(){var c=v();if(q)if(b.floorImageType3dImg===!0&&q.floor3dImage||b.floorImageTypeWT===!0&&q.walkThrough){var d=w();p=d.floorwidth,o=d.floorheight,a.calWidth=d.floorwidth,a.calHeight=d.floorheight}else p=c.width,o=c.height,a.calWidth=c.width,a.calHeight=c.height},u=function(){t(),a.zoomLevel=1,a.calLeft="inherit",a.calTop="inherit",c.find(".image-info").css("top","inherit"),c.find(".image-info").css("left","inherit"),a.isZoomIn="",a.isZoomOut="disabled",a.isZoomReset="disabled"},v=function(){var b,c,d,e,f,g,i;q&&(b=parseInt(h.IMAGES.LARGE.width)/parseInt(q.width),c=parseInt(h.IMAGES.LARGE.height)/parseInt(q.height),d=c>b?b:c,e=q.height*d,f=q.width*d,b=parseInt(a.options.height)/parseInt(e),c=parseInt(a.options.width)/parseInt(f),d=c>b?b:c,g=e*d,i=f*d);var j={};return q&&(g>e||q.height<g)?e>q.height?j.height=parseInt(q.height):j.height=parseInt(e):j.height=parseInt(g),q&&(i>f||q.width<i)?f>q.width?j.width=parseInt(q.width):j.width=parseInt(f):j.width=parseInt(i),j},w=function(){q.floor3DImageWidth=q.floor3DImageWidth?q.floor3DImageWidth:q.walkThroughWidth,q.floor3DImageHeight=q.floor3DImageHeight?q.floor3DImageHeight:q.walkThroughHeight;var b,c,d,e,f,g,i;q&&(b=parseInt(h.IMAGES.LARGE.width)/parseInt(q.floor3DImageWidth),c=parseInt(h.IMAGES.LARGE.height)/parseInt(q.floor3DImageHeight),d=c>b?b:c,e=q.floor3DImageHeight*d,f=q.floor3DImageWidth*d,b=parseInt(a.options.height)/parseInt(e),c=parseInt(a.options.width)/parseInt(f),d=c>b?b:c,g=e*d,i=f*d);var j={};return g>e||q.floor3DImageHeight<g?e>q.floor3DImageHeight?j.floorheight=parseInt(q.floor3DImageHeight):j.floorheight=parseInt(e):j.floorheight=parseInt(g),i>f||q.floor3DImageWidth<i?f>q.floor3DImageWidth?j.floorwidth=parseInt(q.floor3DImageWidth):j.floorwidth=parseInt(f):j.floorwidth=parseInt(i),j};a.ZoomIn=function(){a.zoomLevel<4&&(a.zoomLevel++,x())},a.ZoomOut=function(){a.zoomLevel>2?(a.zoomLevel--,x()):u()};var x=function(){var b,c,d,e;if(t(),b=Math.round(p*a.zoomLevel*.55),c=Math.round(o*a.zoomLevel*.55),"inherit"==a.calLeft)d=a.calWidth-b/2,e=a.calHeight-c/2;else{var f=b/a.calWidth,g=a.calWidth/2,h=a.calHeight/2;d=g-g*f,e=h-h*f}a.calWidth=b,a.calHeight=c,a.calLeft=d+"px",a.calTop=e+"px",a.zoomLevel>0&&(a.isZoomIn="",a.isZoomOut="",a.isZoomReset=""),a.zoomLevel>3?(a.isZoomIn="disabled",a.isZoomOut=""):a.zoomLevel<=0&&(a.isZoomIn="",a.isZoomOut="disabled",a.isZoomReset="disabled")};a.ZoomReset=function(){u()};var y=[["floorImageTypeWT","walkThrough"],["floorImageType3dImg","floor3dImage"],["floorImageTypeImg","largeImage"]],z=function(){for(var c=0;3>c;c++)if(a.ptslides[a.currentIndex][y[c][1]]){b[y[c%3][0]]=!0,b[y[(c+1)%3][0]]=!1,b[y[(c+2)%3][0]]=!1;break}},A=function(){if(b.userChoice&&a.ptslides[a.currentIndex][b.userChoice]){for(var c=0;3>c;c++)if(b.userChoice===y[c][1]){b[y[c%3][0]]=!0,b[y[(c+1)%3][0]]=!1,b[y[(c+2)%3][0]]=!1;break}}else z()};a.$on("galaryclose",function(){a.options.height100Proc=!1,b.userChoice=null,z()}),a.Next=function(){k=a.currentIndex,a.currentIndex<a.totalImages-1?a.currentIndex++:a.currentIndex=0,F(),a.ptslides[a.currentIndex]&&D(a.ptslides[a.currentIndex],1),a.ptslides[k]&&E(a.ptslides[k]),B(),a.ptslides[a.currentIndex]&&(A(k),a.svg_details=g.isSvgDetail(a.ptslides[a.currentIndex].svg_details))},a.Previous=function(){k=a.currentIndex,a.currentIndex>0?a.currentIndex--:a.currentIndex=a.totalImages-1,F(),a.ptslides[a.currentIndex]&&D(a.ptslides[a.currentIndex],-1),a.ptslides[k]&&E(a.ptslides[k]),B(),a.ptslides[a.currentIndex]&&(A(k),a.svg_details=g.isSvgDetail(a.ptslides[a.currentIndex].svg_details))};var B=function(){a.options.height100Proc&&b.$broadcast("imageChange",{id:a.unique,index:a.currentIndex}),q.video?a.isloadervisible=!1:a.isloadervisible=!0,a.set3DimageFloorSize(q)};a.$on("imageChange",function(b,c){r=!0,c.id==a.unique&&a.SetImage(c.index)}),a.openConfigOverlay=function(){a.configOverlay=!0},a.closeConfigOverlay=function(){a.configOverlay=!1},a.currentIconIndex=null,a.currentRowIndex=0;var C=function(a,b){var c,d=-1;return angular.forEach(b,function(b,e){a>=b.startindex&&d<b.startindex&&(c=e,d=b.startindex)}),c};"undefined"==typeof b.floorImageType3dImg&&(b.floorImageType3dImg=!0),a.SetImage=function(b,c,d,e,f){var h;a.floorPlanStartingIndex>=0&&(a.selectedProperty=a.overlayConfig[b-a.floorPlanStartingIndex],h=b-a.floorPlanStartingIndex),a.selectedconstructionImage=a.constructionDetail.config[C(b,a.constructionDetail.config)],a.selectedneighborImage=a.neighbourDetail.config[C(b,a.neighbourDetail.config)],a.selectedRow[0]=0===a.currentRowIndex?"selectedRow":"";var i=0;if("undefined"!=typeof h&&a.currentRowIndex!==h){for(a.currentRowIndex=h,i=0;i<a.selectedRow.length;i++)a.selectedRow[i]="";a.selectedRow[a.currentRowIndex]="selectedRow"}if(d&&d.preventDefault(),e)for(i=0;i<a.iconClassIndex.length;i++)a.iconClassIndex[i]="";if(a.currentIndex!=b){var j;j=b>a.currentIndex?1:-1,k=a.currentIndex,b>=0&&b<a.totalImages&&(a.currentIndex=b,F(c)),a.ptslides[a.currentIndex]&&D(a.ptslides[a.currentIndex],j),a.ptslides[k]&&E(a.ptslides[k]),B(),a.ptslides[a.currentIndex]&&(A(k),a.svg_details=g.isSvgDetail(a.ptslides[a.currentIndex].svg_details))}},a.keypress=function(b){37===b.which&&(a.Previous(),b.preventDefault()),39===b.which&&(a.Next(),b.preventDefault())};var D=function(b,c){b&&(q=b,b.visible=!0,b.thumbClass="thumbsHolder_ThumbOFF thumbsHolder_ThumbON",b.imageClass="currentImage",-1==c?q.slideClass="carouselSlideInLeft":q.slideClass="carouselSlideInRight"),$.each(a.buckets,function(b,c){a.currentIndex>=c.minRange&&a.currentIndex<=c.maxRange?(c["class"]="selected",a.type=c.name,a.hideswitch="Floor Plans"===a.type?!0:!1):c["class"]=""}),u(),q&&q.walkThrough&&(a.params={sources:q.walkThrough,image:q.walkThroughThumb,height:"100%",width:"100%",autostart:"false",ga:{}}),a.ptslides[a.currentIndex]&&A(),a.ptslides[a.currentIndex]&&(a.svg_details=g.isSvgDetail(a.ptslides[a.currentIndex].svg_details))},E=function(b){for(var c=0;c<a.ptslides.length;c++)c!=a.currentIndex&&(a.ptslides[c].visible=!1,a.ptslides[c].thumbClass="thumbsHolder_ThumbOFF",a.ptslides[c].imageClass="")},F=function(b){a.currentIndex>=l*m?(l+=1,F(),b?e(function(){G()},1500):G()):a.currentIndex<l*m-m&&(l-=1,F(),b?e(function(){G()},1500):G())};a.scrollThumbnailsLeft=function(){l>=a.carouselSteps||(l+=1,G())},a.scrollThumbnailsRight=function(){1>=l||(l-=1,G())};var G=function(){var b=-1*(a.carouselVisibleWidth*(l-1)),d="px",e=b+d;$(c).find(".carouselIndicators").animate({left:e},800),a.rightScrollClass="",a.leftScrollClass="",1>=l?a.leftScrollClass="carouselLeftNavDisabled":l>=a.carouselSteps&&(a.rightScrollClass="carouselRightNavDisabled")},H=null;a.toggelThumbviewer=function(){var b=($($(".imagerContainer")[$(".imagerContainer").length-1]),$($(".pt-carousel-collection")[$(".pt-carousel-collection").length-1])),c=$($(".pt-thums-img-gallery")[$(".pt-thums-img-gallery").length-1]),d=$($(".image-info")[$(".image-info").length-1]);a.hidethumbs?(c.animate({height:H},1e3),b.animate({height:b.height()-H},1e3),d.animate({top:0},1e3),a.hidethumbs=!1):(H=c.height(),b.animate({height:b.height()+H-1},1e3),c.animate({height:1},1e3),1===a.zoomLevel&&d.animate({top:H/2},1e3),a.hidethumbs=!0)},a.toggleform=function(){var b=$($(".pt-carousel-right-panel")[$(".pt-carousel-right-panel").length-1]);a.collapseleadform?(b.animate({right:0},1e3),a.collapseleadform=!1):(b.animate({right:-b.width()},1e3),a.collapseleadform=!0)};var I=function(){var b,c;m=parseInt(a.options.width/(a.options.thumbnailWidth+a.options.thumbnailMargin)),a.carouselSteps=a.totalImages/m,c=a.totalImages/m,b=parseInt(c),c>b&&(b+=1),a.carouselSteps=b,a.carouselWidth=a.totalImages*(a.options.thumbnailWidth+2*a.options.thumbnailMargin),a.carouselVisibleWidth=m*(a.options.thumbnailWidth+a.options.thumbnailMargin)+a.options.thumbnailMargin},J=function(){a.buckets=[];var b,c=0;for(b=0;a.currentImageObject&&b<a.currentImageObject.length;b++)a.buckets[b]={},a.buckets[b].name=a.currentImageObject[b].index+" ("+a.currentImageObject[b].data.length+")",a.buckets[b].minRange=c,a.buckets[b]["class"]="",c+=a.currentImageObject[b].data.length,a.buckets[b].maxRange=c-1};a.expand=function(){var b=f.openGallery(a.images,a.currentIndex,a.unique,a.leadData,a.has3dimages,a.floorplanlisting,a.landmarkcount);b.result.then(function(a){$(c[0].children[0]).focus()},function(){$(c[0].children[0]).focus()})};var K=function(){var a=new Date,b=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();return b},L=function(a,b){a=new Date(a),b=new Date(b);var c=b.getTime()-a.getTime(),d={};return d.seconds=Math.floor(c/1e3),d},M=function(a){return a=a.toLowerCase(),a.replace(/(?:^|\s)\w/g,function(a){return a.toUpperCase()})};a.svg_mouseenter=function(b,c,d,e,f,g,h,i){$("."+b).css("opacity",.3),a.set_toolip(c,d,e,f,g,h,i)},a.svg_mouseout=function(a){$("."+a).css("opacity",.01),$(".floor_detail_tooltip").hide(1),$(".tooltip_arrow").css("visibility","hidden")};var N=function(a){return 2===a.length?Math.round(.12*a)+"''":1===a.length?Math.round(1.2*a)+"''":""};a.set_toolip=function(a,b,c,d,e,f,g){if($(".floor_tooltip .header").html(a),e){var h=e.split(".");h[0]&&(e=h[0]+"'"),h[1]&&(e+=N(h[1]))}else e="";if(f){var i=f.split(".");i[0]&&(f=i[0]+"'"),i[1]&&(f+=N(i[1]))}else f="";"Balcony"===a&&f?$(".floor_tooltip .content .details").html("Size : "+f+" ft wide"):f&&e&&"Balcony"!=a?$(".floor_tooltip .content .details").html("Size : "+e+"x"+f+" ft"):$(".floor_tooltip .content .details").html("Size : "),g?"Balcony"===a?$(".floor_tooltip .content .tip").text(""):$(".floor_tooltip .content .tip").text("Click for 360' Vtour"):$(".floor_tooltip .content .tip").text(""),"Top"===b?$(".floor_detail_tooltip").css({left:d-5+"%",top:"initial",bottom:81-c+"%",right:"initial"}):"Left"===b?$(".floor_detail_tooltip").css({left:"initial",top:c+"%",bottom:"initial",right:80-d+"%"}):"Bottom"===b?$(".floor_detail_tooltip").css({left:d-3+"%",top:c-1+"%",right:"initial",bottom:"initial"}):"Right"===b&&$(".floor_detail_tooltip").css({left:d-1+"%",top:c-1+"%",right:"initial",bottom:"initial"}),$(".floor_detail_tooltip, .floor_tooltip").show(1),$(".position_"+b).css("visibility","visible")},a.expandTour=function(c,d,e,f,g){if(e&&"Balcony"!=g){f?e=e+"?q="+f:e+="?q=",c=c?c:b.projId;var h=K(),j=M(a.ptslides[0].mainTitle)+", "+d+" "+M(a.ptslides[0].locality+", "+a.ptslides[0].city),k=$(window).height()-41,l=$(window).width();i.open({template:'<div class="threeDcaro-close-btn" ng-click="cancel()"><i class="pt pt-icon-times"></i></div><div class="threeDBottomText">This virtual tour is an artistic impression of the apartment. It may not be exact representation.</div><div class="threeDcaro-exit-tour"><button class="btn-action" ng-click="cancel()">Exit Tour</button></div><div><div class="threeD-buil-text-info">'+j+'</div><iframe id="iframe" src='+e+' height="'+k+'" width="'+l+'"></iframe></div>',windowClass:"threeDModalGallery",controller:["$scope","$modalInstance",function(a,b){a.cancel=function(){var a=K(),c=L(h,a);c.seconds,b.dismiss("cancel")}}]})}},a.closeFullView=function(){a.height100Proc&&a.collapse()},$(window).bind("resize",function(){a.$apply(function(){O()})});var O=function(){if(s(),J(),a.settings&&(a.options=$.extend(a.options,a.settings)),
a.options.responsiveRelativeToBrowser)var b=$(window).width(),c=$(window).height();a.options.width100Proc&&(a.options.width=b),a.options.height100Proc?(a.options.height=c-a.options.thumbnailHeight-40,a.options.divHeight=c-a.options.thumbnailHeight-40):a.options.divHeight=a.calHeight+10,"inherit"===a.calWidth&&(a.options.divWidth=a.width+10),a.options.divWidth=a.calWidth+10,k=0,l=1,a.leftScrollClass="carouselLeftNavDisabled",a.totalImages=a.ptslides.length,D(a.ptslides[a.currentIndex]),I(),E(),a.index>=0?a.SetImage(a.index,!0):a.ispropertypage&&a.floorPlanStartingIndex&&a.SetImage(a.floorPlanStartingIndex,!0)};a.imageLoaded=function(){a.isloadervisible=!1},a.set3DimageFloorSize=function(c,d){var e=v();if(d!==!0)if(b.floorImageType3dImg===!0&&c.floor3dImage||b.floorImageTypeWT===!0&&c.walkThrough){var f=w();a.calWidth=f.floorwidth,a.calHeight=f.floorheight}else a.calWidth=e.width,a.calHeight=e.height;else{var f=w();a.calWidth=f.floorwidth,a.calHeight=f.floorheight}},a.setImageFloorType=function(c,d,e){if(a.isZoomOut="disabled",a.isZoomIn="",a.zoomLevel=1,a.leadData?a.leadData.projectId:b.projId,"3D"===c&&"undefined"!=typeof _taq&&window._taq.events.push(["3DButtonClickedInGallery"+b.CURRENT_ACTIVE_PAGE,{url:window.location.href}]),b.floorImageTypeImg="2D"===c?!0:!1,b.floorImageType3dImg="3D"===c?!0:!1,b.floorImageTypeWT="WT"===c?!0:!1,b.userChoice="2D"===c?"largeImage":"3D"===c?"floor3dImage":"walkThrough",u(),a.currentIconIndex!==d){a.currentIconIndex=d;for(var f=0;f<a.iconClassIndex.length;f++)a.iconClassIndex[f]="";a.iconClassIndex[a.currentIconIndex]="active3DIcon"}a.set3DimageFloorSize(q)},a.Set3DImageForFirstClick=function(){for(var c=[],d=0,e=0,f=0;f<a.images.length;f++)if("Project & Floor Plans"===a.images[f].index){for(var g=0;f>g;g++)e+=a.images[g].data.length;for(var h=0;h<a.images[f].data.length;h++)a.images[f].data[h].floor3dImage&&c.push(h)}d=e+c[0],a.SetImage(d),a.ptslides[a.currentIndex]&&(b.userChoice="floor3dImage",A()),a.set3DimageFloorSize(q,!0)},a.$watch("images",function(b,c){if(a.isloadervisible=!0,b){a.instanceData=angular.copy(b),n=[];var d=a.instanceData;if(d.length>0){a.currentImageObject=d,$.each(a.currentImageObject,function(a,b){$.each(b.data,function(a,c){c.type=b.index,c.text?c.displayAltText=g.ucword(c.text):c.displayAltText=c.displayName,n.push(c)})}),a.ptslides=n;var e=j.getpropertyConfig(a.ptslides);a.constructionDetail=j.getconstructionConfig(a.ptslides),a.neighbourDetail=j.getneighbourConfig(a.ptslides,a.landmarkcount),a.overlayConfig=e.config,a.floorPlanStartingIndex=e.startIdx,a.iconClassIndex=new Array(a.overlayConfig.length),a.selectedRow=new Array(a.overlayConfig.length),a.totalImages=n.length,a.currentIndex=0,k=0,O()}else a.ptslides=[],a.showImage=!1,a.noImage=!0,a.noImageText="No Images for this project !"}else a.ptslides=[],a.showImage=!1,a.noImage=!0;a.$watch("floorplanlisting",function(b,c){b&&a.Set3DImageForFirstClick()})})}]}}]),a.directive("bnLoad",function(){function a(a,b,c){function d(){a.$eval(c.bnLoad)}function e(){a.$apply(function(){d()})}b[0].src&&b[0].complete?d():b.on("load.bnLoad",e),a.$on("$destroy",function(){b.off("load.bnLoad")})}return{link:a,restrict:"A"}})}),define("directives/common/pt-carouselFullScreen",["app","directives/common/pt-carousel"],function(a){a.directive("ptCarouselfullscreen",[function(){return{restrict:"A",scope:{images:"=",settings:"=",imagesfullview:"=",index:"=",unique:"=",leadData:"=",has3dimages:"=",floorplanlisting:"=",landmarkcount:"="},template:'<div pt-imagecarousel unique="unique" settings="settings" index="index" images="images" imagesfullview="images" lead-Data="leadData" has3dimages="has3dimages" floorplanlisting="floorplanlisting" landmarkcount="landmarkcount"></div>',controller:["$scope","$element",function(a,b){a.$on("$destroy",function(){b.remove()})}]}}])}),define("services/fullScreenService",["app","controllers/common/commonFullScreenCtrl","directives/common/pt-carouselFullScreen"],function(a){a.factory("FullScreenService",["$location","$modal","$timeout","$rootScope",function(a,b,c,d){var e,f=function(f,g,i,j,k,l,m){var n,o;return g>=0&&(n=g),f.data&&(f=f.data),o=b.open({template:'<div><div pt-carouselfullscreen has3dimages="has3dimages" floorplanlisting="setFloorPlanFromListing" unique="unique" settings="optionsFullView" index="index" images="images" imagesfullview="images" lead-data="leadData" landmarkcount="landmarkCount"></div></div><div data-ng-click="collapse()" class="caro-close-btn"><i class="pt pt-icon-times"></i></div></div>',controller:"commonfullscreenctrl",keyboard:!0,windowClass:"photoModalGallery",backdrop:!0,resolve:{images:function(){return f},index:function(){return n},unique:function(){return i},leadData:function(){return j},has3dimages:function(){return k},setFloorPlanFromListing:function(){return l},landmarkCount:function(){return m}}}),o.result.then(h,h),o.opened.then(function(){var b=a.hash(),c=b?"&":"";if(b.indexOf("openGallery")<0){var e=b+c+"openGallery";d.selfStateChange=!1,a.hash(e)}}),c(function(){e&&e.close()},1e3),o},g=function(){e=b.open({template:"<div></div>",keyboard:!0,windowClass:"photoModalGallery",backdrop:!0})},h=function(){d.selfStateChange||history.back()};return{openGallery:f,initGallery:g}}])}),define("text!views/directives/common/pt-interval.html",[],function(){return'<div class="time-controller-wrap">\n    <button id="" class="btn marginT5 btn-block dropdown-toggle" data-toggle="dropdown" title="Click to choose the Time Period">\n        <span class="put-ellipsis">{{duration.period}} {{duration.title}}</span> <i class="pt  pt-icon-caret-down"></i>\n    </button>\n\n    <div class="dropdown-menu dd-list">\n        <ul tabset class="timeControllerTabs">\n            <li tab heading="Monthly" id="Monthly" data-ng-click="$event.stopPropagation();">\n                <ul class="time-options">\n                    <li data-ng-repeat="period in constant.Monthly.period" data-ng-click="updateDuration($event, period, constant.Monthly)">\n						<i data-ng-class="duration.period == period && duration.key == \'month\' ? \'pt  pt-icon-dot-circle-o\' : \'pt  pt-icon-circle-o\'"></i>\n						Last {{period}} {{constant.Monthly.title}}\n					</li>\n                    <!--li><i class="pt  pt-icon-circle-o" ></i>  Custom</li-->\n                </ul>\n            </li>\n\n            <li tab heading="Quarterly" id="Quarterly" data-ng-click="$event.stopPropagation();" data-ng-show="constant.Quarterly">\n                <ul class="time-options">\n                    <li data-ng-repeat="period in constant.Quarterly.period" data-ng-click="updateDuration($event, period, constant.Quarterly)"><i class="pt  pt-icon-circle-o" ></i>  Last {{period}} {{constant.Quarterly.title}}</li>\n                </ul>\n            </li>\n\n            <li tab heading="Annualy" id="Annualy" data-ng-click="$event.stopPropagation();" data-ng-show="constant.Annualy">\n                <ul class="time-options">\n                    <li data-ng-repeat="period in constant.Annualy.period" data-ng-click="updateDuration($event, period, constant.Annualy)"><i class="pt  pt-icon-circle-o" ></i>  Last {{period}} {{constant.Annualy.title}}</li>\n                </ul>\n            </li>\n        </ul>\n\n        <!--div class="pt_row check-graph-change">\n            <div class="pt_col-1-9">\n                <i class="pt  pt-icon-square-o"></i>\n            </div>\n            <div class="pt_col-8-9">\n                Change time period for all graphs\n            </div>\n        </div-->\n    </div>\n</div>\n\n\n\n'}),define("directives/common/pt-interval",["app","text!views/directives/common/pt-interval.html","services/b2b-constants"],function(a,b){a.directive("ptInterval",["B2BConstants","GoogleAnalyticsService",function(a,c){return{restrict:"EA",scope:{durationChanged:"&",duration:"=?",constant:"=?",gaTitle:"@?",gaCategory:"@?"},template:b,link:function(a,b){},controller:["$scope","$element",function(b,d){if(b.constant||(b.constant=a.TIME_INTERVAL.DURATION),!b.duration){var e=a.TIME_INTERVAL.DEFAULT_DURATION;b.duration={title:b.constant[e.type].title,period:b.constant[e.type].period[e.period],key:b.constant[e.type].key}}b.updateDuration=function(a,d,e){c.gaEventSelectTitlePeriod(b.gaTitle,d,e,b.gaCategory),b.duration={period:d,title:e.title,key:e.key},$(a.target).parent().parent().parent().parent().find("i.pt-icon-dot-circle-o").addClass("pt-icon-circle-o").removeClass("pt-icon-dot-circle-o"),$(a.target).find("i").removeClass("pt-icon-circle-o").addClass("pt-icon-dot-circle-o")},b.$watch("duration",function(a,c){if(a){var d={type:a.key};d.months=a.period,b.durationChanged({data:d})}})}]}}])}),define("directives/base/pt-chart",["app"],function(a){a.directive("ptChart",["$timeout",function(a){return{restrict:"A",template:"<div></div>",scope:{chartOptions:"=chartConfig",size:"=chartSize"},link:function(b,c,d){function e(b){if(b){var c=!0,d={};$.extend(c,d,g,b),f&&f.destroy(),require(["highcharts","highchartsMore"],function(){f=new Highcharts.Chart(d),a(function(){h()})})}}var f,g;g={chart:{renderTo:c[0],height:b.size&&!isNaN(b.size.height)?b.size.height:null,width:b.size&&!isNaN(b.size.width)?b.size.width:null}};var h=function(a){a?f&&f.setSize(a.width,a.height,!0):$(window).resize()};b.$on("$destroy",function(){f&&f.destroy()}),b.$watch("chartOptions",e,!0),b.$watch("size",h,!0)}}}])}),define("configs/chartConfig",["app"],function(a){a.factory("ChartConfig",[function(){return{"default":{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{backgroundColor:"none",type:"line",reflow:!0},credits:{enabled:!1},series:{negativeColor:"#df2034"},yAxis:[{title:{style:{color:"#848484",fontSize:"11"}}},{title:{style:{color:"#848484",fontSize:"11"}},opposite:!0}],legend:{layout:"horizontal",align:"left",verticalAlign:"bottom",borderWidth:"0"}},bar:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],yAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},xAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}},credits:{enabled:!1}},"bar-line":{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{reflow:!0},yAxis:{title:{style:{color:"#848484"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}},credits:{enabled:!1},series:[{type:"column"},{type:"spline"},{negativeColor:"#df2034"}]},column:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"column",reflow:!0},credits:{enabled:!1},series:{negativeColor:"#df2034"},yAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}}},"column-stacked":{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"column",reflow:!0},credits:{enabled:!1},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},yAxis:{title:{style:{color:"#848484"}}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:"white"},events:{legendItemClick:function(){return!1}}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}}},area:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"area",reflow:!0},credits:{enabled:!1},series:{negativeColor:"#df2034"},yAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}}},line:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"line",reflow:!0},credits:{enabled:!1},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},series:{negativeColor:"#df2034"},yAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}}},pie:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"pie",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,reflow:!0},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,slicedOffset:5,cursor:"pointer",dataLabels:{enabled:!0,distance:15,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} Lacs"}}}},funnel:{chart:{type:"funnel",reflow:!0},plotOptions:{series:{dataLabels:{enabled:!0,format:"<b>{point.name}</b> ({point.y:,.0f})",color:"black",softConnector:!0},neckWidth:"25%",neckHeight:"25%"}}},scatter:{chart:{type:"scatter",animation:!1},credits:{enabled:!1},plotOptions:{series:{dataLabels:{}},scatter:{marker:{radius:5}}}},waterfall:{colors:["#0095b8","#f39c10","#983366","#00b763","#0095de","#00c39f","#f6c700","#007ebc","#e54400","#9e21ad","#7c8d8e"],chart:{type:"waterfall",reflow:!0},credits:{enabled:!1},series:{negativeColor:"#df2034"},yAxis:{title:{style:{color:"#505050",fontFamily:"arial",fontSize:12,fontWeight:"bold"}}},title:{style:{fontFamily:"arial",fontSize:16,fontWeight:"normal",color:"#505050"},margin:30},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:"0",itemStyle:{color:"#505050",fontSize:"11"}}}}}])}),define("directives/common/pt-widgetChart",["app","directives/base/pt-chart","configs/chartConfig"],function(a){a.directive("ptWidgetchart",[function(){return{restrict:"A",template:'<div pt-chart class="chartStyle" chart-size="size" chart-config=config></div>',scope:{widgetData:"=widgetData",tabChange:"="},controller:["$scope","$element","$attrs","ChartConfig",function(a,b,c,d){a.$watch("widgetData",function(b,c){if(b){var e,f={},g={},h=a.widgetData.widgetData.displayInfo,i="";h&&(i=h.subtype);var j={type:i,reflow:!0};$.extend(!0,f,d[i]),f.chart&&($.extend(!0,f.chart,h.chart),j=f.chart),f.title?$.extend(!0,f.title,h.title):f.title=h.title,f.xAxis?$.extend(!0,f.xAxis,h.xAxis):f.xAxis=h.xAxis,f.plotOptions?$.extend(!0,f.plotOptions,h.plotOptions):f.plotOptions=h.plotOptions,f.exporting?$.extend(!0,f.exporting,h.exporting):f.exporting=h.exporting;var k=h.seriesMeta.name;if(k&&1===k.length)e={yAxis:{title:{text:k[0],style:{color:"#848484",fontSize:"11"}},labels:{formatter:function(){return this.value>=1e7||this.value<=-1e7?this.value/1e7+"Cr":this.value>=1e5||this.value<=-1e5?this.value/1e5+"Lacs":this.value}}},chart:j,tooltip:{formatter:function(){var a;return a=this.y>=1e7||this.y<=-1e7?Math.round(100*this.y/1e7)/100+"Cr":this.y>=1e5||this.y<=-1e5?Math.round(100*this.y/1e5)/100+"Lacs":this.y,this.series.name+": "+a}}};else if(k&&k.length>1){var l=[];angular.forEach(k,function(a,b){var c={title:{text:a,style:{color:"#848484",fontSize:"11"}},opposite:b%2===0?!1:!0,labels:{formatter:function(){return this.value>=1e7||this.value<=-1e7?this.value/1e7+"Cr":this.value>=1e5||this.value<=-1e5?this.value/1e5+"Lacs":this.value}}};l.push(c)}),e={chart:j,yAxis:l,tooltip:{formatter:function(){var a;return a=this.y>=1e7||this.y<=-1e7?Math.round(100*this.y/1e7)/100+"Cr":this.y>=1e5||this.y<=-1e5?Math.round(100*this.y/1e5)/100+"Lacs":this.y,this.series.name+": "+a}}}}f.legend?$.extend(!0,f.legend,h.legend):f.legend=h.legend,f.tooltip?$.extend(!0,f.tooltip,h.tooltip):f.tooltip=h.tooltip,f.yAxis?$.extend(!0,f.yAxis,h.yAxis):f.yAxis=h.yAxis,f.lang?$.extend(!0,f.lang,h.lang):f.lang=h.lang,f.noData?$.extend(!0,f.noData,h.noData):f.noData=h.noData,$.extend(!0,g,f,e),a.config=g,a.$watch("widgetData.widgetData.displayInfo.tooltip",function(b,c){b&&(a.config.tooltip=a.widgetData.widgetData.displayInfo.tooltip)}),a.$watch("widgetData.widgetData.displayInfo.series",function(b,c){b&&b.length&&(a.config.series=a.widgetData.widgetData.displayInfo.series)},!0),a.$watch("widgetData.widgetData.displayInfo.xAxis.categories",function(b,c){b&&(a.config.xAxis.categories=a.widgetData.widgetData.displayInfo.xAxis.categories)}),a.$watch("widgetData.widgetData.displayInfo.yAxis.plotLines",function(b,c){b!==c&&(a.config.yAxis.plotLines=a.widgetData.widgetData.displayInfo.yAxis.plotLines)}),a.$watch("widgetData.widgetData.displayInfo.yAxis.max",function(b,c){b!==c&&(a.config.yAxis.max=a.widgetData.widgetData.displayInfo.yAxis.max)}),a.size={}}})}],link:function(a,b,c){a.size&&(a.size.width=b.find(".chartStyle").parent().width(),a.$on("dashboardResize",function(c,d){window.setTimeout(function(){a.size.width=b.find(".chartStyle").parent().width()},900)}))}}}])}),define("text!views/directives/common/pt-property-listings.html",[],function(){return'<table class="table table-hover additional-table" data-ng-class="{\'d-additional-table\':project.isCouponAvailable}">\n    <tr class="header-row" data-ng-if="!project.isCouponAvailable || !onProjectPage">\n        <th>Property</th>\n        <th>Size</th>\n        <th data-ng-if="project.isPrimary && !resalefilterapplied">Builder Price</th>\n        <th data-ng-if="project.isPrimary && project.isCouponAvailable">Offer Price</th>\n        <th data-ng-if="project.isResale">Resale Price</th>\n        <th data-ng-if="showFloorPlanColumn">Floor Plan</th>\n	</tr>\n	<tr class="header-row" data-ng-if="project.isCouponAvailable && onProjectPage">\n        <th>Type/Size</th>\n        <th>Builder Price</th>\n        <th>Offer Price</th>\n        <th data-ng-if="project.isResale">Resale Price</th>\n        <th>Discount</th>\n        <th>Coupon</th>\n        <th>Floor Plan</th>\n	</tr>\n	<tr data-ng-repeat-start="clubProp in properties"  \n		pt-property-listings-row \n		property=\'clubProp\' \n		ng-if="!clubProp.isComposite" \n		project=\'project\'\n		show-lead-form=\'showLeadForm\'\n		show-error-form = "showErrorForm"\n		floorplanimagelist="floorPlanImageList"\n		show-floor-plan-column="showFloorPlanColumn"\n		page="page"\n		version="version"\n		resalefilterapplied=\'resalefilterapplied\'\n		>\n	</tr>\n	<tr data-ng-if="clubProp.isComposite"\n		analytics-on\n		data-analytics-event="{{clubProp.showProps?\'Show More\':\'Show Less\'}}"\n		data-analytics-category="Project Details View"\n		data-analytics-label="Project Id: {{project.projectId}} - {{clubProp.label}}"\n		data-ng-click="clubProp.showProps = !clubProp.showProps" class="cursorPointer seoclick">\n        <td class="cursorPointer"><i data-ng-if="!clubProp.showProps && clubProp.TYPE == \'Villa\'" class="pt pt-icon-villa icon-info" tooltip=\'Villa\'></i>\n            {{clubProp.label}}\n            <span data-ng-if="!clubProp.showProps" data-ng-click="projectListingCluster(\'cluster\',\'clicked\',\'expandProperties\',\'Expand\');"><i class="pt pt-icon-chevron-down"></i></span>\n            <span data-ng-if="clubProp.showProps" data-ng-click="projectListingCluster(\'cluster\',\'clicked\',\'expandProperties\',\'Collapse\');"><i class="pt pt-icon-chevron-up"></i></span>\n        </td>\n		<td data-ng-class="{\'colu-hidden\':clubProp.showProps}">\n			<span pt-shallow-range property-name="Size" base-object="clubProp" unit="clubProp.measure" data-ng-if="clubProp.hasSizes"> </span>\n			<span data-ng-if="!clubProp.hasSizes">\n					On Request\n			</span>\n		</td>\n		<td data-ng-if=\'project.isPrimary && !resalefilterapplied\' data-ng-class="{\'colu-hidden\':clubProp.showProps , \'cut-price\' : clubProp.isCouponAvailable}">\n			<span data-ng-if="clubProp.minBudget && clubProp.maxBudget && project.projectStatus!=\'On Hold\'" data-ng-class="{\'coupan-before\' : clubProp.strikeOldPrice && clubProp.isCouponAvailable}">\n				<div data-ng-class="{\'prop-price-info\' : clubProp.strikeOldPrice && project.isCouponAvailable}" pt-shallow-range property-name="Budget" base-object="clubProp" type=\'price\'></div>\n			</span>\n			<span data-ng-if="!clubProp.minBudget && !clubProp.maxBudget && project.projectStatus != \'On Hold\'">\n				<span data-ng-if="clubProp.allConfigSoldOut">\n            		Sold Out\n        		</span> \n        		<span data-ng-if="!clubProp.allConfigSoldOut">\n					On Request\n				</span>\n			</span>\n			<span data-ng-if="project.projectStatus==\'On Hold\'">\n				On Hold\n			</span>\n		</td>\n		<td data-ng-if=\'project.isPrimary && project.isCouponAvailable && !resalefilterapplied\' data-ng-class="{\'colu-hidden\':clubProp.showProps}">\n			<span data-ng-if="clubProp.minBudget && clubProp.maxBudget && project.projectStatus!=\'On Hold\'">\n				<div pt-shallow-range property-name="DiscountPrice" base-object="clubProp" type=\'price\'> </div>\n			</span>\n			<span data-ng-if="!clubProp.minBudget && !clubProp.maxBudget && project.projectStatus!=\'On Hold\'">\n				<span data-ng-if="clubProp.allConfigSoldOut">\n            		Sold Out\n        		</span>\n        		<span data-ng-if="!project.isSoldOut && !clubProp.allConfigSoldOut">\n					On Request\n				</span>\n			</span>\n			<span data-ng-if="project.projectStatus==\'On Hold\'">\n				On Hold\n			</span>\n		</td>\n		<td data-ng-if=\'project.isResale\' data-ng-class="{\'colu-hidden\':clubProp.showProps}">\n			<span data-ng-if="clubProp.minResalePrice && clubProp.maxResalePrice">\n				<div pt-shallow-range property-name="ResalePrice" base-object="clubProp" type=\'price\'> </div>\n			</span>\n			<span data-ng-if="!clubProp.minResalePrice && !clubProp.maxResalePrice">\n				On Request\n			</span>\n		</td>\n        <td data-ng-if="page == \'projectDetail\'"\n			analytics-on\n			data-analytics-event="Click_Project Details"\n			data-analytics-category="Project Details View"\n			data-analytics-label="View floor plan"\n			data-ng-class="{\'colu-hidden\':clubProp.showProps}">\n			<span class="seoLink">View floor plan</span>\n		</td>\n	</tr>\n	<tr data-ng-repeat="property in clubProp.properties" \n		class="more-option-info"\n		pt-property-listings-row \n		property=\'property\' \n		project=\'project\' \n		ng-if="clubProp.showProps" \n		show-lead-form=\'showLeadForm\'\n		show-error-form = "showErrorForm"\n        floorplanimagelist="floorPlanImageList"\n        show-floor-plan-column="showFloorPlanColumn"\n		page="page"\n		version="version"\n		resalefilterapplied=\'resalefilterapplied\'\n		data-ng-repeat-end>\n	</tr>\n</table>\n<div data-ng-if="extraProps.length" class="more-info pull-left seoclick" data-ng-click="toggleMore()">\n	View \n    <span data-ng-if="!showingMore">{{extraProps.length}} more <i class="pt pt-icon-chevron-down"></i></span>\n    <span data-ng-if="showingMore">less <i class="pt pt-icon-chevron-up"></i></span>\n</div>\n\n'}),define("text!views/directives/common/pt-property-listings-row.html",[],function(){return'<td class="text-inde-info">\n    <a data-ng-href="/{{followUrl}}" class="{{class}}">\n        <i data-ng-if="property.unitType == \'Villa\'" class="pt pt-icon-villa icon-info" tooltip=\'Villa\'></i>\n        <span data-ng-if="property.bedrooms == 0"> Plot</span>\n        <span data-ng-if="property.bedrooms != 0" data-ng-click="propertyTracking(\'cluster\', \'clicked\', \'propertyName\', project.projectId, $parent.$index +1);"> {{property.bedrooms}}BHK + {{property.bathrooms}}T </span>\n        <div data-ng-if="property.size && project.isCouponAvailable && onProjectPage">\n            {{property.size | figureFMT}} {{property.measure}}\n       </div>\n    </a>        \n</td>\n<td data-ng-if="mergeColumns" colspan="3">\n    <span class="requ-info">\n        <span>Details on Request</span>\n        <a data-ng-click="showLeadForm($event, \'newPrice\', property)">Get property details</a>\n    </span>\n</td>\n<td data-ng-if="!mergeColumns && (!project.isCouponAvailable || !onProjectPage)">\n    <span data-ng-if="property.size">\n        {{property.size | figureFMT}} {{property.measure}}\n   </span>\n   <span data-ng-if="!property.size && property.carpetArea">\n        {{property.carpetArea | figureFMT}} {{property.measure}} (Carpet Area)\n   </span>\n   <span class="requ-info" data-ng-if="!property.size && !property.carpetArea">\n        <span class="requOnInfo">On Request</span>\n        <span class="seoLink" data-ng-click="showLeadForm($event, \'size\', property)">Request Size</span>        \n    </span>    \n</td>\n<td data-ng-if="project.isPrimary && !mergeColumns && !resalefilterapplied" data-ng-class="{\'cut-price\' : property.couponCatalogue}"> \n        <div data-ng-if="property.isPropertySoldOut">\n        Sold Out\n    </div>\n    <div data-ng-if="!property.isPropertySoldOut">\n        <div data-ng-if="property.budget" class="grid-budget" data-ng-class="{\'coupan-before\' : property.budget != property.discBudget && project.isCouponAvailable}">\n            <div data-ng-if="project.projectStatus != \'On Hold\'" data-ng-class="{\'prop-price-info\' : property.budget != property.discBudget &&  project.isCouponAvailable}">\n            <i class="pt pt-icon-inr"></i>\n             {{property.budget | formatPrice: \'L\'}}\n            <div class="rate" data-ng-if="property.pricePerUnitArea">\n                <i class="pt pt-icon-inr"></i> {{property.pricePerUnitArea | rateFMT}}\n            </div>\n             </div>\n            <div data-ng-if="project.projectStatus == \'On Hold\'">\n             On Hold\n             </div>\n        </div>\n        <div data-ng-if="!property.budget">\n            <span class="requ-info" data-ng-if="project.projectStatus != \'On Hold\'">\n                <span class="requOnInfo">On Request</span>\n                <span class="seoLink" data-ng-click="showLeadForm($event, \'newPrice\', property)">Request Price</span>\n            </span>\n            <span data-ng-if="project.projectStatus == \'On Hold\'">\n                <span>On Hold</span>\n            </span>\n        </div>\n    </div>\n</td>\n<td data-ng-if="project.isPrimary && !mergeColumns && project.isCouponAvailable && !resalefilterapplied">\n    <div data-ng-if="property.isPropertySoldOut">\n        Sold Out\n    </div>\n    <div data-ng-if="!property.isPropertySoldOut">\n        <div data-ng-if="property.discBudget" class="grid-budget">\n            <div data-ng-if="project.projectStatus != \'On Hold\'">\n            <i class="pt pt-icon-inr"></i>\n             {{property.discBudget | formatPrice: \'L\'}}\n            <div class="rate" data-ng-if="property.couponCatalogue.discountPricePerUnitArea">\n                <i class="pt pt-icon-inr"></i> {{property.couponCatalogue.discountPricePerUnitArea | rateFMT}}\n            </div>\n            <div class="rate" data-ng-if="property.pricePerUnitArea && !property.couponCatalogue.discountPricePerUnitArea">\n                <i class="pt pt-icon-inr"></i> {{property.pricePerUnitArea | rateFMT}}\n            </div>\n            </div>\n            <div data-ng-if="project.projectStatus == \'On Hold\'">\n             On Hold\n             </div>\n        </div>\n        <div data-ng-if="!property.budget">\n            <span class="requ-info" data-ng-if="project.projectStatus != \'On Hold\'">\n                <span class="requOnInfo">On Request</span>\n                <sapn class="seoLink" data-ng-click="showLeadForm($event, \'newPrice\', property)">Request Price</span>\n            </span>\n            <span data-ng-if="project.projectStatus == \'On Hold\'">\n                <span>On Hold</span>\n            </span>\n        </div>\n    </div>\n</td>   \n\n<td data-ng-if="project.isResale && !mergeColumns">\n    <span data-ng-if="property.resalePrice" class="grid-budget" data-ng-bind-html="resalePriceRange"></span>\n\n    <span data-ng-if="property.resalePricePerUnitArea && property.resalePrice" class="rate" data-ng-bind-html="resalePricePerUnitAreaRange"></span>\n\n    <span class="requ-info" data-ng-if="!property.resalePrice">\n        <span class="requOnInfo">On Request</span>\n        <span class="seoLink" data-ng-click="showLeadForm($event, \'newPrice\', property)">Request Price</span>\n    </span>\n</td>\n\n<td data-ng-if="project.isCouponAvailable && onProjectPage">\n    <span class="grid-budget d-green-txt" data-ng-if="property.couponCatalogue.discount">\n        <i class="pt pt-icon-inr"></i> {{property.couponCatalogue.discount | formatPrice: \'L\'}}\n    </span>\n    <span class="grid-budget" data-ng-if="!property.couponCatalogue">-</span>\n</td>\n<td data-ng-if="project.isCouponAvailable && onProjectPage">\n    <span class="grid-budget" data-ng-if="property.couponCatalogue.couponPrice">\n        <i class="pt pt-icon-inr"></i> {{property.couponCatalogue.couponPrice | formatPrice: \'L\'}}\n    </span>\n    <span class="grid-budget" data-ng-if="!property.couponCatalogue">-</span>\n</td>\n\n<td data-ng-if="showFloorPlanColumn && project.has3DImages">\n    <span class="seoLink" data-ng-if="property.floorPlanImage && property.floorPlanImage[0][\'data\'][0][\'image\']" data-ng-click="openImageModal()"> 2D </span> <span data-ng-if="!showGetFloorPlan">|</span> \n    <span class="seoLink" data-ng-if="property.floorPlanImage && property.panoramaViewPath" data-ng-click="expandTour(property.projectId, property.panoramaViewPath)">3D</span>\n    <span data-ng-if="property.floorPlanImage && !property.panoramaViewPath" tooltip="3D view not available">3D</span>\n    <span class="seoLink" data-ng-if="showGetFloorPlan" data-ng-click="showLeadForm($event, \'floorPlan\', property)">\n        Get floor plan\n    </span>\n</td>\n\n<td data-ng-if="showFloorPlanColumn && !project.has3DImages">\n    <span class="seoLink" data-ng-if="property.floorPlanImage" data-ng-click="openImageModal()">\n        View floor plan\n    </span>\n    <span class="seoLink" data-ng-if="showGetFloorPlan" data-ng-click="showLeadForm($event, \'floorPlan\', property)">\n        Get floor plan\n    </span>\n</td>\n'}),define("directives/common/pt-property-listings-row",["app","text!views/directives/common/pt-property-listings-row.html","services/fullScreenService"],function(a,b){a.directive("ptPropertyListingsRow",[function(){return{restrict:"A",template:b,scope:{property:"=",project:"=",showLeadForm:"=",showErrorForm:"=",floorplanimagelist:"=",showFloorPlanColumn:"=",page:"=",version:"=",resalefilterapplied:"="},controller:["$scope","$rootScope","$location","FullScreenService","$modal","$filter",function(a,b,c,d,e,f){"projectDetail"==a.page&&(a.onProjectPage=!0),a.resalePriceRange="";var g=f("priceFormat"),h=f("rateFMT"),i=a.project,j=a.property;a.followUrl=a.property.URL,a["class"]="noBlueLink",a.openImageModal=function(){a.$emit("open_floor_plan",a.property.propertyId)};var k=function(){var a=new Date,b=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();return b},l=function(a,b){a=new Date(a),b=new Date(b);var c=b.getTime()-a.getTime(),d={};return d.seconds=Math.floor(c/1e3),d},m=function(a){return a=a.toLowerCase(),a.replace(/(?:^|\s)\w/g,function(a){return a.toUpperCase()})};a.expandTour=function(b,c){var d=k(),f=m(a.project.fullName)+", "+a.property.unitName.toUpperCase()+" "+a.property.size+" "+m(a.property.measure)+" "+m(a.project.address),g=$(window).height()-41,h=$(window).width();e.open({template:'<div class="threeDcaro-close-btn" data-ng-click="cancel()"><i class="pt pt-icon-times"></i></div><div class="threeDBottomText">This virtual tour is an artistic impression of the apartment. It may not be exact representation.</div><div><div class="threeD-buil-text-info">'+f+'</div><iframe id="iframe" src='+c+' height="'+g+'" width="'+h+'"></iframe></div>',
windowClass:"threeDModalGallery",controller:["$scope","$modalInstance",function(a,b){a.cancel=function(){var a=k(),c=l(d,a);c.seconds,b.dismiss("cancel")}}]})};var n=function(){if(a.resalePriceRange='<i class="pt pt-icon-inr"></i> '+g(j.resalePrice,0),a.resalePricePerUnitAreaRange='<i class="pt pt-icon-inr"></i> '+h(j.resalePricePerUnitArea),j.resaleListingCount){var b=g(j.propertyResaleMinPricePerUnitArea*j.size,0),c=g(j.propertyResaleMaxPricePerUnitArea*j.size,0);a.resalePriceRange=b==c?'<i class="pt pt-icon-inr"></i> '+b:'<i class="pt pt-icon-inr"></i> '+b+' - <i class="pt pt-icon-inr"></i> '+c,a.resalePricePerUnitAreaRange=b==c?'<i class="pt pt-icon-inr"></i> '+h(j.propertyResaleMinPricePerUnitArea):'<i class="pt pt-icon-inr"></i> '+h(j.propertyResaleMinPricePerUnitArea)+' - <i class="pt pt-icon-inr"></i> '+h(j.propertyResaleMaxPricePerUnitArea)}};n(),a.showGetFloorPlan=0!==a.property.bedrooms&&!a.property.floorPlanImage,a.mergeColumns=!j.size&&!j.carpetArea&&i.isPrimary&&!j.budget&&!j.isPropertySoldOut&&"On Hold"!=i.projectStatus&&i.isResale&&!j.resalePrice,(i.isPrimary&&!j.budget&&!j.isPropertySoldOut&&"On Hold"!=i.projectStatus||i.isResale&&!j.resalePrice)&&(i.hasPriceOnRequest=!0),a.propertyTracking=function(c,d,e,f,g){var h,i={},j=a.version||"";h=e+"-"+j+"-"+b.CURRENT_ACTIVE_PAGE,i["Project ID"]=f,i["Clicked On"]=e,i["Listing Number"]=g,i["Page Name"]=b.CURRENT_ACTIVE_PAGE,i["Listing Version"]=a.version}}]}}])}),define("text!views/directives/base/pt-shallow-range.html",[],function(){return'<span data-ng-if="min != max && min && max" class="prop-price-info"> \n	<i class="pt pt-icon-inr" data-ng-if="type == \'price\'"></i> {{min}} - <i class="pt pt-icon-inr" data-ng-if="type == \'price\'"></i> {{max}}  <span data-ng-if="unit">{{unit}}</span>\n</span>\n<span data-ng-if="min == max && min && min != \'NA\'" class="prop-price-info"> \n	<i class="pt pt-icon-inr" data-ng-if="type == \'price\'"></i> {{min}}  <span data-ng-if="unit">{{unit}}</span>\n</span>\n<span data-ng-if="min == \'NA\' && propertyName==\'Size\'">  \n	<a data-ng-click="openLeadForm($event, \'size\', index, \'hidden-sizerequest-listing\')" >Size On Request</a>\n</span>\n<span data-ng-if="min == \'NA\' && propertyName!=\'Size\'" class="prop-price-info"> \n	{{min}}\n</span>\n'}),define("directives/base/pt-shallow-range",["app","text!views/directives/base/pt-shallow-range.html","formatters/common"],function(a,b){a.directive("ptShallowRange",["$filter","Formatter",function(a,c){return{restrict:"A",scope:{baseObject:"=",propertyName:"@",unit:"=",type:"@",staticUnit:"@",openLeadForm:"=",index:"@"},template:b,link:function(b,c,d){b.unit||(b.unit=b.staticUnit),b.min=b.baseObject["min"+b.propertyName],b.max=b.baseObject["max"+b.propertyName],b.propertyName=d.propertyName,"price"==b.type&&(b.min=a("formatPrice")(b.min,"L"),b.max=a("formatPrice")(b.max,"L"))}}}])}),define("directives/common/pt-property-listings",["app","text!views/directives/common/pt-property-listings.html","formatters/common","services/fullScreenService","parsers/propertyParser","services/filterService","directives/common/pt-property-listings-row","directives/base/pt-shallow-range"],function(a,b){a.directive("ptPropertyListings",[function(){return{restrict:"A",template:b,scope:{m_properties:"=properties",openLeadForm:"=",showErrorForm:"=",floorplanimagelist:"=",page:"@",project:"=",version:"=",resalefilterapplied:"="},link:function(a,b,c){a.pagename=c.pageType},controller:["$rootScope","$scope","PropertyParser","FullScreenService","$location","Formatter","FilterService",function(a,b,c,d,e,f,g){"projectDetail"==b.page&&(b.onProjectPage=!0),b.$watch("m_properties",function(d,e){if(d){if(b.UNAVAILABLE_PRICE_LABEL="on request",b.REQUEST_PRICE_LABEL="Request Price",b.UNAVAILABLE_PROP_LABEL="Details On Request",b.REQUEST_PROP_LABEL="Request Property Details",b.showFloorPlanColumn=!1,"projectDetail"==b.page)for(var g in b.project.properties)if(b.project.properties.hasOwnProperty(g)&&"Plot"!=b.project.properties[g].unitType){b.showFloorPlanColumn=!0;break}if(b.showLeadForm=function(a,c,d){"listings"===b.pagename?"newPrice"===c||"resalePrice"===c?b.openLeadForm(a,c,"hidden-pricerequest-listing",d):"size"===c?b.openLeadForm(a,c,"hidden-sizerequest-listing",d):"floorPlan"===c&&b.openLeadForm(a,c,"hidden-floorrequest-listing",d):"project-property"===b.pagename&&("newPrice"===c||"resalePrice"===c?b.openLeadForm(a,c,"hidden-pricerequest-mid",d):"size"===c?b.openLeadForm(a,c,"hidden-sizerequest-mid",d):"floorPlan"===c&&b.openLeadForm(a,c,"hidden-floorrequest-mid",d))},"projectDetail"==b.page)for(var h in b.m_properties){var i=b.m_properties[h];for(var j in i.images)if(i.images.hasOwnProperty(j)&&"floorPlan"==i.images[j].imageType.type){var k=[];k.push({data:[i.images[j]]}),k[0].data[0].image=k[0].data[0].absolutePath,k[0].data[0].largeImage=k[0].data[0].absolutePath,k[0].data[0].text=k[0].data[0].title,k[0].data[0].thumbImage=f.getImagePath(k[0].data[0].image,"THUMBNAIL"),k[0].data[0].smallImage=f.getImagePath(k[0].data[0].image,"SMALL"),b.m_properties[h].floorPlanImage=k}}b.properties=c.groupProperties(b.m_properties,b.project.isCouponAvailable&&a.onProjectPage),b.toggleMore=function(){if(b.showingMore){for(var a=0;a<b.properties.length;a++)b.properties[a].showProps=!1;b.properties.splice(3,b.properties.length-3),b.projectListingCluster("cluster","clicked","expandMoreProperties","Less")}else b.properties=b.properties.concat(b.extraProps),b.projectListingCluster("cluster","clicked","expandMoreProperties","More");b.showingMore=!b.showingMore},1===b.properties.length&&b.properties[0].isComposite&&(b.properties=b.properties[0].properties),b.properties.length>3&&(b.extraProps=b.properties.splice(3,b.properties.length-3)),b.projectListingCluster=function(b,c,d,e){var f;a.CURRENT_ACTIVE_PAGE,"Expand"==e||"Collapse"==e?f=e+" Properties":("More"==e||"Less"==e)&&(f="Clicked "+e+" Properties")}}},!0)}]}}])}),define("text!views/directives/project/homeloan.html",[],function(){return'<div class="contentBoxContainer padding20 marginB15 {{containerClass}}" ng-hide="!openLeadForm && loanProviderBankDetails && loanProviderBankDetails.length == 0" >\n	<div class="contentHeader">\n		<h2>Homeloan</h2>\n	</div>\n	<div class="content-info row-full">\n		<p data-ng-if="openLeadForm && loanProviderBankDetails && loanProviderBankDetails.length > 0">Do you require a home loan? This project has been approved by the following financial institutions. Get in touch with us for more details on home loans and best EMI options.</p>\n        <p data-ng-if="!openLeadForm && loanProviderBankDetails && loanProviderBankDetails.length > 0">This project has been approved by the following financial institutions.</p>\n		<div class="row-full" data-ng-if="loanProviderBankDetails && loanProviderBankDetails.length > 0">\n        	<div ng-class="{\'col-lg-8 col-md-8 col-sm-7\':openLeadForm, \'col-lg-12 col-md-12 col-sm-12\':!openLeadForm}">\n            	<div class="pull-left bank-img-info" data-ng-repeat="bank in loanProviderBankDetails">\n                	<div class="bank-img-area" >\n                    	<span class="visibility image-view-info" image-block alt-text="bank.name" image-source="bank.images[0].absolutePath" TYPE="THUMBNAIL" fit="true"></span>\n                    </div>\n                </div>\n            </div>\n        	<div class="col-lg-4 col-md-4 col-sm-5" data-ng-if="openLeadForm">\n            	<div class="bank-text-info relativePostion">\n                	<div pt-staticimage small="true" class="bank-show-text-info"></div>\n                    <div class="bank-overlay"></div>\n                    <div class="bank-cont-info">\n                		<span class="bank-cont-head-info">Home loan hassles no more - Ask us how!</span>\n                        <div class="row paddingT40">\n                        	<div class="col-lg-6 col-md-6 col-sm-6 bank-list-info">Multiple banks <br />\n                                Avail easy EMI Offers\n                            </div>\n                            <div class="col-lg-6 col-md-6 col-sm-6"><button class="btn-action small-btn" data-ng-click="openLeadForm($event, \'homeloan\', \'hidden-homeloan-mid\')">Get more info</button></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row-full home-loan-Cont-info" data-ng-if="openLeadForm &&loanProviderBankDetails && loanProviderBankDetails.length == 0">\n        	<div class="col-lg-8 col-md-8 col-sm-7 loan-offer-info columZeroLeftSpace" pt-staticimage small="true">\n            </div>\n        	<div class="col-lg-4 col-md-4 col-sm-5 fix-padding">\n            	<div class="bank-cont-info">\n                    <span class="bank-cont-head-info">Home loan hassles no more <br />Ask us how!</span>\n                    <div class="row-full paddingT40">\n                        <div class="bank-list-info">Multiple banks <br />\n                            Avail easy EMI Offers\n                        </div>\n                        <div class="paddingT15"><button class="btn-action small-btn" data-ng-click="openLeadForm($event, \'homeloan\', \'hidden-homeloan-mid\')">Get more info</button></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n	</div>\n</div>'}),define("text!views/directives/common/pt-staticimage.html",[],function(){return'<img data-ng-src="{{ getCdnUrl( imgName ) }}" >\n'}),define("directives/common/pt-staticimage",["app","text!views/directives/common/pt-staticimage.html"],function(a,b){a.directive("ptStaticimage",[function(){return{restrict:"A",scope:{small:"="},template:b,controller:["$scope","$rootScope","GlobalService",function(a,b,c){var d=["pt-promiseCard_01.jpg","pt-promiseCard_02.jpg","pt-promiseCard_03.jpg","pt-promiseCard_04.jpg","pt-promiseCard_05.jpg"],e=["pt-loanCard_01.jpg","pt-loanCard_02.jpg"];a.getCdnUrl=function(a){return b.getCDNURL("styles/images/"+a)};var f=0;a.small?(f=Math.floor(Math.random()*e.length),a.imgName=e[f]):(f=Math.floor(Math.random()*d.length),a.imgName=d[f])}]}}])}),define("text!views/directives/common/pt-image-block.html",[],function(){return'<div ng-if="!imgFullWidth" class="img-cont-info" data-ng-class="{\'img-buil-view-info\' : fit, \'img-top-info\' : fitop, \'img-grey-view-info\' : fitgrey, \'img-left-view-info\' : fitleft}">\n    <div class="big-img-info">\n        <div class="img-crop-info" itemscope="" itemtype="//schema.org/ImageObject">\n           <img class="buil-img" \n                alt="{{altText}}"\n                data-ng-class="{\'image-hide\':!imageLoaded, \'image-show\':imageLoaded}"  \n                data-ng-click="invokeModal()"\n            itemprop="contentURL"></img>\n           \n           <div pt-loading-block loading-object="imageLoaded"></div>\n        </div>\n        \n    </div>\n</div>\n<div ng-if="imgFullWidth" class="full-img-info" itemscope="" itemtype="//schema.org/ImageObject">\n    <img class="buil-img" alt="{{altText}}" data-ng-class="{\'image-hide\':!imageLoaded, \'image-show\':imageLoaded}" data-ng-click="invokeModal()" itemprop="contentURL"></img>\n    <div pt-loading-block loading-object="imageLoaded"></div>\n</div>\n<div class="buil-prop-local-info" data-ng-if="projectData">\n  <div class="prop-name" tooltip="{{projectData.name}}" data-ng-if="projectData.name">{{projectData.name}}</div>\n  <div class="prop-address">{{projectData.locality.label}}, {{projectData.locality.suburb.city.label}}</div>\n  <div pt-shallow-range property-name="ResaleOrPrimaryPrice" base-object="projectData" type=\'price\'> </div>\n</div>\n\n<!-- Modal -->\n<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" style="display:none"  data-ng-if="allowModal">\n  <div class="modal-dialog">\n    <div class="modal-content">\n    	<div class="closeBtn" data-dismiss="modal" aria-hidden="true" >\n            <i class="pt pt-icon-times"></i>\n      </div>\n      <div class="modal-header text-left">\n        <span class="modal-title modal-head-info" id="myModalLabel">Floor Plan</span>\n      </div>\n      <div class="modal-body">\n        <img data-ng-src="{{imageSource}}" style="height:400px"></img>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn" data-dismiss="modal">Close</button>\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n'}),define("directives/common/pt-image-block",["app","text!views/directives/common/pt-image-block.html","formatters/common","directives/common/pt-loading-block","directives/base/pt-shallow-range"],function(a,b){a.directive("imageBlock",["Formatter","$timeout",function(a,c){return{restrict:"A",scope:{imageSource:"=",altText:"=",type:"@",allowModal:"@",projectData:"=",fit:"@",fitop:"@",fitgrey:"@",fitleft:"@",is3d:"=",has3dimages:"=",imgFullWidth:"=?"},template:b,link:function(b,d,e){var f,g=d.find("img");b.$watch("imageSource",function(e,f){g=d.find("img"),b.imageLoaded=!1;var h=e?e:"/images/default.png";b.type&&e&&(h=a.getImagePath(h,b.type)),g.attr("src",h).load(function(){c(function(){b.$apply(function(){b.imageLoaded=!0})},0)}).each(function(){this.complete&&$(this).load()})}),b.invokeModal=function(a){f||(f=d.find(".modal")),b.imageSource&&b.allowModal&&f.modal()}}}}])}),define("directives/project/pt-projecthomeloan",["app","text!views/directives/project/homeloan.html","directives/common/pt-staticimage","directives/common/pt-image-block"],function(a,b){a.directive("ptProjecthomeloan",[function(){return{restrict:"A",scope:{loanproviderbanks:"=",openLeadForm:"=leadform",containerClass:"@"},template:b,controller:["$scope",function(a){a.$watch("loanproviderbanks",function(b,c){a.loanProviderBankDetails=b})}]}}])}),define("text!views/directives/project/specification.html",[],function(){return'<div class="contentHeader cursorPointer" data-ng-click="specToggle()">\n	<div class="stat-subComm-head-info">Specifications\n        <div class="pull-right paddingR10"><i class="cursorPointer pt pt-icon-chevron-{{arrowSpecState}}" ></i></div>\n    </div>\n</div>\n<div class="content-info row-full marginL20" id="specs">\n    <div>\n        <div data-ng-repeat="(key, value) in specifications" class="prop-speci-info pull-left paddingB10">\n            <div class="col-lg-10 col-md-10 col-sm-10 proj-spec-info">\n                <div data-ng-if="checkObject(value)">\n        	        <div class="stat-subComm-head-info sub-Header">{{key}}</div>\n                    <div data-ng-repeat="(item, val) in value" class="paddingL15">\n                        <b>{{item}}</b> : {{val}}\n                    </div>\n                </div>\n                <div data-ng-if="!checkObject(value)">\n                    <div class="stat-subComm-head-info sub-Header">{{key}}</div>\n                    {{value}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n'}),define("directives/project/pt-specification",["app","text!views/directives/project/specification.html"],function(a,b){a.directive("ptProjectspecification",[function(){return{restrict:"A",scope:{specifications:"="},template:b,controller:["$scope","$element","$attrs","$location",function(a,b,c,d){a.checkObject=function(a){return"object"==typeof a?!0:!1};var e=$("div#specs");-1===d.url().search("amenity_spec")?($(e.children()).slideUp(),a.isSpecCollapsed=!0,a.arrowSpecState="down"):($(e.children()).slideDown(),a.isSpecCollapsed=!1,a.arrowSpecState="up"),a.specToggle=function(){a.isSpecCollapsed?(a.isSpecCollapsed=!a.isSpecCollapsed,a.arrowSpecState="up",$(e.children()).slideDown()):(a.isSpecCollapsed=!a.isSpecCollapsed,a.arrowSpecState="down",$(e.children()).slideUp())}}],link:function(a,b,c){}}}])}),define("text!views/directives/project/amenities.html",[],function(){return'<div class="contentHeader cursorPointer" data-ng-click="toggle()">\n	<div class="stat-subComm-head-info">Amenities  \n    	<div class="pull-right paddingR10"><i class="cursorPointer pt pt-icon-chevron-{{arrowState}}"></i></div>\n    </div>    \n</div>\n<div class="content-info marginL20" id="amenities">\n	<div class="row-full paddingT15">\n        <div data-ng-repeat="amenity in totalAmenities" class="amen-cont-info {{amenity.cName}}">\n            <i class="fs0 pt pt-icon-{{amenity.amenityMaster.abbreviation}} pull-left" tooltip="{{ amenity.amenityDisplayName }}" tooltip-placement="top"></i>\n            <span class="pull-left amen-text-info">{{amenity.amenityDisplayName}}</span>\n        </div>\n    </div>\n    <div class="custom row-full amen-show-text-info" data-ng-class="{\'border-Top\': (customAmenitiesList.length > 0)}">\n		<ul>\n            <li data-ng-repeat="item in customAmenitiesList track by $index">{{item}}</li>      \n        </ul>\n	</div>    \n</div>\n'}),define("directives/project/pt-amenities",["app","text!views/directives/project/amenities.html","formatters/common"],function(a,b){a.directive("ptProjectamenities",[function(){return{restrict:"A",scope:{amenitiesList:"=amenities"},template:b,controller:["$scope","$element","$attrs","$location","Formatter",function(a,b,c,d,e){if(a.amenitiesFullList=e.amenitiesFullList,a.amenitiesList&&a.amenitiesList.length>0){a.amenitiesUnavailable=[],a.amenitiesAvailable=a.amenitiesList.slice(0,-1),a.amenitiesAvailableDisplay=a.amenitiesAvailable.slice(0,4),a.customAmenities=a.amenitiesList.slice(-1)[0],a.customAmenitiesList=a.customAmenities.amenityDisplayName.split(", ");for(var f in a.amenitiesFullList){var g=a.amenitiesFullList[f];if("object"!=typeof g)break;var h=!1;for(var i in a.amenitiesAvailable){var j=a.amenitiesAvailable[i];if("object"!=typeof j)break;g.amenityMaster&&g.amenityMaster.amenityName==j.amenityMaster.amenityName&&(h=!0)}var k=a.amenitiesList.slice(-1)[0].amenityDisplayName.split(", ");for(var l in k)g.amenityMaster&&g.amenityMaster.amenityName==k[l]&&(h=!0);h||(g.cName="disabled",a.amenitiesUnavailable.push(g))}a.totalAmenities=a.amenitiesAvailable.concat(a.amenitiesUnavailable)}a.$on("expand_amenities",function(b,c){a.isCollapsed=!0,a.toggle()});var m=$("div#amenities");-1===d.url().search("amenity_spec")?($(m.children()).slideUp(),a.arrowState="down",a.isCollapsed=!0):(a.arrowState="up",a.$broadcast("expand_amenities"),a.isCollapsed=!1),a.toggle=function(){a.isCollapsed?(a.isCollapsed=!a.isCollapsed,a.arrowState="up",$(m.children()).slideDown()):(a.isCollapsed=!a.isCollapsed,a.arrowState="down",$(m.children()).slideUp())}}],link:function(a,b,c){}}}])}),define("controllers/b2b/phaseDetailCtrl.82aebd88",["app","underscore","services/b2b/dataService","services/projectService","services/leadService","parsers/imageParser","services/constants","configs/widgetConfig","parsers/priceTrend","parsers/projectParser","services/fullScreenService","directives/common/pt-interval","directives/common/pt-widgetChart","directives/common/pt-carousel","directives/common/pt-property-listings","directives/project/pt-projecthomeloan","directives/project/pt-specification","directives/project/pt-amenities"],function(a){"use strict";a.controller("phaseDetailCtrl",["$scope","$rootScope","DataService","ProjectService","$stateParams","ImageParser","B2BConstants","WidgetConfig","$filter","PriceTrendParser","ProjectParser","FullScreenService","LeadService","GoogleAnalyticsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q=i("dateFormat"),r=b.userDetails.preference.preference;a._defaults=g.PROJECT_DETAIL,a.timeInterval=a._defaults.TIME_INTERVAL,a.duration=a.timeInterval.DEFAULT_DURATION,a.yearType=r.yearType,a.yearConstant=a.timeInterval.DURATION[a.yearType.toUpperCase()],a.keyDataType=a.timeInterval.DURATION[a.yearType.toUpperCase()][a.duration.type].key,a.trendType=a.timeInterval.DURATION[a.yearType.toUpperCase()][a.duration.type].key,o={group:[a._defaults.DEFAULT_GROUP]},a.projectCarouselSettings={skin:"black",responsive:!0,width:871,height:380,imageWidth:520,imageHeight:400,showBottomNav:!0};var s=function(){a.phases&&a.phases.length>0&&a.phaseSelected(a.phases[0])},t=function(){var b=0,c=[];for(var d in a.timeInterval.DURATION[a.yearType.toUpperCase()])if(a.timeInterval.DURATION[a.yearType.toUpperCase()].hasOwnProperty(d)){switch(c[b]={key:a.timeInterval.DURATION[a.yearType.toUpperCase()][d].key},a.timeInterval.DURATION[a.yearType.toUpperCase()][d].title){case"Months":c[b].view="Monthly";break;case"Quarters":c[b].view="Quarterly";break;default:c[b].view=a.timeInterval.DURATION[a.yearType.toUpperCase()][d].title}b++}return c},u=function(){d.getProjectDetail(e.projectId).then(function(b){if(b){var c=k.parseProject(b.data),d=f.getProjectImage(c,"type");a.has3dimages=c.has3DImages,a.landmarkImageTypeCount=c.landmarkImageTypeCount,a.imageData=d.data,a.imagesfullviewData=d.data,a.name=c.builder.name+" "+c.name,a.projectData={projectId:c.projectId,localityId:c.locality.localityId,type:c.dominantUnitType,name:c.builder.name+" "+c.name,localityName:c.locality.label,cityName:c.locality.suburb.city.label,builderName:c.builder.name,projectName:c.name,cityId:c.locality.cityId,projectSize:c.projectSize,loanProviderBanks:c.loanProviderBanks,specifications:c.specifications,amenities:c.amenities,projectAddress:c.completeProjectAddress?c.completeProjectAddress:c.address,builderContactNo:c.projectBuilderContact?c.projectBuilderContact:"",builderMarketingShare:c.builderMarketingShare,isRedevelopementProject:c.isRedevelopementProject}}})},v=function(b){var c=[];return b.locality?c[0]="localityId=="+a.projectData.localityId:c[0]="projectId=="+a.projectData.projectId,b.unitType&&(c[0]+=";(",$.each(b.unitType,function(a,b){c[0]+="unitType=="+b+","}),c[0]=c[0].substring(0,c[0].length-1),c[0]+=")"),c[1]="&fields="+b.fields.join(","),c[2]="&group="+b.group[0]+","+b.durationType,"month"==b.durationType&&(c[2]+="&monthDuration="+b.durationCount),"quarter"==b.durationType&&(c[2]+="&quarterDuration="+b.durationCount),c.join("")},w=function(d){d.fields=a._defaults.FIELDS,d.unitType=b.userDetails.preference.preference.unitType,d.durationType=a.trendType;var e=v(d);$(".keyloading").show(),c.priceTrendHitherto(e,function(b){var f=j.priceTrendData(b,d.durationType,null,a.yearType);b.data&&f&&!_.isEmpty(f.data)&&!_.isEmpty(f.sortedIntervals)&&(d.unitType=[],d.unitType[0]=b.data[f.data[0].id][f.sortedIntervals[0]][0].unitType),d.locality=!0,d.fields=a._defaults.FIELDS,d.durationType=a.trendType,e=v(d),c.priceTrendHitherto(e,function(b){var c=j.priceTrendData(b,d.durationType,null,a.yearType);$(".keyloading").hide(),y({project:f,locality:c})})})},x=function(d){var e=a._defaults.FIELDS;d.fields=e.concat(a._defaults.KEY_DATA_FIELDS),d.locality=!1,d.unitType=b.userDetails.preference.preference.unitType,d.durationType=a.keyDataType;var f=v(d);c.trendHitherto(f,function(b){var c=j.keyData(b,d.durationType,a.yearType);z(c)})},y=function(b){a.trend=h.B2BDashBoard.PriceTrend;var c=b.project.data,d=b.locality.data;if(!_.isEmpty(c)&&!_.isEmpty(d)){var e,f,g,i,j,k=[],l={},m={},n=_.union(b.locality.sortedIntervals,b.project.sortedIntervals).sort(),o=[];for(e=0,i=n.length;i>e;e++)b.project[a.trendType][n[e]]?k.push(b.project[a.trendType][n[e]]):k.push(b.locality[a.trendType][n[e]]);for(a.trend.widgetData.displayInfo.xAxis={categories:k},g=0,f=d.length;f>g;g++){for(l={name:"",data:[]},l.name=a.projectData.name,m={name:"",data:[]},m.name=b.locality.locality[d[g].id],e=0,i=n.length;i>e;e++)j=c[g].sale[n[e]]?c[g].sale[n[e]].wavgPricePerUnitAreaOnLtdSupply:null,j?l.data.push(parseInt(j)):l.data.push(null),j=d[g].sale[n[e]].wavgPricePerUnitAreaOnLtdSupply,j?m.data.push(parseInt(j)):m.data.push(null);o.push(l),o.push(m)}a.trend.widgetData.displayInfo.series=o}},z=function(b){if(a.keyData=h.B2BDashBoard.KeyData,a.keyData.widgetData.displayInfo.yAxis.title.text="Units",b){var c,d,e,f,g,i=[],j=[],k=b.sortedIntervals,l=b.data;for(f=0;f<k.length;f++)i.push(b[a.keyDataType][k[f]]);a.keyData.widgetData.displayInfo.xAxis={categories:i};for(g in l){for(c={name:"",cityid:"",data:[]},c.name="Units Sold",d={name:"",cityid:"",data:[]},d.name="Unsold Inventory",f=0;f<k.length;f++)e=l[g][k[f]].sumUnitsSold,e&&"NA"!=e?c.data.push(parseInt(e)):c.data.push(null),e=l[g][k[f]].sumInventory,e&&"NA"!=e?d.data.push(parseInt(e)):d.data.push(null);j.push(c),j.push(d)}a.keyData.widgetData.displayInfo.series=j}};a.$on("open_floor_plan",function(b,c){a.open_image_modal(c)}),a.openLeadForm=function(b,c,d,e){b.stopPropagation();var f={type:c,cityId:a.projectData.cityId,localityId:a.projectData.localityId,projectId:a.projectData.projectId,projectName:a.projectData.projectName,builderName:a.projectData.builderName,fromALV:!0,ui_php:"list.php",formlocationinfo:d};e&&(f.propertyDetail={unitName:e.unitName,measure:e.measure,size:e.size}),m.openLeadForm(f)},a.open_image_modal=function(b){var c;c=b?b:a.projectData.projectId;var d=-1,e=!1;$.each(a.imageData,function(a,b){"Floor Plans"==b.index?$.each(b.data,function(a,b){e||(d+=1),b.objectId==c&&(e=!0)}):e||(d+=b.data.length)});var f=l.openGallery(a.imageData,d);f.result.then(function(a){},function(){})},a.updateTimeFrame=function(b){a.trendType=b.type,a.keyDataType=b.type,o.locality=!1,o.durationCount=b.months,w(o),x(o)},a.phaseSelected=function(b){a.sphase=b},(p=function(){a.timeFrameList=t(),d.getProjectPhases(e.projectId).then(function(b){b&&b.length&&(a.phases=b,_.each(a.phases,function(a){var b=0,c=0,d=0,e=0;n.gaEventViewProjectDetail(a);var f=0,g=0;a.preLaunchDate=a.preLaunchDate?q(a.preLaunchDate):"NA",a.launchDate=a.launchDate?q(a.launchDate):"NA",a.completionDate=a.completionDate?q(a.completionDate):"NA",a.sold=Math.round((a.launchedUnit-a.sumAvailability)/a.launchedUnit*100),a.minSize=0,a.maxSize=0,_.each(a.properties,function(a){(a.size<b||0===b)&&(b=a.size),(a.size>c||0===c)&&(c=a.size),a.size&&(f+=a.size),(a.carpetArea<d||0===d)&&(d=a.carpetArea),(a.carpetArea>e||0===e)&&(e=a.carpetArea),a.carpetArea&&(g+=a.carpetArea)}),f?(a.minSize=b,a.maxSize=c,a.totalArea=Math.round(f/a.properties.length*a.launchedUnit),a.phaseViewMode="ViewPropertySize"):g?(a.minSize=d,a.maxSize=e,a.totalArea=Math.round(g/a.properties.length*a.launchedUnit),a.phaseViewMode="ViewCarpetArea"):a.phaseViewMode="ViewNA"})),s()}),u()})()}])});